{"id":"rui-014","title":"Make a dialog for viewing task details and editing them","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-19T18:40:37.907725+01:00","created_by":"Herb Caudill","updated_at":"2026-01-19T19:35:30.32148+01:00","closed_at":"2026-01-19T19:35:30.32148+01:00","close_reason":"Closed","comments":[{"id":67,"issue_id":"rui-014","author":"Herb Caudill","text":"## Summary\n\nImplemented a task details dialog component that allows users to view and edit task details.\n\n### Changes Made\n\n**New Components:**\n- `TaskDetailsDialog` - Modal dialog for viewing/editing task details with fields for title, description, status, and priority\n- `Dialog`, `Select`, `Label`, `Input`, `Textarea` - Reusable UI components using Radix UI primitives\n\n**New API Endpoints:**\n- `GET /api/tasks/:id` - Fetch a single task by ID\n- `PATCH /api/tasks/:id` - Update a task's fields\n\n**New Hook:**\n- `useTaskDialog` - Manages dialog state, fetches task data by ID, and handles API updates\n\n**Integration:**\n- Clicking any task in the sidebar opens the edit dialog\n- Dialog supports both edit mode and read-only mode\n- Changes are only saved when Save is clicked\n\n### Testing\n- 22 unit tests for TaskDetailsDialog covering rendering, editing, saving, and closing behaviors\n- Storybook stories for various task states (default, read-only, blocked, high priority, etc.)","created_at":"2026-01-19T18:35:26Z"}]}
{"id":"rui-06v","title":"add a 2px border around the whole page in the accent color","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-19T20:01:15.208516+01:00","created_by":"Herb Caudill","updated_at":"2026-01-19T20:35:57.808437+01:00","closed_at":"2026-01-19T20:35:57.808437+01:00","close_reason":"Closed","comments":[{"id":79,"issue_id":"rui-06v","author":"Herb Caudill","text":"Added a 2px solid border around the entire page using the accent color (from peacock settings). Falls back to a neutral dark gray (#374151) when no accent color is set. Changes:\n\n- Updated `MainLayout.tsx` to read the accent color from the store and apply it as an inline border style\n- Added tests for both the default border color and custom accent color border\n- All tests pass and build succeeds","created_at":"2026-01-19T19:35:53Z"}]}
{"id":"rui-0dh","title":"Make the whole header the accent color with text reversed out","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-19T18:53:15.885995+01:00","created_by":"Herb Caudill","updated_at":"2026-01-19T19:39:19.109991+01:00","closed_at":"2026-01-19T19:39:19.109991+01:00","close_reason":"Closed","comments":[{"id":68,"issue_id":"rui-0dh","author":"Herb Caudill","text":"## Changes Made\n\nImplemented full-width accent color header with reversed-out text:\n\n### Header.tsx\n- Changed from thin accent bar to full header background using accent color\n- Updated default accent color from black (`#000000`) to neutral gray (`#374151`) for better appearance when no peacock color is set\n- Uses `getContrastingColor` utility to automatically determine white or black text based on background luminance\n- Passes `textColor` prop down to child components\n\n### WorkspacePicker.tsx\n- Added `variant` prop with 'default' | 'header' options\n- Added `textColor` prop for header variant styling\n- Header variant uses semi-transparent hover states (`hover:bg-white/20`)\n- Folder icon color adapts to match header text color\n\n### ControlBar.tsx  \n- Added `variant` prop with 'default' | 'header' options\n- Added `textColor` prop for header variant styling\n- Buttons use ghost variant with custom border/text colors matching header\n- Hover states use semi-transparent white backgrounds\n\n### Header.test.tsx\n- Updated tests to check header background color instead of accent bar\n- Test names updated to reflect new behavior ('accent color background' instead of 'accent color bar')\n- Default color tests updated to expect `#374151`","created_at":"2026-01-19T18:39:15Z"}]}
{"id":"rui-0iv","title":"Current task not showing in status bar","status":"closed","priority":2,"issue_type":"bug","owner":"herb@devresults.com","created_at":"2026-01-19T22:20:47.213721+01:00","created_by":"Herb Caudill","updated_at":"2026-01-19T23:41:18.160034+01:00","closed_at":"2026-01-19T23:41:18.160034+01:00","close_reason":"Closed","comments":[{"id":134,"issue_id":"rui-0iv","author":"Herb Caudill","text":"## Summary of Changes\n\nFixed the current task not showing in the status bar.\n\n### Root Cause\nThe `StatusBar` component was trying to read the current task from the global Zustand store using `selectCurrentTask`, but the `useTasks` hook was only storing fetched tasks in local React state - never syncing them to the global store.\n\n### Changes Made\n\n1. **Updated store Task type** (`src/store/index.ts`)\n   - Changed `Task` interface from simple `{id, content, status: 'pending'|'in_progress'|'completed'}` to match `TaskCardTask` structure with `{id, title, status: 'open'|'in_progress'|'blocked'|'deferred'|'closed', ...}`\n   - Added `TaskStatus` type export\n\n2. **Updated useTasks hook** (`src/hooks/useTasks.ts`)\n   - Added import of `useAppStore`\n   - Added call to `setStoreTasks(result.issues)` after fetching tasks to sync to global store\n\n3. **Updated StatusBar** (`src/components/layout/StatusBar.tsx`)\n   - Changed `currentTask.content` to `currentTask.title` to match the new Task type\n\n4. **Updated tests** (`src/store/index.test.ts`, `src/components/layout/StatusBar.test.tsx`)\n   - Updated all test tasks to use `title` instead of `content`\n   - Updated status values from `pending/completed` to `open/closed`","created_at":"2026-01-19T22:41:12Z"}]}
{"id":"rui-0j6","title":"Markdown code block integration","description":"Integrate CodeBlock component with react-markdown for syntax highlighting in AssistantText","status":"open","priority":3,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-19T19:19:13.249305+01:00","created_by":"Herb Caudill","updated_at":"2026-01-19T19:19:13.249305+01:00","dependencies":[{"issue_id":"rui-0j6","depends_on_id":"rui-bnb","type":"parent-child","created_at":"2026-01-19T19:19:36.316529+01:00","created_by":"Herb Caudill"},{"issue_id":"rui-0j6","depends_on_id":"rui-28p","type":"blocks","created_at":"2026-01-19T19:19:52.251887+01:00","created_by":"Herb Caudill"}]}
{"id":"rui-0kp","title":"Add a command palette (hotkey cmd+;)","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-19T19:00:38.858938+01:00","created_by":"Herb Caudill","updated_at":"2026-01-20T02:25:49.985988+01:00","closed_at":"2026-01-20T02:25:49.985988+01:00","close_reason":"Closed","comments":[{"id":143,"issue_id":"rui-0kp","author":"Herb Caudill","text":"## Command Palette Implementation\n\nAdded a command palette accessible via **Cmd+;** (or Ctrl+; on Windows/Linux).\n\n### Features:\n- **Fuzzy search** across all commands with keywords support\n- **Context-aware commands**: Agent controls (Start/Stop/Pause) only show when appropriate based on Ralph status and connection state\n- **Keyboard shortcuts** displayed for each command\n- **Commands included**:\n  - Start/Stop/Pause Ralph agent\n  - Toggle sidebar\n  - Toggle theme (light/dark/system)\n  - Show keyboard shortcuts\n  - Focus task input (new task)\n  - Focus chat input\n  - Toggle task chat panel\n\n### Technical details:\n- Uses `cmdk` library for the command palette interface\n- Added `showCommandPalette` hotkey to config\n- Created CommandPalette component with full test coverage (19 tests)\n- Added ResizeObserver and scrollIntoView mocks to vitest-setup.ts for cmdk compatibility\n- Integrated into App.tsx with proper state management\n\n### Files changed:\n- `package.json`: Added cmdk dependency\n- `src/config/hotkeys.json`: Added showCommandPalette hotkey (Cmd+;)\n- `src/config/index.ts`: Added showCommandPalette to HotkeyAction type\n- `src/hooks/useHotkeys.ts`: Added showCommandPalette to allowedInInput list\n- `src/components/layout/CommandPalette.tsx`: New component\n- `src/components/layout/CommandPalette.test.tsx`: Full test coverage\n- `src/components/layout/HotkeysDialog.tsx`: Added command palette to Help category\n- `src/components/layout/index.ts`: Export CommandPalette\n- `src/App.tsx`: Integrated CommandPalette with state and handlers\n- `src/vitest-setup.ts`: Added ResizeObserver and scrollIntoView mocks","created_at":"2026-01-20T01:25:45Z"}]}
{"id":"rui-0p7","title":"Separate iterations in events view","description":"In the ralph events screen, each iteration should be displayed separately. Always show the current iteration by default, with buttons and hotkeys allowing navigation to previous or next iterations.","status":"closed","priority":1,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-19T18:45:46.359408+01:00","created_by":"Herb Caudill","updated_at":"2026-01-20T02:34:12.786297+01:00","closed_at":"2026-01-20T02:34:12.786297+01:00","close_reason":"Closed","comments":[{"id":142,"issue_id":"rui-0p7","author":"Herb Caudill","text":"Status: Only iteration count display exists in StatusBar. Still needed:\n- Group/filter events by iteration in EventStream\n- Add iteration navigation UI (prev/next buttons)\n- Add hotkeys for iteration navigation\n- Default to showing current iteration","created_at":"2026-01-20T01:20:01Z"},{"id":144,"issue_id":"rui-0p7","author":"Herb Caudill","text":"Implemented iteration navigation for the events view:\n\n**Store changes** (src/store/index.ts):\n- Added `viewingIterationIndex` state (null = latest, number = specific iteration)\n- Added helper functions: `isIterationBoundary`, `getIterationBoundaries`, `countIterations`, `getEventsForIteration`\n- Added actions: `setViewingIterationIndex`, `goToPreviousIteration`, `goToNextIteration`, `goToLatestIteration`\n- Added selectors: `selectViewingIterationIndex`, `selectIterationCount`, `selectCurrentIterationEvents`, `selectIsViewingLatestIteration`\n\n**EventStream changes** (src/components/events/EventStream.tsx):\n- Uses `useMemo` to compute filtered events per iteration\n- Shows navigation header when multiple iterations exist (Previous/Next buttons, iteration counter, Latest button)\n- Auto-scrolls to bottom when viewing latest, scrolls to top when navigating to older iterations\n\n**Hotkeys** (src/config/hotkeys.json):\n- `Cmd+[` - Previous iteration\n- `Cmd+]` - Next iteration\n- `Cmd+\\` - Latest iteration\n\n**Tests** (src/store/index.test.ts):\n- Added comprehensive tests for iteration boundary helpers\n- Added tests for navigation actions\n- Added tests for selectors","created_at":"2026-01-20T01:34:07Z"}]}
{"id":"rui-16a","title":"we don't need the \"auto-scroll\" label","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-19T21:07:48.857313+01:00","created_by":"Herb Caudill","updated_at":"2026-01-19T21:41:16.843102+01:00","closed_at":"2026-01-19T21:41:16.843102+01:00","close_reason":"Closed","comments":[{"id":98,"issue_id":"rui-16a","author":"Herb Caudill","text":"Removed the 'Auto-scroll' text label from the EventStream component. The pulsing indicator dot remains as a visual cue that auto-scroll is active - it's now slightly larger (size-2 instead of size-1.5) to be more noticeable. Updated tests to check for the indicator dot rather than the text label.","created_at":"2026-01-19T20:41:12Z"}]}
{"id":"rui-17z","title":"the add task input should stay focused after a task is submitted","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-19T18:24:41.328936+01:00","created_by":"Herb Caudill","updated_at":"2026-01-19T18:35:52.124848+01:00","closed_at":"2026-01-19T18:35:52.124848+01:00","close_reason":"Closed","comments":[{"id":48,"issue_id":"rui-17z","author":"Herb Caudill","text":"Fixed by keeping the input focused after successful task submission.\n\n**Changes:**\n- Added `inputRef.current?.focus()` call in QuickTaskInput after clearing the input value\n- Added test to verify input stays focused after successful submission\n\nThis allows users to quickly add multiple tasks in succession without needing to click back into the input field.","created_at":"2026-01-19T17:35:48Z"}]}
{"id":"rui-1ca","title":"change those up arrows to just `arrow-up`","description":"also both buttons should be the width of the send message button\n","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-19T21:14:57.210909+01:00","created_by":"Herb Caudill","updated_at":"2026-01-19T23:23:22.10426+01:00","closed_at":"2026-01-19T23:23:22.10426+01:00","close_reason":"Closed","comments":[{"id":128,"issue_id":"rui-1ca","author":"Herb Caudill","text":"Changed the submit button icons from `IconArrowBigUpFilled` to `IconArrowUp` in both:\n- `src/components/chat/ChatInput.tsx`\n- `src/components/tasks/QuickTaskInput.tsx`\n\nThis gives a cleaner, less chunky appearance to the arrow icons.","created_at":"2026-01-19T22:23:18Z"}]}
{"id":"rui-1ey","title":"Agent chat","description":"Send messages to running claude agent","status":"closed","priority":2,"issue_type":"epic","owner":"herb@devresults.com","created_at":"2026-01-18T20:14:21.571382+01:00","created_by":"Herb Caudill","updated_at":"2026-01-18T21:46:30.438327+01:00","closed_at":"2026-01-18T21:46:30.438327+01:00","close_reason":"Closed"}
{"id":"rui-1ey.1","title":"Create ChatInput component","description":"Text input for sending messages to running agent. Submit on Enter, clear after send.","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-18T20:15:12.491415+01:00","created_by":"Herb Caudill","updated_at":"2026-01-18T21:11:51.016229+01:00","closed_at":"2026-01-18T21:11:51.016229+01:00","close_reason":"Closed","dependencies":[{"issue_id":"rui-1ey.1","depends_on_id":"rui-1ey","type":"parent-child","created_at":"2026-01-18T20:15:12.491971+01:00","created_by":"Herb Caudill"}],"comments":[{"id":15,"issue_id":"rui-1ey.1","author":"Herb Caudill","text":"## Implementation Summary\n\nCreated the ChatInput component for sending messages to running agents.\n\n### Features\n- Text input with placeholder text (customizable)\n- Submit on Enter key (Shift+Enter allowed for future multiline support)\n- Auto-clear after successful send\n- Disabled state support\n- Send button with icon\n\n### Props\n- `onSubmit`: Callback with trimmed message\n- `placeholder`: Custom placeholder text\n- `disabled`: Disable input/button\n- `className`: Additional styling\n\n### Test Coverage (20 tests)\n- Rendering (placeholder, button, className)\n- Input behavior (value updates, clear after submit, ARIA labels)\n- Submit behavior (form submit, Enter key, Shift+Enter skip, empty/whitespace validation)\n- Disabled state handling\n- Styling verification\n\n### Files Added\n- `src/components/chat/ChatInput.tsx`\n- `src/components/chat/ChatInput.test.tsx`","created_at":"2026-01-18T20:11:47Z"}]}
{"id":"rui-1ey.2","title":"Wire up message sending","description":"Send chat messages via WebSocket to server, which pipes to ralph stdin. Show user messages in event stream. DEPENDS ON: r-loy (stdin commands in ralph)","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-18T20:15:13.585146+01:00","created_by":"Herb Caudill","updated_at":"2026-01-18T21:33:41.39491+01:00","closed_at":"2026-01-18T21:33:41.39491+01:00","close_reason":"Closed","dependencies":[{"issue_id":"rui-1ey.2","depends_on_id":"rui-1ey","type":"parent-child","created_at":"2026-01-18T20:15:13.585716+01:00","created_by":"Herb Caudill"},{"issue_id":"rui-1ey.2","depends_on_id":"rui-1ey.1","type":"blocks","created_at":"2026-01-18T20:15:48.867515+01:00","created_by":"Herb Caudill"}],"comments":[{"id":20,"issue_id":"rui-1ey.2","author":"Herb Caudill","text":"## Implementation Summary\n\n### Changes Made\n\n1. **Server-side WebSocket handler** (server/index.ts):\n   - Added `chat_message` message type handling\n   - Forwards user messages to ralph's stdin via RalphManager.send()\n   - Broadcasts `user_message` events to all connected clients so messages appear in the event stream\n   - Returns error if ralph is not running\n\n2. **New useRalphConnection hook** (src/hooks/useRalphConnection.ts):\n   - Wraps useWebSocket with ralph-specific message handling\n   - Provides `sendMessage()` function to send chat messages\n   - Handles all ralph server message types: ralph:event, ralph:status, ralph:output, ralph:error, ralph:exit, user_message\n   - Updates store state (events, ralphStatus, connectionStatus)\n   - Comprehensive test coverage (16 tests)\n\n3. **Updated App component** (src/App.tsx):\n   - AgentView now shows EventStream and ChatInput\n   - ChatInput is wired to sendMessage from useRalphConnection\n   - Input disabled when not connected or ralph not running\n   - Dynamic placeholder based on connection/ralph state\n\n4. **Enhanced EventStream** (src/components/events/EventStream.tsx):\n   - Added user_message event type with cyan color\n   - User messages displayed with \"You\" label and special styling (cyan background tint)\n   - Improved formatEventDetails for readable output/error/user_message display\n\n### Testing\n- All 367 unit tests pass\n- All 2 e2e tests pass\n- TypeScript compiles without errors","created_at":"2026-01-18T20:33:38Z"}]}
{"id":"rui-1k3","title":"With the exception of the Ralph logo, use tabler icons instead of one-off svgs.","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-19T19:41:19.26629+01:00","created_by":"Herb Caudill","updated_at":"2026-01-19T20:31:59.328793+01:00","closed_at":"2026-01-19T20:31:59.328793+01:00","close_reason":"Closed","comments":[{"id":77,"issue_id":"rui-1k3","author":"Herb Caudill","text":"Replaced all one-off SVGs and lucide-react icons with tabler icons:\n\n**Files updated:**\n- ControlBar.tsx - Replaced play/pause/stop icons with IconPlayerPlayFilled, IconPlayerPauseFilled, IconPlayerStopFilled, IconPlayerStop\n- StatusBar.tsx - Replaced git branch and clock icons with IconGitBranch, IconClock\n- ChatInput.tsx - Replaced arrow up icon with IconArrowUp\n- WorkspacePicker.tsx - Replaced folder, chevron, check, refresh icons with IconFolderFilled, IconChevronDown, IconCheck, IconRefresh\n- EventStream.tsx - Replaced chevron and loader icons with IconChevronDown, IconLoader\n- Header.tsx - Replaced lucide Sun/Moon/Monitor with IconSun, IconMoon, IconDeviceDesktop\n- TaskCard.tsx - Replaced lucide Circle/CircleDot/CheckCircle2/Ban/Clock with tabler equivalents\n- TaskDetailsDialog.tsx - Same status icon replacements as TaskCard\n- QuickTaskInput.tsx - Replaced Loader2 with IconLoader\n- TaskList.tsx - Replaced ChevronDown/Layers with IconChevronDown/IconStack2\n- dialog.tsx - Replaced X with IconX\n- select.tsx - Replaced Check/ChevronDown/ChevronUp with tabler equivalents\n- button.stories.tsx - Updated storybook examples to use tabler icons\n\n**Note:** The Ralph logo SVG in Header.tsx was intentionally kept as a custom brand element.\n\nAll tests pass.","created_at":"2026-01-19T19:31:54Z"}]}
{"id":"rui-26f","title":"when hovering over a task, show a popup with more details. It should be positioned such that the symbol and the title text are in the exact same position as when not hovered. Above the title text put metadata like task number and priority. Below it put the description etc. This would also have a button to open the task details in a dialog.","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-19T18:38:59.650557+01:00","created_by":"Herb Caudill","updated_at":"2026-01-19T23:35:28.242198+01:00","closed_at":"2026-01-19T23:35:28.242198+01:00","close_reason":"Closed","comments":[{"id":132,"issue_id":"rui-26f","author":"Herb Caudill","text":"## Changes Made\n\nImplemented task hover card feature that displays task details when hovering over a task in the sidebar.\n\n### New Components\n- **TaskHoverCard** (`src/components/tasks/TaskHoverCard.tsx`): Hover card component that wraps task cards and displays detailed information on hover\n- **HoverCard UI** (`src/components/ui/hover-card.tsx`): Base UI component using @radix-ui/react-hover-card\n\n### Features\n- Displays task ID and priority badge in header section\n- Shows status icon and title (styled to align with the underlying card)\n- Shows description (if present) with line clamping\n- Shows parent task ID (if present)\n- Includes \"Open details\" button to launch full task dialog\n- Priority badges are color-coded (P0-P4)\n- Supports closed task styling (line-through, reduced opacity)\n- Hover delay of 400ms to prevent accidental triggers\n\n### Files Changed\n- `src/components/tasks/TaskHoverCard.tsx` (new)\n- `src/components/tasks/TaskHoverCard.test.tsx` (new)\n- `src/components/tasks/TaskHoverCard.stories.tsx` (new)\n- `src/components/ui/hover-card.tsx` (new)\n- `src/components/tasks/TaskList.tsx` (updated to wrap TaskCard with TaskHoverCard)\n- `package.json` / `pnpm-lock.yaml` (added @radix-ui/react-hover-card dependency)\n\n### Testing\n- 24 unit tests for TaskHoverCard\n- All existing tests pass\n- Storybook stories for visual testing","created_at":"2026-01-19T22:35:24Z"}]}
{"id":"rui-28p","title":"CodeBlock component","description":"Syntax-highlighted code block component using Shiki with copy button in src/components/theme/CodeBlock.tsx","status":"open","priority":3,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-19T19:19:12.259181+01:00","created_by":"Herb Caudill","updated_at":"2026-01-19T19:19:12.259181+01:00","dependencies":[{"issue_id":"rui-28p","depends_on_id":"rui-bnb","type":"parent-child","created_at":"2026-01-19T19:19:36.315435+01:00","created_by":"Herb Caudill"},{"issue_id":"rui-28p","depends_on_id":"rui-4tm","type":"blocks","created_at":"2026-01-19T19:19:50.514322+01:00","created_by":"Herb Caudill"},{"issue_id":"rui-28p","depends_on_id":"rui-i3g","type":"blocks","created_at":"2026-01-19T19:19:50.635656+01:00","created_by":"Herb Caudill"}]}
{"id":"rui-29h","title":"Agent monitoring","description":"Real-time display of claude agent events and tool usage","status":"closed","priority":2,"issue_type":"epic","owner":"herb@devresults.com","created_at":"2026-01-18T20:14:20.587325+01:00","created_by":"Herb Caudill","updated_at":"2026-01-18T21:46:30.436707+01:00","closed_at":"2026-01-18T21:46:30.436707+01:00","close_reason":"Closed"}
{"id":"rui-29h.1","title":"Create EventStream component","description":"Scrollable container displaying real-time events from ralph. Auto-scroll to bottom, pause scroll on user interaction.","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-18T20:15:03.368117+01:00","created_by":"Herb Caudill","updated_at":"2026-01-18T21:00:12.210508+01:00","closed_at":"2026-01-18T21:00:12.210508+01:00","close_reason":"Closed","dependencies":[{"issue_id":"rui-29h.1","depends_on_id":"rui-29h","type":"parent-child","created_at":"2026-01-18T20:15:03.368718+01:00","created_by":"Herb Caudill"},{"issue_id":"rui-29h.1","depends_on_id":"rui-9dq.2","type":"blocks","created_at":"2026-01-18T20:15:47.002188+01:00","created_by":"Herb Caudill"},{"issue_id":"rui-29h.1","depends_on_id":"rui-9dq.3","type":"blocks","created_at":"2026-01-18T20:15:47.758887+01:00","created_by":"Herb Caudill"}],"comments":[{"id":11,"issue_id":"rui-29h.1","author":"Herb Caudill","text":"## Changes Made\n\nCreated the **EventStream** component at `src/components/events/EventStream.tsx`:\n\n### Features\n- **Real-time event display**: Shows events from the Zustand store with timestamps and color-coded event types\n- **Auto-scroll**: Automatically scrolls to bottom when new events arrive\n- **Smart scroll pause**: Auto-scroll pauses when user scrolls up, resumes when scrolling back to bottom\n- **Scroll to latest button**: Shows a \"Latest\" button when scrolled up, allowing quick return to bottom\n- **Event limiting**: `maxEvents` prop (default 1000) limits displayed events, removing older ones\n- **Accessible**: Uses `role=\"log\"` and `aria-live=\"polite\"` for screen readers\n\n### Event Type Styling\n- **Error events**: Red text\n- **Warning events**: Yellow text  \n- **Success/complete events**: Green text\n- **Tool events**: Blue text\n- **Text/message events**: Purple text\n\n### Tests\nAdded comprehensive tests covering:\n- Empty state display\n- Event rendering and formatting\n- Timestamp formatting (HH:MM:SS.mmm)\n- Event type color styling\n- Auto-scroll behavior\n- maxEvents limiting\n- Custom className support\n\n### Files\n- `src/components/events/EventStream.tsx` - Main component\n- `src/components/events/EventStream.test.tsx` - Tests (16 tests)\n- `src/components/events/index.ts` - Barrel export","created_at":"2026-01-18T20:00:08Z"}]}
{"id":"rui-29h.2","title":"Create ToolUseCard component","description":"Card component for displaying tool use events. Icons and formatting for: Read, Edit, Write, Bash, Grep, Glob, WebSearch, WebFetch, TodoWrite, Task.","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-18T20:15:04.292738+01:00","created_by":"Herb Caudill","updated_at":"2026-01-18T21:06:22.222399+01:00","closed_at":"2026-01-18T21:06:22.222399+01:00","close_reason":"Closed","dependencies":[{"issue_id":"rui-29h.2","depends_on_id":"rui-29h","type":"parent-child","created_at":"2026-01-18T20:15:04.293244+01:00","created_by":"Herb Caudill"}],"comments":[{"id":13,"issue_id":"rui-29h.2","author":"Herb Caudill","text":"## Summary\n\nCreated ToolUseCard component in `src/components/events/ToolUseCard.tsx` for displaying tool use events.\n\n### Features\n- **Tool-specific icons and colors**: Using lucide-react icons with color-coded styling for Read (blue), Edit (amber), Write (green), Bash (purple), Grep (cyan), Glob (teal), WebSearch (indigo), WebFetch (pink), TodoWrite (orange), Task (rose)\n- **Status indicators**: Animated pulse for running, green for success, red for error, gray for pending\n- **Smart summaries**: Shows file paths for Read/Edit/Write, command for Bash, pattern for Grep/Glob, query for WebSearch, URL for WebFetch, todo count for TodoWrite, description for Task\n- **Duration formatting**: Human-readable (ms, seconds, minutes)\n- **Expandable details**: Shows input JSON, output text, and error messages\n\n### Tests\n- 36 tests covering rendering, tool-specific icons/colors, status indicators, expand/collapse behavior, and accessibility\n\n### Exports\n- `ToolUseCard` component\n- `ToolUseCardProps`, `ToolUseEvent`, `ToolName` types","created_at":"2026-01-18T20:06:17Z"}]}
{"id":"rui-29h.3","title":"Create TextBlock component","description":"Display claude's text output with markdown rendering.","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-18T20:15:05.345821+01:00","created_by":"Herb Caudill","updated_at":"2026-01-18T21:09:36.689344+01:00","closed_at":"2026-01-18T21:09:36.689344+01:00","close_reason":"Closed","dependencies":[{"issue_id":"rui-29h.3","depends_on_id":"rui-29h","type":"parent-child","created_at":"2026-01-18T20:15:05.346321+01:00","created_by":"Herb Caudill"}],"comments":[{"id":14,"issue_id":"rui-29h.3","author":"Herb Caudill","text":"## Changes Made\n\nCreated the **TextBlock** component for displaying Claude's text output with full markdown rendering.\n\n### Features\n- Full markdown support via react-markdown and remark-gfm\n- Supports: bold, italic, inline code, code blocks, links, lists (ordered/unordered), headings, blockquotes\n- GitHub Flavored Markdown features: strikethrough, tables, task lists\n- Role-based styling (assistant=purple, user=green, system=amber)\n- Consistent visual style with ToolUseCard component\n- Timestamp display in HH:MM:SS.mmm format\n\n### Files\n- `src/components/events/TextBlock.tsx` - Main component\n- `src/components/events/TextBlock.test.tsx` - 25 comprehensive tests\n- `src/components/events/index.ts` - Added export\n\n### Dependencies Added\n- react-markdown@10.1.0\n- remark-gfm@4.0.1","created_at":"2026-01-18T20:09:32Z"}]}
{"id":"rui-29h.4","title":"Create ControlBar component","description":"Buttons for Start, Pause, Stop, Stop-after-current. Disable states based on ralph status. DEPENDS ON: r-zi3 (stop-after-current in ralph)","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-18T20:15:06.920467+01:00","created_by":"Herb Caudill","updated_at":"2026-01-18T21:45:25.023648+01:00","closed_at":"2026-01-18T21:45:25.023648+01:00","close_reason":"Closed","dependencies":[{"issue_id":"rui-29h.4","depends_on_id":"rui-29h","type":"parent-child","created_at":"2026-01-18T20:15:06.920981+01:00","created_by":"Herb Caudill"}],"comments":[{"id":22,"issue_id":"rui-29h.4","author":"Herb Caudill","text":"## Summary\n\nCreated ControlBar component for ralph process control with Start, Pause, Stop, and Stop-after-current buttons.\n\n### Component (`src/components/controls/ControlBar.tsx`)\n- **Start button**: Calls `/api/start` to launch the ralph process\n- **Stop button**: Calls `/api/stop` to gracefully stop ralph\n- **Pause button**: Placeholder - disabled until ralph supports pause\n- **Stop-after-current button**: Placeholder - disabled until ralph supports stop-after-current\n\n### Button State Logic\nButton states are determined by ralph status and connection status:\n- **Stopped**: Only Start enabled\n- **Starting**: All disabled (transitional state)\n- **Running**: Stop enabled; Pause and Stop-after-current pending ralph implementation\n- **Stopping**: All disabled (transitional state)\n- **Disconnected**: All buttons disabled\n\n### Features\n- Loading state during API calls\n- Error display for failed operations\n- Full accessibility with aria-labels and titles\n- Custom SVG icons for each action\n\n### Tests (`18 tests passing`)\n- Button rendering tests\n- Button state tests for all ralph statuses (stopped, starting, running, stopping)\n- Disconnected state handling\n- Start/Stop API integration tests\n- Error handling tests (API errors, network failures)","created_at":"2026-01-18T20:45:20Z"}]}
{"id":"rui-2f0","title":"Change the icon for the add task button to an up arrow. use arrow-big-up-filled. (send message should use the same icon)","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-19T20:21:24.4695+01:00","created_by":"Herb Caudill","updated_at":"2026-01-19T21:14:16.326664+01:00","closed_at":"2026-01-19T21:14:16.326664+01:00","close_reason":"Closed","comments":[{"id":90,"issue_id":"rui-2f0","author":"Herb Caudill","text":"Changed the icon for both the add task button (QuickTaskInput) and send message button (ChatInput) to use `IconArrowBigUpFilled` from tabler icons. Both buttons now consistently use the same filled up-arrow icon (size-5).","created_at":"2026-01-19T20:14:12Z"}]}
{"id":"rui-2nn","title":"in the status bar where we show the repo name, add the branch name as well","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-19T20:30:43.118934+01:00","created_by":"Herb Caudill","updated_at":"2026-01-19T21:20:59.562637+01:00","closed_at":"2026-01-19T21:20:59.562637+01:00","close_reason":"Closed","comments":[{"id":92,"issue_id":"rui-2nn","author":"Herb Caudill","text":"## Changes Made\n\nAdded git branch display to the status bar next to the repo name.\n\n### Server Changes\n- Added `getGitBranch()` function to `server/index.ts` that uses `git rev-parse --abbrev-ref HEAD` to get the current branch name\n- Updated `/api/workspace` endpoint to return the branch in the response\n- Updated `/api/workspace/switch` endpoint to also return the branch\n- Added unit tests for `getGitBranch()` in `server/gitBranch.test.ts`\n\n### Client Changes\n- Updated `WorkspaceInfo` interface to include optional `branch` field\n- Updated `WorkspacePicker` to store the branch in the app store when fetching workspace info or switching workspaces\n- The existing `RepoBranch` component in `StatusBar` already had code to display the branch, it just needed the data\n\nThe status bar now shows the repo name and branch in the format: `repo-name / branch-name`","created_at":"2026-01-19T20:20:55Z"}]}
{"id":"rui-3lj","title":"Store event log per iteration; display via URL (#eventlog={id}); auto-link when closing task","status":"closed","priority":1,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-19T21:47:22.191799+01:00","created_by":"Herb Caudill","updated_at":"2026-01-20T02:15:09.608666+01:00","closed_at":"2026-01-20T02:15:09.608666+01:00","close_reason":"Closed","comments":[{"id":111,"issue_id":"rui-3lj","author":"Herb Caudill","text":"Broke this issue into 4 sub-tasks:\n- rui-3lj.1: Add backend API for event log storage (POST/GET /api/eventlogs)\n- rui-3lj.2: Add URL hash routing for event log viewing (#eventlog={id})\n- rui-3lj.3: Create EventLogViewer component for right panel\n- rui-3lj.4: Integrate event log capture into task closing workflow\n\nThese should be completed in order as each depends on the previous ones.","created_at":"2026-01-19T21:14:24Z"},{"id":140,"issue_id":"rui-3lj","author":"Herb Caudill","text":"## Summary\n\nAll 4 child tasks have been completed, implementing the full event log feature:\n\n1. **rui-3lj.1**: Backend API for event log storage - `POST/GET /api/eventlogs` endpoints with file-based storage in `~/.ralph-ui/eventlogs/`\n2. **rui-3lj.2**: URL hash routing - `#eventlog={id}` support with `useEventLogRouter` hook for navigation and state management\n3. **rui-3lj.3**: EventLogViewer component - Right panel display with metadata, event rendering, copy link, and close functionality  \n4. **rui-3lj.4**: Task closing integration - Automatically captures event log when closing a task and adds closing comment with event log link\n\nThe feature allows:\n- Viewing stored event logs via URL hash navigation\n- Automatic capture of event logs when tasks are closed\n- Sharing event log links via the UI\n- Viewing event history with metadata (created date, task ID, title)","created_at":"2026-01-20T01:15:05Z"}]}
{"id":"rui-3lj.1","title":"Add backend API for event log storage (POST/GET /api/eventlogs)","description":"Create API endpoints to store and retrieve event logs. POST /api/eventlogs to save current events with metadata. GET /api/eventlogs/{id} to retrieve stored logs.","status":"closed","priority":1,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-19T22:14:14.982203+01:00","created_by":"Herb Caudill","updated_at":"2026-01-19T22:19:24.293108+01:00","closed_at":"2026-01-19T22:19:24.293108+01:00","close_reason":"Closed","dependencies":[{"issue_id":"rui-3lj.1","depends_on_id":"rui-3lj","type":"parent-child","created_at":"2026-01-19T22:14:14.982852+01:00","created_by":"Herb Caudill"}],"comments":[{"id":112,"issue_id":"rui-3lj.1","author":"Herb Caudill","text":"Implemented event log storage backend:\n\n**Changes Made:**\n- Created `server/EventLogStore.ts` module for file-based storage in `~/.ralph-ui/eventlogs/`\n- Added API endpoints:\n  - `POST /api/eventlogs` - Create event logs with events and optional metadata\n  - `GET /api/eventlogs/:id` - Retrieve event log by ID\n  - `GET /api/eventlogs` - List all event log summaries\n\n**Storage Details:**\n- Event logs stored as JSON files with 8-character hex IDs\n- Supports metadata (taskId, title, source, workspacePath)\n- List endpoint returns summaries (id, createdAt, eventCount, metadata) without full event data\n\n**Testing:**\n- 16 tests added covering store methods and API endpoints","created_at":"2026-01-19T21:19:20Z"}]}
{"id":"rui-3lj.2","title":"Add URL hash routing for event log viewing (#eventlog={id})","description":"Add URL hash parameter parsing in App.tsx to support #eventlog={id} format. Navigate and update URL when event log is opened. Restore UI state from URL on mount.","status":"closed","priority":1,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-19T22:14:15.772189+01:00","created_by":"Herb Caudill","updated_at":"2026-01-19T23:07:49.008056+01:00","closed_at":"2026-01-19T23:07:49.008056+01:00","close_reason":"Closed","dependencies":[{"issue_id":"rui-3lj.2","depends_on_id":"rui-3lj","type":"parent-child","created_at":"2026-01-19T22:14:15.7728+01:00","created_by":"Herb Caudill"}],"comments":[{"id":122,"issue_id":"rui-3lj.2","author":"Herb Caudill","text":"## Changes Made\n\n- **Exported useEventLogRouter hook** from `src/hooks/index.ts` along with helper utilities `parseEventLogHash` and `buildEventLogHash`\n- **Integrated useEventLogRouter in App.tsx** to handle URL hash routing for event log viewing\n- **Added comprehensive tests** (16 tests) covering:\n  - `parseEventLogHash`: validates hash format, handles empty/invalid/valid hashes\n  - `buildEventLogHash`: builds correct hash strings\n  - `useEventLogRouter` hook: navigation, hash parsing on mount, hashchange events, loading states, error handling\n\nThe hook was already implemented in `src/hooks/useEventLogRouter.ts`. This task wired it up in the app and added tests for verification.\n\n### How it works\n- When the app loads with `#eventlog=abcdef12` in the URL, the hook fetches the event log data\n- `navigateToEventLog(id)` updates the URL hash and triggers a fetch\n- `closeEventLogViewer()` clears the hash and store state\n- Hashchange events are listened to for browser navigation\n\nCommit: 36735a0","created_at":"2026-01-19T22:07:45Z"}]}
{"id":"rui-3lj.3","title":"Create EventLogViewer component for right panel","description":"Create a component to display event logs in the right panel. Reuse EventStream component for rendering. Include metadata display (created_at, task_id if available).","status":"closed","priority":1,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-19T22:14:16.628602+01:00","created_by":"Herb Caudill","updated_at":"2026-01-19T23:13:24.908432+01:00","closed_at":"2026-01-19T23:13:24.908432+01:00","close_reason":"Closed","dependencies":[{"issue_id":"rui-3lj.3","depends_on_id":"rui-3lj","type":"parent-child","created_at":"2026-01-19T22:14:16.629219+01:00","created_by":"Herb Caudill"}],"comments":[{"id":123,"issue_id":"rui-3lj.3","author":"Herb Caudill","text":"Created EventLogViewer component that displays stored event logs in the right panel:\n\n**New files:**\n- `src/components/events/EventLogViewer.tsx`: Main component that displays event logs\n- `src/components/events/EventLogViewer.test.tsx`: Test suite with 20 tests\n\n**Key features:**\n- Reuses event rendering from EventStream (UserMessage, AssistantText, ToolUseCard)\n- Displays metadata section with created date, task ID (if available), and title\n- Shows loading state with spinner while fetching event log\n- Shows error state with clear error messages\n- Copy link button to share event log URL\n- Scroll-to-bottom button when viewing long logs\n- Close button to dismiss the viewer and clear URL hash\n\n**Changes to existing files:**\n- `src/App.tsx`: Updated to show EventLogViewer in right panel when `viewingEventLogId` is set\n- `src/components/events/index.ts`: Added EventLogViewer export\n\n**Testing:**\n- All 20 new tests pass\n- All existing tests pass (excluding pre-existing failure in systemPrompt.test.ts)","created_at":"2026-01-19T22:13:20Z"}]}
{"id":"rui-3lj.4","title":"Integrate event log capture into task closing workflow","description":"Modify TaskDetailsDialog to capture and store event log when closing a task. Add closing comment with event log link. Format: 'Closed. Event log: #eventlog={id}'","status":"closed","priority":1,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-19T22:14:18.138884+01:00","created_by":"Herb Caudill","updated_at":"2026-01-19T23:21:29.237086+01:00","closed_at":"2026-01-19T23:21:29.237086+01:00","close_reason":"Closed","dependencies":[{"issue_id":"rui-3lj.4","depends_on_id":"rui-3lj","type":"parent-child","created_at":"2026-01-19T22:14:18.139528+01:00","created_by":"Herb Caudill"}],"comments":[{"id":127,"issue_id":"rui-3lj.4","author":"Herb Caudill","text":"## Changes Made\n\nIntegrated event log capture into the task closing workflow:\n\n### Backend Changes\n- Added `BdProxy.addComment(id, comment)` method to add comments to issues via `bd comments add` command\n- Added `POST /api/tasks/:id/comments` endpoint to expose comment functionality via the API\n\n### Frontend Changes  \n- Modified `TaskDetailsDialog` to detect when a task is being closed (status changed from non-closed to closed)\n- When closing: captures current events from the store, saves them via `POST /api/eventlogs`, then adds a closing comment with the format `Closed. Event log: #eventlog={id}`\n- The event log is only saved if there are events to capture\n\n### Tests Added\n- BdProxy.addComment() tests: verifies command arguments and error handling\n- TaskDetailsDialog tests: verifies event log is not saved when task is already closed\n\nThe closing comment now contains a clickable link that allows viewing the event log that was active when the task was closed.","created_at":"2026-01-19T22:21:25Z"}]}
{"id":"rui-3ly","title":"Start Ralph in watch mode on workspace switch","status":"closed","priority":2,"issue_type":"feature","owner":"herb@devresults.com","created_at":"2026-01-18T23:34:16.983656+01:00","created_by":"Herb Caudill","updated_at":"2026-01-18T23:50:43.155691+01:00","closed_at":"2026-01-18T23:50:43.155691+01:00","close_reason":"Closed","comments":[{"id":32,"issue_id":"rui-3ly","author":"Herb Caudill","text":"## Changes Made\n\n- Added `watch` option to `RalphManagerOptions` interface in `RalphManager.ts`\n- Updated `RalphManager.start()` to include `--watch` flag when watch option is enabled\n- Modified `switchWorkspace()` in `server/index.ts` to:\n  - Stop any currently running Ralph instance\n  - Create a new RalphManager with watch mode enabled for the new workspace\n  - Auto-start Ralph in watch mode\n- Added tests for the new watch mode functionality\n\nThis allows Ralph to continuously monitor for new issues after processing existing ones when switching workspaces.","created_at":"2026-01-18T22:50:39Z"}]}
{"id":"rui-3u4","title":"are we showing glob results? They always display like this: \n\n\nGlob src/hooks/useTheme*\n└\n\nwith nothing attached\n\nGlob src/hooks/useTheme*\n└\n\nwith nothing","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-19T20:13:36.429838+01:00","created_by":"Herb Caudill","updated_at":"2026-01-19T20:56:20.447694+01:00","closed_at":"2026-01-19T20:56:20.447694+01:00","close_reason":"Closed","comments":[{"id":83,"issue_id":"rui-3u4","author":"Herb Caudill","text":"Fixed the issue where Glob and Grep results were not displaying in the tool cards. \n\n**Root cause:** The `ToolUseCard` component had handlers for Bash, Read, and Edit output, but no handler for generic output from tools like Glob, Grep, WebSearch, and WebFetch. The `hasExpandableContent` check returned true when output existed, but no code actually rendered that output.\n\n**Solution:** Added a generic output handler that displays output for any tool that has output but isn't already specifically handled. The output uses the same expandable preview behavior as Bash commands (showing first 5 lines with a \"... +N lines\" indicator that expands on click).\n\n**Changes:**\n- `src/components/events/ToolUseCard.tsx`: Added generic output handler for Glob, Grep, WebSearch, WebFetch, etc.\n- `src/components/events/ToolUseCard.test.tsx`: Added tests for Glob and Grep output display, including the expand/collapse behavior\n\n**Tests:** All 557 tests pass, including 3 new tests for Glob/Grep output.","created_at":"2026-01-19T19:56:16Z"}]}
{"id":"rui-40w","title":"in the sidebar, tasks that belong to an epic should be shown grouped under that epic","status":"closed","priority":1,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-19T21:05:37.790164+01:00","created_by":"Herb Caudill","updated_at":"2026-01-19T22:35:51.844488+01:00","closed_at":"2026-01-19T22:35:51.844488+01:00","close_reason":"Closed","comments":[{"id":118,"issue_id":"rui-40w","author":"Herb Caudill","text":"This feature was already implemented. The TaskList component already supports grouping tasks under their parent epics:\n\n- Tasks are first grouped by status (Ready, In Progress, Blocked, Closed)\n- Within each status group, tasks are sub-grouped by their parent epic\n- Each epic sub-group has a collapsible header showing the epic ID, title, and task count\n- Tasks without an epic parent are shown at the end of each status group\n- Epic sub-groups are sorted by epic priority\n- Collapsed state is persisted to localStorage\n\nThe implementation includes:\n- `EpicGroupHeader` component for rendering collapsible epic headers\n- Logic in `TaskList` to build `EpicSubGroup` structures within each status group\n- Tests covering all epic grouping functionality (see 'epic grouping within status' describe block)\n\nNo changes needed - closing as already implemented.","created_at":"2026-01-19T21:35:47Z"}]}
{"id":"rui-42g","title":"Spinner improvements: only include topology-star-* icons (6 total, not topology-ring-*), and make it a tiny bit smaller","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-19T21:53:47.519337+01:00","created_by":"Herb Caudill","updated_at":"2026-01-19T23:27:56.978228+01:00","closed_at":"2026-01-19T23:27:56.978228+01:00","close_reason":"Closed","comments":[{"id":130,"issue_id":"rui-42g","author":"Herb Caudill","text":"## Changes Made\n\n- Replaced `IconTopologyRing`, `IconTopologyRing2`, and `IconTopologyRing3` with `IconTopologyStarRing`, `IconTopologyStarRing2`, and `IconTopologyStarRing3` to use only star-themed topology icons\n- Reduced spinner default size from `size-5` (20px) to `size-4` (16px) for better visual proportion\n\nThe spinner now cycles through 6 star topology icons:\n1. IconTopologyStar\n2. IconTopologyStar2\n3. IconTopologyStar3\n4. IconTopologyStarRing\n5. IconTopologyStarRing2\n6. IconTopologyStarRing3","created_at":"2026-01-19T22:27:53Z"}]}
{"id":"rui-443","title":"add a hotkey for changing theme","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-19T19:13:05.636677+01:00","created_by":"Herb Caudill","updated_at":"2026-01-19T20:14:32.517069+01:00","closed_at":"2026-01-19T20:14:32.517069+01:00","close_reason":"Closed","comments":[{"id":74,"issue_id":"rui-443","author":"Herb Caudill","text":"Added Cmd+Shift+T hotkey to cycle through themes (system → light → dark).\n\n**Changes:**\n- Added `cycleTheme` hotkey config to `hotkeys.json` with Cmd+Shift+T binding\n- Added `cycleTheme` to `HotkeyAction` type in `config/index.ts`\n- Wired up handler in `App.tsx` that calls `cycleTheme()` from the `useTheme` hook\n- Added `cycleTheme` to `allowedInInput` list so it works even when typing\n- Added tests for the new hotkey including input element handling","created_at":"2026-01-19T19:14:28Z"}]}
{"id":"rui-44v","title":"Change the \"Add a task...\" placeholder to \"Tell Ralph what you want to do\"","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-19T20:17:22.359819+01:00","created_by":"Herb Caudill","updated_at":"2026-01-19T21:05:40.408011+01:00","closed_at":"2026-01-19T21:05:40.408011+01:00","close_reason":"Closed","comments":[{"id":86,"issue_id":"rui-44v","author":"Herb Caudill","text":"Changed the default placeholder text in QuickTaskInput component from \"Add a task...\" to \"Tell Ralph what you want to do\". Updated both the JSDoc comment and the default parameter value.","created_at":"2026-01-19T20:05:36Z"}]}
{"id":"rui-48s","title":"when task ids appear in the event log, make them links to edit that task","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-19T18:59:19.333091+01:00","created_by":"Herb Caudill","updated_at":"2026-01-19T21:47:58.874162+01:00","closed_at":"2026-01-19T21:47:58.874162+01:00","close_reason":"Closed","comments":[{"id":100,"issue_id":"rui-48s","author":"Herb Caudill","text":"## Changes Made\n\nImplemented clickable task ID links in the event log. When task IDs (e.g., `rui-48s`) appear in the event stream, they are now converted to clickable links that open the task details dialog.\n\n### Components Added\n- **TaskIdLink** (`src/components/ui/TaskIdLink.tsx`): Component that parses text for task IDs and renders them as clickable buttons. Uses regex pattern `\\b([a-z]+-[a-z0-9]+)\\b` to match task IDs.\n- **TaskDialogContext** (`src/contexts/TaskDialogContext.tsx`): React context that provides the `openTaskById` function throughout the component tree.\n\n### Components Modified\n- **App.tsx**: Wrapped the app with `TaskDialogProvider` to make task dialog access available.\n- **AssistantText.tsx**: Added custom markdown components to process text in paragraphs, lists, emphasis, and inline code for task IDs.\n- **ToolUseCard.tsx**: Added TaskIdLink to tool summaries (bash commands) and tool outputs (bash output, grep results).\n\n### Tests Added\n- Unit tests for TaskIdLink (13 tests)\n- Unit tests for TaskDialogContext (4 tests)\n\nAll 604 tests passing.","created_at":"2026-01-19T20:47:55Z"}]}
{"id":"rui-4n6","title":"the status bar and the 'Start Ralph to send messages' placeholder are flickering around once a second","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-19T01:30:48.305646+01:00","updated_at":"2026-01-19T01:43:21.027778+01:00","closed_at":"2026-01-19T01:43:21.027778+01:00","close_reason":"Closed","comments":[{"id":35,"issue_id":"rui-4n6","author":"Herb Caudill","text":"## Changes Made\n\nFixed two issues in `useRalphConnection.ts` that could contribute to UI flickering:\n\n### 1. Reduced redundant status updates\n- Previously, the `useEffect` was syncing ALL connection status changes to the store\n- But the `handleConnect` and `handleDisconnect` callbacks were ALSO setting status\n- This caused duplicate store updates for 'connected' and 'disconnected' states\n- Changed the `useEffect` to only sync the 'connecting' status, since callbacks handle the other states\n\n### 2. Added missing 'paused' status\n- The validation array for ralph status was missing 'paused'\n- Added it to match the `RalphStatus` type definition in the store\n\n### Investigation Notes\nThe 'once a second' flickering is most likely caused by the websocket reconnect loop when the server isn't running or is unstable (reconnect delay is 1000ms). This is expected behavior - when the backend server is not running, the websocket will cycle between 'connecting' and 'disconnected' states every second. The changes above reduce unnecessary re-renders but won't prevent the status indicator from updating when actual connection state changes occur.","created_at":"2026-01-19T00:43:17Z"}]}
{"id":"rui-4p3","title":"Add stop-after-current support","description":"Enable stop-after-current button and implement handleStopAfterCurrent when ralph CLI supports it. Currently the button is always disabled. Locations: ControlBar.tsx getButtonStates(), handleStopAfterCurrent(), and App.tsx handleAgentStopAfterCurrent().","status":"closed","priority":2,"issue_type":"feature","owner":"herb@devresults.com","created_at":"2026-01-18T23:05:25.375056+01:00","created_by":"Herb Caudill","updated_at":"2026-01-19T01:48:06.338161+01:00","closed_at":"2026-01-19T01:48:06.338161+01:00","close_reason":"Closed","comments":[{"id":36,"issue_id":"rui-4p3","author":"Herb Caudill","text":"## Changes Made\n\nImplemented stop-after-current support for the Ralph agent:\n\n### Server (RalphManager)\n- Added `stopAfterCurrent()` method that sends a `{ type: 'stop_after_current' }` message to Ralph via stdin\n- Added `cancelStopAfterCurrent()` method to cancel a pending stop-after-current request\n- Added new `stopping_after_current` status to track this state\n\n### API Endpoints\n- Added `POST /api/stop-after-current` endpoint\n- Added `POST /api/cancel-stop-after-current` endpoint\n\n### UI (ControlBar)\n- Enabled stop-after-current button when Ralph is running or paused\n- Button toggles to 'Cancel stop after current' when in stopping_after_current state\n- Button uses 'default' variant when active to show it's toggled\n\n### StatusBar\n- Added 'Stopping after task' label with yellow indicator for stopping_after_current status\n\n### Store\n- Extended `RalphStatus` type to include `stopping_after_current`\n\n### Tests\n- Added 9 new tests for RalphManager (stopAfterCurrent, cancelStopAfterCurrent)\n- Added 8 new tests for ControlBar (button states and actions)\n\nAll 466 tests pass.","created_at":"2026-01-19T00:48:02Z"}]}
{"id":"rui-4rt","title":"Task management","description":"View, create, and edit beads tasks from the UI","status":"closed","priority":2,"issue_type":"epic","owner":"herb@devresults.com","created_at":"2026-01-18T20:14:22.605516+01:00","created_by":"Herb Caudill","updated_at":"2026-01-18T21:46:30.440348+01:00","closed_at":"2026-01-18T21:46:30.440348+01:00","close_reason":"Closed"}
{"id":"rui-4rt.1","title":"Create BdProxy class","description":"Server-side class to spawn bd commands and parse JSON output. Methods for: list, create, update, show.","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-18T20:15:24.764011+01:00","created_by":"Herb Caudill","updated_at":"2026-01-18T21:03:19.603584+01:00","closed_at":"2026-01-18T21:03:19.603584+01:00","close_reason":"Closed","dependencies":[{"issue_id":"rui-4rt.1","depends_on_id":"rui-4rt","type":"parent-child","created_at":"2026-01-18T20:15:24.764595+01:00","created_by":"Herb Caudill"}],"comments":[{"id":12,"issue_id":"rui-4rt.1","author":"Herb Caudill","text":"## Summary\n\nCreated `BdProxy` class in `server/BdProxy.ts` - a server-side proxy to spawn `bd` commands and parse JSON output.\n\n### Features\n- **list()**: List issues with filters (limit, status, priority, type, assignee, parent, ready, all)\n- **show()**: Show details for one or more issues by ID\n- **create()**: Create new issues with title, description, priority, type, assignee, parent, labels\n- **update()**: Update issues with any field including add/remove labels\n- **close()**: Close one or more issues\n\n### Implementation\n- Spawns `bd` process with `--json` flag for structured output\n- Configurable command, cwd, env, and timeout (default 30s)\n- Injectable spawn function for testing\n- Promise-based API with proper error handling and timeout support\n\n### Tests\n- 34 tests covering all methods and options\n- Mock process testing pattern matching RalphManager style\n- Tests for custom options (command, cwd, env, timeout)","created_at":"2026-01-18T20:03:15Z"}]}
{"id":"rui-4rt.2","title":"Create TaskSidebar component","description":"Sidebar container with quick task input at top and task list below.","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-18T20:15:25.57788+01:00","created_by":"Herb Caudill","updated_at":"2026-01-18T21:14:21.785536+01:00","closed_at":"2026-01-18T21:14:21.785536+01:00","close_reason":"Closed","dependencies":[{"issue_id":"rui-4rt.2","depends_on_id":"rui-4rt","type":"parent-child","created_at":"2026-01-18T20:15:25.57847+01:00","created_by":"Herb Caudill"},{"issue_id":"rui-4rt.2","depends_on_id":"rui-4rt.1","type":"blocks","created_at":"2026-01-18T20:15:49.847213+01:00","created_by":"Herb Caudill"}],"comments":[{"id":16,"issue_id":"rui-4rt.2","author":"Herb Caudill","text":"## Completed\n\nCreated `TaskSidebar` component with:\n- Header with task icon and \"Tasks\" title\n- Slot for `quickInput` component (rendered below header)\n- Slot for `taskList` component (scrollable area)\n- Empty state message when no tasks\n- Proper accessibility (`complementary` role, aria-label)\n- Full test coverage (15 tests)\n\nFiles added:\n- `src/components/tasks/TaskSidebar.tsx`\n- `src/components/tasks/TaskSidebar.test.tsx`\n- `src/components/tasks/index.ts`\n\nThe component is designed to accept `QuickTaskInput` and `TaskList` components as props once those are implemented.","created_at":"2026-01-18T20:14:18Z"}]}
{"id":"rui-4rt.3","title":"Create QuickTaskInput component","description":"Text input for quickly adding tasks. Submit on Enter, calls bd create.","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-18T20:15:26.45014+01:00","created_by":"Herb Caudill","updated_at":"2026-01-18T21:28:46.064553+01:00","closed_at":"2026-01-18T21:28:46.064553+01:00","close_reason":"Closed","dependencies":[{"issue_id":"rui-4rt.3","depends_on_id":"rui-4rt","type":"parent-child","created_at":"2026-01-18T20:15:26.450688+01:00","created_by":"Herb Caudill"}],"comments":[{"id":19,"issue_id":"rui-4rt.3","author":"Herb Caudill","text":"## Summary\n\nCreated QuickTaskInput component for quick task creation:\n\n### Component (`src/components/tasks/QuickTaskInput.tsx`)\n- Text input with submit button (Plus icon)\n- Submits on Enter key press\n- Trims whitespace from title before submission\n- Shows loading spinner during submission\n- Disables input/button while submitting to prevent double submission\n- Clears input after successful submission\n- Preserves input on error for retry\n- Full accessibility support (aria-labels)\n\n### Server API (`server/index.ts`)\n- Added `POST /api/tasks` endpoint\n- Creates tasks via BdProxy.create()\n- Validates title is required\n- Supports optional parameters: description, priority, type, assignee, parent, labels\n- Returns created issue data on success\n\n### Tests (`23 tests passing`)\n- Rendering tests (input, button, disabled state, custom placeholder/className)\n- Input behavior tests (value updates, button enable/disable)\n- Form submission tests (Enter key, button click, API call format, whitespace trimming)\n- Loading state tests (spinner display, double-submit prevention)\n- Error handling tests (API errors, network errors, input preservation)\n- Accessibility tests (labels, button states)","created_at":"2026-01-18T20:28:42Z"}]}
{"id":"rui-4rt.4","title":"Create TaskList component","description":"List tasks grouped by status: Ready, In Progress, Blocked. Collapsible groups with counts.","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-18T20:15:27.291533+01:00","created_by":"Herb Caudill","updated_at":"2026-01-18T21:24:37.188298+01:00","closed_at":"2026-01-18T21:24:37.188298+01:00","close_reason":"Closed","dependencies":[{"issue_id":"rui-4rt.4","depends_on_id":"rui-4rt","type":"parent-child","created_at":"2026-01-18T20:15:27.292096+01:00","created_by":"Herb Caudill"},{"issue_id":"rui-4rt.4","depends_on_id":"rui-4rt.1","type":"blocks","created_at":"2026-01-18T20:15:50.689878+01:00","created_by":"Herb Caudill"}],"comments":[{"id":18,"issue_id":"rui-4rt.4","author":"Herb Caudill","text":"## Summary\n\nCreated the TaskList component that displays tasks grouped by status.\n\n### Changes\n- **TaskList.tsx**: New component with:\n  - Groups tasks into 4 categories: Ready (open), In Progress, Blocked, Other (deferred/closed)\n  - Collapsible group headers with task counts\n  - Priority-based sorting within groups (lower number = higher priority)\n  - Callbacks for status changes and task clicks\n  - \"Other\" group collapsed by default\n  - Empty state handling with configurable `showEmptyGroups` prop\n  - Full keyboard accessibility (Enter/Space to toggle groups)\n\n- **TaskList.test.tsx**: 31 unit tests covering:\n  - Rendering and grouping logic\n  - Empty state handling\n  - Collapse/expand functionality\n  - Priority sorting\n  - Callback propagation\n  - Accessibility requirements\n\n- **index.ts**: Exported TaskList, TaskListProps, and TaskGroup types\n\n### Integration\nTaskList is designed to be used as the `taskList` prop of TaskSidebar component.","created_at":"2026-01-18T20:24:31Z"}]}
{"id":"rui-4rt.5","title":"Create TaskCard component","description":"Display individual task with ID, title. Click to expand/edit. Inline status change.","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-18T20:15:28.537772+01:00","created_by":"Herb Caudill","updated_at":"2026-01-18T21:20:09.483124+01:00","closed_at":"2026-01-18T21:20:09.483124+01:00","close_reason":"Closed","dependencies":[{"issue_id":"rui-4rt.5","depends_on_id":"rui-4rt","type":"parent-child","created_at":"2026-01-18T20:15:28.538319+01:00","created_by":"Herb Caudill"}],"comments":[{"id":17,"issue_id":"rui-4rt.5","author":"Herb Caudill","text":"Created TaskCard component with:\n\n- Status icon display for all 5 statuses (open, in_progress, blocked, deferred, closed)\n- Task ID and title with priority badge (P0-P4) when provided\n- Expandable details section showing description, issue type, and parent info\n- Inline status change dropdown menu with full keyboard accessibility\n- Visual treatment for closed tasks (opacity + strikethrough)\n- 36 comprehensive unit tests covering all functionality\n\nComponent is exported from tasks index and ready for use in TaskList.","created_at":"2026-01-18T20:20:05Z"}]}
{"id":"rui-4rt.6","title":"Create WorkspacePicker component","description":"Dropdown to switch between bd databases/workspaces. Shows current workspace in header.","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-18T20:15:29.313724+01:00","created_by":"Herb Caudill","updated_at":"2026-01-18T21:41:11.784992+01:00","closed_at":"2026-01-18T21:41:11.784992+01:00","close_reason":"Closed","dependencies":[{"issue_id":"rui-4rt.6","depends_on_id":"rui-4rt","type":"parent-child","created_at":"2026-01-18T20:15:29.314289+01:00","created_by":"Herb Caudill"}],"comments":[{"id":21,"issue_id":"rui-4rt.6","author":"Herb Caudill","text":"## Changes Made\n\n### Server-side\n- Added `BdProxy.getInfo()` method that calls `bd info --json` to fetch workspace information\n- Added `/api/workspace` GET endpoint that returns:\n  - `path`: Full workspace path (derived from database path)\n  - `name`: Workspace folder name\n  - `issueCount`: Number of issues in the workspace\n  - `daemonConnected`: Whether bd daemon is connected\n  - `daemonStatus`: Daemon health status\n\n### Client-side\n- Extracted `WorkspacePicker` from `Header.tsx` into its own file `WorkspacePicker.tsx`\n- Component now fetches real workspace data from the server on mount\n- Shows workspace name with issue count badge\n- Dropdown displays full path, issue count, and daemon connection status\n- Includes refresh button to refetch workspace info\n- \"Open workspace...\" button placeholder for future workspace selection\n\n### Tests\n- Added `BdProxy.getInfo()` tests to verify correct CLI arguments and response parsing\n- Added comprehensive `WorkspacePicker` component tests (14 tests)\n- Updated `Header`, `MainLayout`, and `App` tests to mock fetch for WorkspacePicker\n\n### Exports\n- Added `WorkspacePicker`, `WorkspacePickerProps`, and `WorkspaceInfo` exports to layout index","created_at":"2026-01-18T20:41:08Z"}]}
{"id":"rui-4tm","title":"Shiki highlighter setup","description":"Create lazy-initialized Shiki singleton with loadTheme() and highlight() wrapper in src/lib/theme/highlighter.ts","status":"open","priority":3,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-19T19:19:01.78421+01:00","created_by":"Herb Caudill","updated_at":"2026-01-19T19:19:01.78421+01:00","dependencies":[{"issue_id":"rui-4tm","depends_on_id":"rui-bnb","type":"parent-child","created_at":"2026-01-19T19:19:36.31433+01:00","created_by":"Herb Caudill"},{"issue_id":"rui-4tm","depends_on_id":"rui-tzz","type":"blocks","created_at":"2026-01-19T19:19:48.630711+01:00","created_by":"Herb Caudill"}]}
{"id":"rui-4uq","title":"cmd+/ opens up a list of hotkeys","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-19T19:01:26.202265+01:00","created_by":"Herb Caudill","updated_at":"2026-01-19T20:54:03.991257+01:00","closed_at":"2026-01-19T20:54:03.991257+01:00","close_reason":"Closed","comments":[{"id":82,"issue_id":"rui-4uq","author":"Herb Caudill","text":"## Summary\n\nAdded a keyboard shortcuts dialog accessible via `cmd+/` that displays all available hotkeys organized by category:\n\n### Changes\n- Created `HotkeysDialog` component with categorized hotkey display (Agent Control, Navigation, Appearance, Help)\n- Added `showHotkeys` hotkey action mapped to `cmd+/`\n- Moved the `agentPause` hotkey from `cmd+/` to `cmd+shift+p` to free up the slash key\n- Added tests for the HotkeysDialog component\n\n### Files Modified\n- `src/components/layout/HotkeysDialog.tsx` (new)\n- `src/components/layout/HotkeysDialog.test.tsx` (new)\n- `src/components/layout/index.ts`\n- `src/config/hotkeys.json`\n- `src/config/index.ts`\n- `src/hooks/useHotkeys.ts`\n- `src/App.tsx`","created_at":"2026-01-19T19:54:00Z"}]}
{"id":"rui-4vp","title":"Add a third pane for task management conversations with Claude - a side conversation about tasks like creating, updating, and organizing issues","status":"closed","priority":1,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-19T18:50:44.854643+01:00","created_by":"Herb Caudill","updated_at":"2026-01-19T23:04:02.598446+01:00","closed_at":"2026-01-19T23:04:02.598446+01:00","close_reason":"Closed","comments":[{"id":106,"issue_id":"rui-4vp","author":"Herb Caudill","text":"This chat will need a system prompt. Make a default prompt (stored in a markdown file) but also copy it to the .ralph folder and commit it so that it can be adjusted on a per-repo basis.","created_at":"2026-01-19T21:02:47Z"},{"id":108,"issue_id":"rui-4vp","author":"Herb Caudill","text":"## Issue Breakdown\n\nThis epic has been broken down into the following sub-issues:\n\n### Can be worked on in parallel:\n1. **rui-4vp.1** - Extend MainLayout to support an optional third pane\n2. **rui-4vp.5** - Add state management for task chat panel\n3. **rui-4vp.3** - Create default system prompt for task management chat\n\n### Sequential dependencies:\n4. **rui-4vp.4** - Add Claude API integration (depends on rui-4vp.3)\n5. **rui-4vp.2** - Create TaskChatPanel component (depends on rui-4vp.1, rui-4vp.4, rui-4vp.5)\n6. **rui-4vp.6** - Add hotkeys for task chat panel (depends on rui-4vp.5)\n7. **rui-4vp.7** - Wire up TaskChatPanel in App.tsx (depends on rui-4vp.2, rui-4vp.6)","created_at":"2026-01-19T21:08:26Z"},{"id":109,"issue_id":"rui-4vp","author":"Herb Caudill","text":"Broken into 7 sub-issues. This epic will remain open until all sub-issues are completed. The first 3 sub-issues (rui-4vp.1, rui-4vp.3, rui-4vp.5) can be worked on in parallel.","created_at":"2026-01-19T21:08:47Z"},{"id":115,"issue_id":"rui-4vp","author":"Herb Caudill","text":"This should not talk to the Anthropic API directly, but to the Claude process locally, just like the ralph CLI does.","created_at":"2026-01-19T21:26:49Z"}]}
{"id":"rui-4vp.1","title":"Extend MainLayout to support an optional third pane (task chat panel)","status":"closed","priority":1,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-19T22:07:06.486809+01:00","created_by":"Herb Caudill","updated_at":"2026-01-19T22:12:12.93809+01:00","closed_at":"2026-01-19T22:12:12.93809+01:00","close_reason":"Closed","dependencies":[{"issue_id":"rui-4vp.1","depends_on_id":"rui-4vp","type":"parent-child","created_at":"2026-01-19T22:07:06.487507+01:00","created_by":"Herb Caudill"}],"comments":[{"id":110,"issue_id":"rui-4vp.1","author":"Herb Caudill","text":"## Changes Made\n\nExtended MainLayout component to support an optional third pane (right panel):\n\n### New Props\n- `rightPanel?: React.ReactNode` - Optional content for the right panel\n- `rightPanelOpen?: boolean` - Controls visibility (defaults to false)\n- `rightPanelWidth?: number` - Width in pixels (defaults to 400px)\n- `onRightPanelWidthChange?: (width: number) =\u003e void` - Callback for resize\n\n### Features\n- Resizable right panel with drag handle on the left edge\n- Width constraints: min 300px, max 800px\n- Smooth transition animations when opening/closing\n- `focusRightPanel()` method added to MainLayoutHandle for keyboard navigation\n\n### Tests Added\n12 new tests covering:\n- Rendering when open/closed\n- Width application and defaults\n- Resize handle visibility conditions\n- Drag resize with min/max clamping\n\n### Commit\n470ff07 - Extend MainLayout to support optional third pane (right panel)","created_at":"2026-01-19T21:12:09Z"}]}
{"id":"rui-4vp.2","title":"Create TaskChatPanel component for task management conversations","description":"Create a new component that displays a chat interface for task management conversations with Claude. This component should be similar to the AgentView but focused on task-related discussions. It should include a chat history display and a ChatInput component.","status":"closed","priority":1,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-19T22:07:11.430748+01:00","created_by":"Herb Caudill","updated_at":"2026-01-19T22:57:29.032309+01:00","closed_at":"2026-01-19T22:57:29.032309+01:00","close_reason":"Closed","dependencies":[{"issue_id":"rui-4vp.2","depends_on_id":"rui-4vp","type":"parent-child","created_at":"2026-01-19T22:07:11.431408+01:00","created_by":"Herb Caudill"},{"issue_id":"rui-4vp.2","depends_on_id":"rui-4vp.1","type":"blocks","created_at":"2026-01-19T22:08:07.870914+01:00","created_by":"Herb Caudill"},{"issue_id":"rui-4vp.2","depends_on_id":"rui-4vp.4","type":"blocks","created_at":"2026-01-19T22:08:09.181517+01:00","created_by":"Herb Caudill"},{"issue_id":"rui-4vp.2","depends_on_id":"rui-4vp.5","type":"blocks","created_at":"2026-01-19T22:08:10.101241+01:00","created_by":"Herb Caudill"}],"comments":[{"id":120,"issue_id":"rui-4vp.2","author":"Herb Caudill","text":"## Summary of Changes\n\nCreated the TaskChatPanel component for task management conversations with Claude.\n\n### New Files\n- `src/components/chat/TaskChatPanel.tsx` - Main component with:\n  - Chat interface displaying message history\n  - User and assistant message bubbles with markdown rendering\n  - ChatInput component for sending messages\n  - Auto-scroll and scroll-to-bottom functionality\n  - Clear history and close panel buttons\n  - Loading state indicator\n  - Connection status handling\n  - Empty state with helpful prompts\n\n- `src/components/chat/TaskChatPanel.test.tsx` - Comprehensive test suite with 25 tests covering:\n  - Rendering (header, empty state, input, buttons)\n  - Message display (user/assistant messages, markdown)\n  - Loading and connection states\n  - Sending messages and API integration\n  - Clear history functionality\n  - Accessibility (ARIA labels)\n\n- `src/components/chat/index.ts` - Export barrel file for chat components\n\n### Modified Files\n- `src/components/chat/ChatInput.tsx` - Added customizable `aria-label` prop\n\n### Notes\n- WebSocket streaming integration will be added in rui-4vp.7 when wiring up the component in App.tsx\n- The component uses the task-chat API endpoints already implemented in the server","created_at":"2026-01-19T21:57:25Z"}]}
{"id":"rui-4vp.3","title":"Create default system prompt for task management chat","description":"Create a default system prompt stored in a markdown file that instructs Claude how to help with task management. The prompt should guide Claude to assist with creating, updating, organizing, and prioritizing issues. Also copy this to .ralph folder so it can be adjusted per-repo.","status":"closed","priority":1,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-19T22:07:16.846236+01:00","created_by":"Herb Caudill","updated_at":"2026-01-19T22:22:29.652687+01:00","closed_at":"2026-01-19T22:22:29.652687+01:00","close_reason":"Closed","dependencies":[{"issue_id":"rui-4vp.3","depends_on_id":"rui-4vp","type":"parent-child","created_at":"2026-01-19T22:07:16.846989+01:00","created_by":"Herb Caudill"}],"comments":[{"id":114,"issue_id":"rui-4vp.3","author":"Herb Caudill","text":"## Changes Made\n\n- Created default system prompt at `server/prompts/task-chat-system.md`\n  - Explains Claude's role as task management assistant\n  - Documents capabilities: creating, viewing, updating, organizing issues\n  - Includes priority guidelines (P0-P4) and status meanings\n  - Provides behavioral guidelines (concise responses, confirm destructive actions, suggest structure)\n\n- Created `server/systemPrompt.ts` with utility functions:\n  - `loadSystemPrompt(cwd?)` - Loads from .ralph folder first, falls back to default\n  - `initSystemPrompt(cwd?)` - Copies default to .ralph folder for per-repo customization\n  - `getCustomPromptPath(cwd?)` and `getDefaultPromptPath()` helper functions\n\n- Added comprehensive tests in `server/systemPrompt.test.ts` (11 tests)\n  - Tests for custom prompt loading, default fallback, and prompt initialization","created_at":"2026-01-19T21:22:25Z"}]}
{"id":"rui-4vp.4","title":"Add Claude API integration for task chat conversations","description":"Create a backend service and API endpoints to handle conversations with Claude for task management. This should include sending messages with the system prompt, maintaining conversation history, and handling responses. The server should proxy requests to the Claude API.","status":"closed","priority":1,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-19T22:07:21.458749+01:00","created_by":"Herb Caudill","updated_at":"2026-01-19T22:47:20.599722+01:00","closed_at":"2026-01-19T22:47:20.599722+01:00","close_reason":"Closed","dependencies":[{"issue_id":"rui-4vp.4","depends_on_id":"rui-4vp","type":"parent-child","created_at":"2026-01-19T22:07:21.45934+01:00","created_by":"Herb Caudill"},{"issue_id":"rui-4vp.4","depends_on_id":"rui-4vp.3","type":"blocks","created_at":"2026-01-19T22:08:04.580467+01:00","created_by":"Herb Caudill"}],"comments":[{"id":119,"issue_id":"rui-4vp.4","author":"Herb Caudill","text":"## Implementation Summary\n\nAdded Claude API integration for task chat conversations using Claude CLI.\n\n### Created Files:\n- `server/TaskChatManager.ts` - Manager class that spawns Claude CLI processes\n- `server/TaskChatManager.test.ts` - 28 unit tests covering all functionality\n\n### Key Features:\n- Uses Claude CLI with `--print --output-format stream-json` for non-interactive conversations\n- Manages conversation history and includes context in prompts\n- Builds system prompt dynamically with current task list from BdProxy\n- Supports streaming text chunks and handles various output formats\n- Proper cancellation support and error handling\n- Workspace-aware singleton that recreates on workspace switch\n\n### API Endpoints Added:\n- `POST /api/task-chat/message` - Send message and get Claude response\n- `GET /api/task-chat/messages` - Get conversation history\n- `POST /api/task-chat/clear` - Clear conversation history\n- `POST /api/task-chat/cancel` - Cancel in-progress request\n- `GET /api/task-chat/status` - Get chat status\n\n### WebSocket Events:\n- `task-chat:message` - New message (user or assistant)\n- `task-chat:chunk` - Streaming text chunk\n- `task-chat:status` - Status changes\n- `task-chat:error` - Error events\n\nThis implementation follows the same pattern as RalphManager for consistency.","created_at":"2026-01-19T21:47:16Z"}]}
{"id":"rui-4vp.5","title":"Add state management for task chat panel (open/closed, width, conversation history)","description":"Extend the app store to manage state for the task chat panel, including whether the panel is open, its width (resizable like the sidebar), and conversation history. Add selectors and actions for this state.","status":"closed","priority":1,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-19T22:07:26.672881+01:00","created_by":"Herb Caudill","updated_at":"2026-01-19T22:30:30.501431+01:00","closed_at":"2026-01-19T22:30:30.501431+01:00","close_reason":"Closed","dependencies":[{"issue_id":"rui-4vp.5","depends_on_id":"rui-4vp","type":"parent-child","created_at":"2026-01-19T22:07:26.673501+01:00","created_by":"Herb Caudill"}],"comments":[{"id":116,"issue_id":"rui-4vp.5","author":"Herb Caudill","text":"## Changes Made\n\nAdded state management for the task chat panel to the Zustand store:\n\n### State Fields\n- `taskChatOpen: boolean` - Whether the panel is open (default: false)\n- `taskChatWidth: number` - Panel width in pixels (default: 400, range: 280-800)\n- `taskChatMessages: TaskChatMessage[]` - Conversation history\n- `taskChatLoading: boolean` - Loading state for API calls\n\n### Actions\n- `setTaskChatOpen(open)` - Set open/closed state\n- `toggleTaskChat()` - Toggle open/closed state\n- `setTaskChatWidth(width)` - Set width with localStorage persistence\n- `addTaskChatMessage(message)` - Add message to conversation\n- `clearTaskChatMessages()` - Clear all messages\n- `setTaskChatLoading(loading)` - Set loading state\n\n### Selectors\n- `selectTaskChatOpen`\n- `selectTaskChatWidth`\n- `selectTaskChatMessages`\n- `selectTaskChatLoading`\n\n### Types\n- Added `TaskChatMessage` interface with id, role, content, timestamp\n\n### Persistence\n- Task chat width is persisted to localStorage (key: `ralph-ui-task-chat-width`)\n- Validation enforces min 280px and max 800px\n\n### Tests\n- Added 13 new tests covering all state management functionality\n- Added 5 tests for localStorage persistence\n- Updated reset test to verify task chat state is properly reset","created_at":"2026-01-19T21:30:26Z"}]}
{"id":"rui-4vp.6","title":"Add hotkeys for task chat panel (toggle panel, focus chat input)","description":"Add keyboard shortcuts to toggle the task chat panel visibility and to focus the task chat input. Update HotkeysDialog to show the new shortcuts.","status":"closed","priority":1,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-19T22:07:31.064778+01:00","created_by":"Herb Caudill","updated_at":"2026-01-19T22:34:21.670615+01:00","closed_at":"2026-01-19T22:34:21.670615+01:00","close_reason":"Closed","dependencies":[{"issue_id":"rui-4vp.6","depends_on_id":"rui-4vp","type":"parent-child","created_at":"2026-01-19T22:07:31.065432+01:00","created_by":"Herb Caudill"},{"issue_id":"rui-4vp.6","depends_on_id":"rui-4vp.5","type":"blocks","created_at":"2026-01-19T22:08:15.378423+01:00","created_by":"Herb Caudill"}],"comments":[{"id":117,"issue_id":"rui-4vp.6","author":"Herb Caudill","text":"## Changes Made\n\nAdded keyboard shortcuts for the task chat panel:\n\n### New Hotkeys\n- **Cmd+J** (`toggleTaskChat`) - Toggle task chat panel visibility\n- **Cmd+3** (`focusTaskChatInput`) - Focus the task chat input (opens panel if closed)\n\n### Files Modified\n- `src/config/hotkeys.json` - Added two new hotkey definitions\n- `src/config/index.ts` - Extended HotkeyAction type with new actions\n- `src/components/layout/HotkeysDialog.tsx` - Added new hotkeys to Navigation category\n- `src/hooks/useHotkeys.ts` - Added new hotkeys to allowedInInput list\n- `src/App.tsx` - Added handlers for the new hotkeys\n\n### Tests Added\n- `src/components/layout/HotkeysDialog.test.tsx` - Test to verify new hotkeys display\n- `src/hooks/useHotkeys.test.ts` - Tests for Cmd+J and Cmd+3 key handling\n\nAll tests pass and build succeeds.","created_at":"2026-01-19T21:34:17Z"}]}
{"id":"rui-4vp.7","title":"Wire up TaskChatPanel in App.tsx and integrate all components","description":"Final integration: wire up the TaskChatPanel component in App.tsx, connect all the pieces (state management, API, hotkeys), and ensure everything works together. Add tests for the integrated functionality.","status":"closed","priority":1,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-19T22:07:35.814831+01:00","created_by":"Herb Caudill","updated_at":"2026-01-19T23:03:22.006845+01:00","closed_at":"2026-01-19T23:03:22.006845+01:00","close_reason":"Closed","dependencies":[{"issue_id":"rui-4vp.7","depends_on_id":"rui-4vp","type":"parent-child","created_at":"2026-01-19T22:07:35.815487+01:00","created_by":"Herb Caudill"},{"issue_id":"rui-4vp.7","depends_on_id":"rui-4vp.2","type":"blocks","created_at":"2026-01-19T22:08:16.403394+01:00","created_by":"Herb Caudill"},{"issue_id":"rui-4vp.7","depends_on_id":"rui-4vp.6","type":"blocks","created_at":"2026-01-19T22:08:17.66136+01:00","created_by":"Herb Caudill"}],"comments":[{"id":121,"issue_id":"rui-4vp.7","author":"Herb Caudill","text":"## Changes Made\n\n### Integration in App.tsx\n- Added TaskChatPanel component import\n- Connected taskChatOpen, taskChatWidth, and setTaskChatWidth from store\n- Added handler callbacks for panel close and width changes\n- Passed all required props to MainLayout's rightPanel\n\n### WebSocket Event Handling (ralphConnection.ts)\n- Added handlers for task-chat:message - receives complete assistant messages\n- Added handlers for task-chat:chunk - receives streaming text chunks\n- Added handlers for task-chat:status - tracks processing/streaming/idle state\n- Added handlers for task-chat:error - handles and displays errors\n\n### Store Updates\n- Added taskChatStreamingText state\n- Added setTaskChatStreamingText and appendTaskChatStreamingText actions\n- Added selectTaskChatStreamingText selector\n\n### TaskChatPanel Updates\n- Changed from local useState for streamingText to store-based state\n- Updated handleSendMessage to work with WebSocket events for loading/response\n- Removed TODO comment as integration is now complete\n\n### Tests\n- Added tests for setTaskChatStreamingText action\n- Added tests for appendTaskChatStreamingText action\n- Updated initial state tests to include taskChatStreamingText","created_at":"2026-01-19T22:03:18Z"}]}
{"id":"rui-4wu","title":"Fix flaky Tab key focus toggle test in App.test.tsx","description":"The 'Tab key toggles focus between task input and chat input' test in src/App.test.tsx is failing. The test expects Tab to switch focus to chatInput but focus stays on taskInput. This is a pre-existing issue.","status":"closed","priority":2,"issue_type":"bug","owner":"herb@devresults.com","created_at":"2026-01-20T02:32:56.607282+01:00","created_by":"Herb Caudill","updated_at":"2026-01-20T02:43:10.360296+01:00","closed_at":"2026-01-20T02:43:10.360296+01:00","close_reason":"Closed","comments":[{"id":146,"issue_id":"rui-4wu","author":"Herb Caudill","text":"## Fix Summary\n\nThe test was failing because `ChatInput` is disabled when not connected to the WebSocket or when Ralph is not running. The fix:\n\n1. **Mocked the `ralphConnection` module** to prevent it from resetting the connection status during initialization (the `initRalphConnection()` function was calling `connect()` which set status to 'connecting', overwriting our test setup)\n\n2. **Set up store state before rendering** - `connectionStatus: 'connected'` and `ralphStatus: 'running'` so `ChatInput` is enabled and can receive focus\n\nThe Tab key hotkey now successfully toggles focus between task input and chat input in the test.","created_at":"2026-01-20T01:43:06Z"}]}
{"id":"rui-5cc","title":"get rid of the caret for expanding tasks","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-19T18:25:49.052529+01:00","created_by":"Herb Caudill","updated_at":"2026-01-19T18:41:55.00818+01:00","closed_at":"2026-01-19T18:41:55.00818+01:00","close_reason":"Closed","comments":[{"id":50,"issue_id":"rui-5cc","author":"Herb Caudill","text":"Removed the ChevronDown expand indicator from TaskCard. Changes include:\n\n- Removed ChevronDown import from lucide-react\n- Removed the expand indicator JSX and associated CSS classes\n- Removed 4 tests that were checking for the expand indicator\n- The expand/collapse functionality still works via clicking the task title\n\nAll tests pass and build succeeds.","created_at":"2026-01-19T17:41:50Z"}]}
{"id":"rui-5q9","title":"the task count for a workspace should exclude closed tasks","status":"closed","priority":1,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-19T21:08:32.517592+01:00","created_by":"Herb Caudill","updated_at":"2026-01-19T22:04:14.654036+01:00","closed_at":"2026-01-19T21:57:46.682935+01:00","close_reason":"Closed","comments":[{"id":99,"issue_id":"rui-5q9","author":"Herb Caudill","text":"Verified that the workspace task count already excludes closed tasks. The server endpoints (/api/workspace, /api/workspaces, /api/workspace/switch) all compute activeIssueCount by only counting issues with status='open' or status='in_progress'. This is the count displayed in the WorkspacePicker component. No changes needed.","created_at":"2026-01-19T20:43:00Z"},{"id":101,"issue_id":"rui-5q9","author":"Herb Caudill","text":"if that's the case then we're not showing all of the open tasks in the sidebar - figure out where the discrepancy is","created_at":"2026-01-19T20:49:16Z"},{"id":103,"issue_id":"rui-5q9","author":"Herb Caudill","text":"Fixed the task count issue by adding `limit: 0` to all bd list queries in server/index.ts. The bd CLI has a default limit of 50 results, which was causing the sidebar to only show 50 tasks. Changes:\n\n- Added `limit: 0` to workspace issue count queries (`/api/workspace`, `/api/workspaces`, `/api/workspace/switch`)\n- Added `limit: 0` to the `/api/tasks` endpoint to fetch all tasks\n\nThe sidebar now correctly displays all tasks (134 total including closed) and the workspace count correctly shows 30 active tasks (open + in_progress).","created_at":"2026-01-19T20:57:42Z"},{"id":104,"issue_id":"rui-5q9","author":"Herb Caudill","text":"rui-4vp is one of the tasks not showing in the sidebar","created_at":"2026-01-19T20:57:49Z"},{"id":105,"issue_id":"rui-5q9","author":"Herb Caudill","text":"my guess is that it's a paging issue and we just need to use --no-pager","created_at":"2026-01-19T20:58:52Z"}]}
{"id":"rui-5w0","title":"useVSCodeTheme hook","description":"Hook to fetch themes from API, auto-apply current VS Code theme, handle theme switching and preview on hover","status":"open","priority":3,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-19T19:19:16.029294+01:00","created_by":"Herb Caudill","updated_at":"2026-01-19T19:19:16.029294+01:00","dependencies":[{"issue_id":"rui-5w0","depends_on_id":"rui-bnb","type":"parent-child","created_at":"2026-01-19T19:19:36.319798+01:00","created_by":"Herb Caudill"},{"issue_id":"rui-5w0","depends_on_id":"rui-obb","type":"blocks","created_at":"2026-01-19T19:19:59.851253+01:00","created_by":"Herb Caudill"},{"issue_id":"rui-5w0","depends_on_id":"rui-i3g","type":"blocks","created_at":"2026-01-19T19:19:59.972324+01:00","created_by":"Herb Caudill"},{"issue_id":"rui-5w0","depends_on_id":"rui-4tm","type":"blocks","created_at":"2026-01-19T19:20:00.094654+01:00","created_by":"Herb Caudill"}]}
{"id":"rui-6kc","title":"Show a spinner at the bottom of the event log as long as Ralph is running","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-19T18:56:36.498321+01:00","created_by":"Herb Caudill","updated_at":"2026-01-19T19:06:50.821658+01:00","closed_at":"2026-01-19T19:06:50.821658+01:00","close_reason":"Closed","comments":[{"id":61,"issue_id":"rui-6kc","author":"Herb Caudill","text":"## Changes Made\n\nAdded a spinner at the bottom of the event log that appears when Ralph is running or starting.\n\n### Implementation:\n- Imported `Loader2` icon from lucide-react for the animated spinner\n- Added `selectRalphStatus` selector to track Ralph's current status\n- Spinner shows when status is 'running' or 'starting'\n- Positioned at the bottom of the event stream, after streaming content\n- Uses muted foreground color to not be too distracting\n- Includes proper accessibility attributes (aria-label, aria-hidden)\n\n### Tests Added:\n- Spinner shows when Ralph is running\n- Spinner shows when Ralph is starting\n- Spinner hidden when Ralph is stopped\n- Spinner hidden when Ralph is paused\n- Spinner not shown in empty state (no events)","created_at":"2026-01-19T18:06:47Z"}]}
{"id":"rui-6q8","title":"Persist state in local storage","description":"The events received since the last time ralph was started should be persisted in local storage. In general if I reload the app, its state should be preserved.","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-19T19:35:39.332771+01:00","created_by":"Herb Caudill","updated_at":"2026-01-20T02:14:00.44852+01:00","closed_at":"2026-01-20T02:14:00.44852+01:00","close_reason":"Merged into rui-3lj"}
{"id":"rui-77v","title":"cmd+enter in the issue dialog should save changes","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-19T21:16:00.992999+01:00","created_by":"Herb Caudill","updated_at":"2026-01-20T02:03:29.799945+01:00","closed_at":"2026-01-20T02:03:29.799945+01:00","close_reason":"Closed","comments":[{"id":135,"issue_id":"rui-77v","author":"Herb Caudill","text":"Added Cmd+Enter (Mac) / Ctrl+Enter (Windows/Linux) keyboard shortcut to save changes in the TaskDetailsDialog. The handler:\n- Only triggers when dialog is open, not read-only, has changes, and is not currently saving\n- Properly detects platform for correct modifier key\n- Added 4 tests covering Mac, Windows/Linux, no-changes, and read-only scenarios","created_at":"2026-01-20T01:03:25Z"}]}
{"id":"rui-7bu","title":"Wire up quick task input focus hotkey (Cmd+K)","description":"The QuickTaskInput component exists but isn't integrated into the main App layout. The Cmd+K hotkey should focus it, but currently falls back to focusing the sidebar.","status":"closed","priority":3,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-18T23:06:11.508324+01:00","created_by":"Herb Caudill","updated_at":"2026-01-19T02:04:24.47407+01:00","closed_at":"2026-01-19T02:04:24.47407+01:00","close_reason":"Closed","comments":[{"id":42,"issue_id":"rui-7bu","author":"Herb Caudill","text":"## Changes Made\n\n### QuickTaskInput Component\n- Added `forwardRef` wrapper to enable imperative handle\n- Added `useImperativeHandle` to expose `focus()` method via ref\n- Created internal `inputRef` to reference the input element\n- Exported new `QuickTaskInputHandle` interface\n\n### App.tsx\n- Created `quickTaskInputRef` to hold reference to QuickTaskInput\n- Updated `TasksSidebarPanel` to accept and pass through `quickInputRef` prop\n- Updated `handleFocusTaskInput` callback to call `quickTaskInputRef.current?.focus()`\n\n### Tests\n- Added test for `imperative handle` that verifies focus method works via ref\n\nCmd+K hotkey now properly focuses the quick task input in the sidebar.","created_at":"2026-01-19T01:04:20Z"}]}
{"id":"rui-7ts","title":"get rid of padding in the right hand pane (containing events from ralph and the type a message panel)","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-19T18:42:59.921709+01:00","created_by":"Herb Caudill","updated_at":"2026-01-19T18:47:07.98823+01:00","closed_at":"2026-01-19T18:47:07.98823+01:00","close_reason":"Closed","comments":[{"id":53,"issue_id":"rui-7ts","author":"Herb Caudill","text":"Removed padding from the main content area in MainLayout.tsx by removing the `p-4 md:p-6` classes from the container div wrapping the main content. This allows the events stream and message panel to use the full width without extra spacing.","created_at":"2026-01-19T17:47:04Z"}]}
{"id":"rui-7xe","title":"Group tasks by epic in sidebar","description":"Task lists should be grouped by epic (like bd list --pretty).\n\n- Tasks without an epic shown as flat list after epic groups\n- Each epic collapsible independently\n- Collapse state persisted to localStorage","status":"closed","priority":2,"issue_type":"feature","owner":"herb@devresults.com","created_at":"2026-01-18T20:54:41.563703+01:00","created_by":"Herb Caudill","updated_at":"2026-01-18T22:20:58.616475+01:00","closed_at":"2026-01-18T22:20:58.616475+01:00","close_reason":"Closed","dependencies":[{"issue_id":"rui-7xe","depends_on_id":"rui-4rt","type":"blocks","created_at":"2026-01-18T20:54:46.133415+01:00","created_by":"Herb Caudill"}],"comments":[{"id":28,"issue_id":"rui-7xe","author":"Herb Caudill","text":"## Summary\n\nImplemented epic grouping for the task sidebar, matching the behavior of `bd list --pretty`.\n\n### Changes Made\n\n**TaskList Component (`src/components/tasks/TaskList.tsx`)**:\n- Added `EpicGroupHeader` component for displaying collapsible epic sections\n- Restructured task grouping: tasks with an epic parent are now grouped under their epic\n- Tasks without an epic parent are shown in status groups below the epic groups\n- Each epic group shows: epic ID, title, task count, and collapse indicator\n- Tasks within epic groups are indented for visual hierarchy\n- Epic collapse state is persisted to localStorage separately from status collapse state\n\n**Stories (`src/components/tasks/TaskList.stories.tsx`)**:\n- Added `GroupedByEpic` story demonstrating mixed epic and ungrouped tasks\n- Added `OnlyEpicTasks` story showing only epic-grouped tasks\n\n### Features\n- ✅ Tasks grouped by parent epic\n- ✅ Tasks without epic shown as flat list after epic groups  \n- ✅ Each epic collapsible independently\n- ✅ Collapse state persisted to localStorage","created_at":"2026-01-18T21:20:55Z"}]}
{"id":"rui-7xj","title":"show the play/pause/stop buttons","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-19T18:32:20.445145+01:00","created_by":"Herb Caudill","updated_at":"2026-01-19T18:55:57.154455+01:00","closed_at":"2026-01-19T18:55:57.154455+01:00","close_reason":"Closed","comments":[{"id":57,"issue_id":"rui-7xj","author":"Herb Caudill","text":"## Summary\n\nAdded play/pause/stop control buttons to the application header.\n\n### Changes\n\n- **Header.tsx**: Imported and added the existing `ControlBar` component to the header's right side, next to the theme toggle\n- **Header.test.tsx**: Added 3 new tests to verify:\n  - Control bar buttons are rendered (Start, Pause, Stop, Stop after current)\n  - Start button is enabled when Ralph is stopped and connected\n  - All control buttons are disabled when disconnected\n\nThe ControlBar component was already fully implemented with all the button states and API integration - it just needed to be added to the Header component.","created_at":"2026-01-19T17:55:53Z"}]}
{"id":"rui-7y5","title":"get rid of the button to hide/show the sidebar","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-19T18:32:01.145093+01:00","created_by":"Herb Caudill","updated_at":"2026-01-19T18:50:17.349941+01:00","closed_at":"2026-01-19T18:50:17.349941+01:00","close_reason":"Closed","comments":[{"id":54,"issue_id":"rui-7y5","author":"Herb Caudill","text":"Removed the sidebar toggle button from the MainLayout component. The sidebar can still be toggled using the Cmd+B (Mac) keyboard shortcut. Updated unit tests and e2e tests to use the store/hotkey method instead of clicking the removed button.","created_at":"2026-01-19T17:50:14Z"}]}
{"id":"rui-83u","title":"Auto-focus the task input. The tab key should just take me back and forth between the task input and the message input.","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-19T20:14:52.735671+01:00","created_by":"Herb Caudill","updated_at":"2026-01-19T20:59:41.300901+01:00","closed_at":"2026-01-19T20:59:41.300901+01:00","close_reason":"Closed","comments":[{"id":84,"issue_id":"rui-83u","author":"Herb Caudill","text":"## Summary\n\nImplemented auto-focus and Tab key toggle for input fields:\n\n- **Auto-focus on load**: The task input is now automatically focused when the app loads (with a small delay to ensure DOM is ready)\n- **Tab key toggle**: Pressing Tab toggles focus between the task input and chat input, regardless of which one is currently focused\n- Added new hotkey `toggleInputFocus` to the hotkeys config\n- Added tests for both behaviors\n\nThis makes it easy to quickly switch between adding tasks and sending messages without using the mouse.","created_at":"2026-01-19T19:59:37Z"}]}
{"id":"rui-8n4","title":"make the \"add\" button in the add task input group solid colored with the icon in white","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-19T18:27:03.896143+01:00","created_by":"Herb Caudill","updated_at":"2026-01-19T18:44:09.961581+01:00","closed_at":"2026-01-19T18:44:09.961581+01:00","close_reason":"Closed","comments":[{"id":51,"issue_id":"rui-8n4","author":"Herb Caudill","text":"Updated QuickTaskInput button styling:\n\n- Changed from ghost-style button (muted text that turns foreground on hover) to solid primary-colored button\n- Button now has `bg-primary text-primary-foreground` which gives it a solid background with white icon\n- Added `rounded-md` for rounded corners consistent with other UI buttons\n- Updated focus state to use ring styling (`focus-visible:ring-ring/50 focus-visible:ring-[3px]`) matching the Button component pattern\n- Hover state dims slightly with `hover:bg-primary/90`","created_at":"2026-01-19T17:44:06Z"}]}
{"id":"rui-8rl","title":"Fix failing test: TaskList 'shows all closed tasks when all_time is selected'","description":"## Problem\n\nThe test `shows all closed tasks when all_time is selected` in `TaskList.test.tsx` is failing.\n\n## Root Cause\n\nThe test creates a task from 30 days ago, which gets filtered out by the default `past_day` filter. Since the task is filtered out, the closed group appears empty, and by default empty groups are hidden (showEmptyGroups defaults to false). So there's no combobox to find when the test tries to change the filter.\n\n## Error\n\n```\nTestingLibraryElementError: Unable to find an accessible element with the role \"combobox\" and name \"Filter closed tasks by time\"\n```\n\nThe rendered output shows only an empty \"No tasks\" message because the entire closed group (including its header with the time filter dropdown) is hidden.\n\n## Fix\n\nAdd `showEmptyGroups={true}` to the test's render call at line 640, so that the closed group header (with the time filter dropdown) is visible even when all tasks are filtered out:\n\n```tsx\nrender(\u003cTaskList tasks={tasks} defaultCollapsed={{ closed: false }} persistCollapsedState={false} showEmptyGroups={true} /\u003e)\n```\n\nThis matches the intent of the test - we need to see the filter dropdown to change it from past_day to all_time.","status":"closed","priority":1,"issue_type":"bug","owner":"herb@devresults.com","created_at":"2026-01-19T19:20:16.899781+01:00","created_by":"Herb Caudill","updated_at":"2026-01-19T19:21:43.539013+01:00","closed_at":"2026-01-19T19:21:43.539013+01:00","close_reason":"Closed","comments":[{"id":64,"issue_id":"rui-8rl","author":"Herb Caudill","text":"## Fix Summary\n\nFixed the failing test `shows all closed tasks when all_time is selected` in `TaskList.test.tsx`.\n\n### Root Cause\nThe test created a task from 30 days ago, which gets filtered out by the default `past_day` filter. Since the task is filtered out, the closed group appears empty, and empty groups are hidden by default. This meant the time filter dropdown wasn't rendered.\n\n### Solution\nAdded `showEmptyGroups={true}` to the test's render call so the closed group header (with the time filter dropdown) remains visible even when all tasks are filtered out by the current time filter.\n\nAlso removed an unused `ClosedTasksTimeFilter` import from the test file that was causing a TypeScript error during build.\n\n### Files Changed\n- `src/components/tasks/TaskList.test.tsx`","created_at":"2026-01-19T18:21:40Z"}]}
{"id":"rui-8y8","title":"Make task status headings collapsible","description":"Status group headings (Ready, In Progress, Blocked) should be collapsible.\n\nRequirements:\n- Still show task counts when collapsed\n- Persist collapsed state to localStorage\n- Default: Ready + In Progress expanded, Blocked collapsed","status":"closed","priority":2,"issue_type":"feature","owner":"herb@devresults.com","created_at":"2026-01-18T20:47:57.118937+01:00","created_by":"Herb Caudill","updated_at":"2026-01-18T22:08:01.246191+01:00","closed_at":"2026-01-18T22:08:01.246191+01:00","close_reason":"Closed","dependencies":[{"issue_id":"rui-8y8","depends_on_id":"rui-4rt","type":"blocks","created_at":"2026-01-18T20:48:25.034308+01:00","created_by":"Herb Caudill"}],"comments":[{"id":26,"issue_id":"rui-8y8","author":"Herb Caudill","text":"## Changes Made\n\n- **localStorage persistence**: Collapsed state now automatically saves to localStorage and restores on page reload\n- **New defaults**: Blocked group is now collapsed by default (Ready + In Progress remain expanded, as requested)\n- **New prop**: Added `persistCollapsedState` prop to optionally disable localStorage persistence (useful for testing)\n- **Tests**: Added comprehensive test coverage for localStorage behavior (persistence, restoration, and prop override behavior)\n\nThe collapsed state is stored under the key `ralph-ui-task-list-collapsed-state` in localStorage.","created_at":"2026-01-18T21:07:57Z"}]}
{"id":"rui-8ze","title":"add syntax highlighting for code","description":"use Shiki","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-19T19:02:48.561626+01:00","created_by":"Herb Caudill","updated_at":"2026-01-19T21:36:51.54092+01:00","closed_at":"2026-01-19T21:36:51.54092+01:00","close_reason":"Closed","comments":[{"id":96,"issue_id":"rui-8ze","author":"Herb Caudill","text":"## Changes Made\n\nAdded syntax highlighting for code blocks using Shiki library.\n\n### New Files\n- `src/components/ui/code-block.tsx` - CodeBlock component that handles async syntax highlighting\n- `src/components/ui/code-block.test.tsx` - Tests for the CodeBlock component\n\n### Modified Files\n- `src/components/events/AssistantText.tsx` - Updated to use CodeBlock for fenced code blocks with custom react-markdown components\n- `src/vitest-setup.ts` - Added matchMedia mock needed for theme detection in tests\n- `package.json` / `pnpm-lock.yaml` - Added shiki dependency\n\n### Features\n- Uses `github-light` and `github-dark` themes based on the app's theme setting\n- Supports common language aliases (ts -\u003e typescript, js -\u003e javascript, etc.)\n- Falls back gracefully for unknown languages\n- Shared highlighter instance for performance\n- Pre-loaded common languages: typescript, javascript, tsx, jsx, json, html, css, bash, shell, python, rust, go, markdown, yaml, toml, sql, graphql, diff","created_at":"2026-01-19T20:36:47Z"}]}
{"id":"rui-91v","title":"Collapsible code diffs","description":"Code diffs should work like bash output - truncate at a few lines by default, but allow clicking to expand to see the full diff.","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-19T22:12:45.632453+01:00","created_by":"Herb Caudill","updated_at":"2026-01-20T03:12:32.597801+01:00","closed_at":"2026-01-20T03:12:32.597801+01:00","close_reason":"Closed","comments":[{"id":154,"issue_id":"rui-91v","author":"Herb Caudill","text":"Implemented collapsible code diffs in ToolUseCard component:\n\n- Modified DiffView component to accept isExpanded and onExpand props\n- Diffs with more than 5 lines now truncate by default, showing \"... +N lines\" indicator\n- Clicking the diff expands it to show the full content\n- Short diffs (≤5 lines) display in full without truncation\n- Added tests for truncation, expansion, and defaultExpanded behavior\n- Matches existing bash output collapsible behavior for consistency","created_at":"2026-01-20T02:12:28Z"}]}
{"id":"rui-95i","title":"The principal buttons (add task, send message) should be the accent color","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-19T18:51:24.549828+01:00","created_by":"Herb Caudill","updated_at":"2026-01-19T19:04:37.011175+01:00","closed_at":"2026-01-19T19:04:37.011175+01:00","close_reason":"Closed","comments":[{"id":60,"issue_id":"rui-95i","author":"Herb Caudill","text":"## Changes Made\n\n- Added `getContrastingColor()` utility function in `src/lib/utils.ts` that uses WCAG luminance calculation to determine whether to use white or black text for a given background color\n- Modified `QuickTaskInput` component to use the accent color from the store (Peacock settings) for the \"Add task\" button\n- Modified `ChatInput` component to use the accent color from the store for the \"Send message\" button\n- Both buttons now use inline styles for background color and automatically calculate contrasting text color\n- Falls back to black with white text when no Peacock accent color is set\n- Added comprehensive unit tests for the `getContrastingColor()` function\n- Updated ChatInput tests to verify accent color styling is applied correctly\n- Added tests for accent color changes from the store","created_at":"2026-01-19T18:04:33Z"}]}
{"id":"rui-96m","title":"pausing ralph changes the state of the control buttons but events keep coming in","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-19T20:04:49.530954+01:00","created_by":"Herb Caudill","updated_at":"2026-01-19T20:48:22.894832+01:00","closed_at":"2026-01-19T20:48:22.894832+01:00","close_reason":"Closed","comments":[{"id":80,"issue_id":"rui-96m","author":"Herb Caudill","text":"Fixed the pause functionality so events are properly buffered while Ralph is paused:\n\n- Added `pausedEvents` array in RalphManager to buffer incoming events during pause\n- When paused, JSON events are buffered instead of emitted to clients\n- Non-JSON output is discarded while paused\n- On resume, buffered events are emitted in order\n- Buffered events are cleared when the process exits\n\nAdded tests for:\n- Events not being emitted while paused\n- Output not being emitted while paused  \n- Buffered events being emitted on resume\n- Buffered events being cleared on exit","created_at":"2026-01-19T19:38:36Z"},{"id":81,"issue_id":"rui-96m","author":"Herb Caudill","text":"Fixed pause/resume/stop to actually communicate with Ralph via stdin messages instead of OS signals:\n\n- pause() now sends {type: 'pause'} via stdin - Ralph will pause after current iteration\n- resume() now sends {type: 'resume'} via stdin\n- stopAfterCurrent() now sends {type: 'stop'} via stdin - Ralph will stop after current iteration  \n- cancelStopAfterCurrent() waits for Ralph to finish and then restarts it\n- stop() uses SIGTERM for immediate termination\n- Removed event buffering (no longer needed since Ralph actually pauses)","created_at":"2026-01-19T19:48:09Z"}]}
{"id":"rui-9dq","title":"React shell","description":"Basic React app setup with routing, state management, and layout","status":"closed","priority":2,"issue_type":"epic","owner":"herb@devresults.com","created_at":"2026-01-18T20:14:19.828526+01:00","created_by":"Herb Caudill","updated_at":"2026-01-18T21:46:30.434975+01:00","closed_at":"2026-01-18T21:46:30.434975+01:00","close_reason":"Closed"}
{"id":"rui-9dq.1","title":"Set up Vite + React + Tailwind + shadcn/ui","description":"Configure the existing scaffolded app with shadcn/ui components. Already have Vite/React/Tailwind from scaffold.","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-18T20:14:48.744181+01:00","created_by":"Herb Caudill","updated_at":"2026-01-18T20:24:56.369502+01:00","closed_at":"2026-01-18T20:24:56.369502+01:00","close_reason":"Closed","dependencies":[{"issue_id":"rui-9dq.1","depends_on_id":"rui-9dq","type":"parent-child","created_at":"2026-01-18T20:14:48.744792+01:00","created_by":"Herb Caudill"}],"comments":[{"id":1,"issue_id":"rui-9dq.1","author":"Herb Caudill","text":"## Task Complete\n\nThe Vite + React + Tailwind + shadcn/ui setup was already in place from the initial project scaffold:\n\n- **components.json** - shadcn/ui configuration (new-york style, Tailwind v4, Tabler icons)\n- **src/lib/utils.ts** - cn() utility function for class merging\n- **src/components/ui/button.tsx** - shadcn Button component already installed\n- **src/index.css** - Tailwind CSS with shadcn CSS variables (light/dark themes)\n- **tsconfig.app.json** - Path alias `@/*` configured\n- **vite.config.ts** - Vite resolve alias configured\n- Dependencies installed: class-variance-authority, clsx, tailwind-merge, @radix-ui/react-slot, @tabler/icons-react\n\nAll tests and typecheck pass. Ready for dependent tasks.","created_at":"2026-01-18T19:24:52Z"}]}
{"id":"rui-9dq.2","title":"Create WebSocket client hook","description":"useWebSocket hook with auto-reconnect, connection status, and message handling.","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-18T20:14:49.608551+01:00","created_by":"Herb Caudill","updated_at":"2026-01-18T20:44:35.745224+01:00","closed_at":"2026-01-18T20:44:35.745224+01:00","close_reason":"Closed","dependencies":[{"issue_id":"rui-9dq.2","depends_on_id":"rui-9dq","type":"parent-child","created_at":"2026-01-18T20:14:49.609105+01:00","created_by":"Herb Caudill"},{"issue_id":"rui-9dq.2","depends_on_id":"rui-lo2.1","type":"blocks","created_at":"2026-01-18T20:15:45.958772+01:00","created_by":"Herb Caudill"}],"comments":[{"id":6,"issue_id":"rui-9dq.2","author":"Herb Caudill","text":"## Summary\n\nCreated `useWebSocket` React hook in `src/hooks/useWebSocket.ts`.\n\n### Features\n\n- **Auto-connect**: Automatically connects on mount (configurable via `autoConnect` option)\n- **Auto-reconnect**: Reconnects after disconnection with configurable delay and max attempts\n- **Connection status**: Tracks `disconnected`, `connecting`, `connected` states\n- **Message handling**: Auto-parses JSON messages, calls `onMessage` callback\n- **Send messages**: `send()` method that JSON-stringifies non-string data\n- **Manual control**: `connect()` and `disconnect()` methods for manual control\n- **Reconnect tracking**: Tracks number of reconnection attempts\n\n### Options\n\n```typescript\ninterface UseWebSocketOptions {\n  url?: string              // WebSocket URL (defaults to ws://host/ws)\n  autoConnect?: boolean     // Connect on mount (default: true)\n  autoReconnect?: boolean   // Reconnect on close (default: true)\n  reconnectDelay?: number   // Delay between attempts (default: 1000ms)\n  maxReconnectAttempts?: number  // Max attempts, 0=unlimited (default: 0)\n  onMessage?: (data: unknown) =\u003e void\n  onConnect?: () =\u003e void\n  onDisconnect?: (event: CloseEvent) =\u003e void\n  onError?: (error: Event) =\u003e void\n}\n```\n\n### Return Value\n\n```typescript\ninterface UseWebSocketReturn {\n  status: ConnectionStatus    // 'disconnected' | 'connecting' | 'connected'\n  isConnected: boolean\n  send: (message: unknown) =\u003e void\n  connect: () =\u003e void\n  disconnect: () =\u003e void\n  reconnectAttempts: number\n}\n```\n\n### Tests\n\n19 comprehensive tests covering connection lifecycle, auto-reconnect, messaging, manual control, error handling, and cleanup.","created_at":"2026-01-18T19:44:31Z"}]}
{"id":"rui-9dq.3","title":"Set up Zustand store","description":"Create store/index.ts with state for: ralph status, events, tasks, current workspace, connection status.","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-18T20:14:50.433915+01:00","created_by":"Herb Caudill","updated_at":"2026-01-18T20:46:42.69738+01:00","closed_at":"2026-01-18T20:46:42.69738+01:00","close_reason":"Closed","dependencies":[{"issue_id":"rui-9dq.3","depends_on_id":"rui-9dq","type":"parent-child","created_at":"2026-01-18T20:14:50.434487+01:00","created_by":"Herb Caudill"}],"comments":[{"id":7,"issue_id":"rui-9dq.3","author":"Herb Caudill","text":"## Summary\n\nImplemented Zustand store for global state management with the following state:\n\n- **ralphStatus**: Ralph process status (stopped/starting/running/stopping)\n- **events**: Array of RalphEvent objects from ralph stdout\n- **tasks**: Array of Task objects with id, content, and status\n- **workspace**: Current workspace path (string or null)\n- **connectionStatus**: WebSocket connection status (disconnected/connecting/connected)\n\n### Actions\n- setRalphStatus, addEvent, clearEvents\n- setTasks, updateTask, clearTasks\n- setWorkspace, setConnectionStatus\n- reset (resets all state to initial values)\n\n### Selectors\n- selectRalphStatus, selectEvents, selectTasks\n- selectWorkspace, selectConnectionStatus\n- selectIsConnected, selectIsRalphRunning\n\n### Files created\n- `src/store/index.ts` - Store implementation with types\n- `src/store/index.test.ts` - 16 tests covering all functionality","created_at":"2026-01-18T19:46:39Z"}]}
{"id":"rui-9dq.4","title":"Create main layout component","description":"App.tsx with sidebar (tasks) + main area (agent view) + status bar layout. Responsive design.","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-18T20:14:51.195363+01:00","created_by":"Herb Caudill","updated_at":"2026-01-18T20:50:01.807242+01:00","closed_at":"2026-01-18T20:50:01.807242+01:00","close_reason":"Closed","dependencies":[{"issue_id":"rui-9dq.4","depends_on_id":"rui-9dq","type":"parent-child","created_at":"2026-01-18T20:14:51.195942+01:00","created_by":"Herb Caudill"},{"issue_id":"rui-9dq.4","depends_on_id":"rui-9dq.1","type":"blocks","created_at":"2026-01-18T20:15:45.143077+01:00","created_by":"Herb Caudill"}],"comments":[{"id":8,"issue_id":"rui-9dq.4","author":"Herb Caudill","text":"## Summary\n\nCreated the MainLayout component with a responsive three-panel layout:\n\n### Components Created\n- **MainLayout** (`src/components/layout/MainLayout.tsx`): Main application layout with:\n  - Collapsible sidebar (left panel) for tasks\n  - Main content area (center) for agent view  \n  - Status bar (bottom) for connection and status info\n  - Toggle button to collapse/expand sidebar\n  - Responsive widths: 256px/288px/320px at different breakpoints\n\n### Integration\n- Updated `App.tsx` to use the new layout with placeholder components:\n  - `TasksSidebar`: Placeholder for task list\n  - `AgentView`: Placeholder for agent monitoring dashboard\n  - `StatusBar`: Shows connection status and Ralph process status from store\n\n### Tests\n- Added 6 unit tests for MainLayout component\n- Updated App tests (2 tests)\n- Added 2 e2e tests for layout and sidebar toggle functionality\n\nAll tests passing (84 unit, 2 e2e).","created_at":"2026-01-18T19:49:56Z"}]}
{"id":"rui-9dq.5","title":"Create Header component","description":"Logo, workspace picker dropdown, connection status indicator.","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-18T20:14:52.123492+01:00","created_by":"Herb Caudill","updated_at":"2026-01-18T20:53:44.152659+01:00","closed_at":"2026-01-18T20:53:44.152659+01:00","close_reason":"Closed","dependencies":[{"issue_id":"rui-9dq.5","depends_on_id":"rui-9dq","type":"parent-child","created_at":"2026-01-18T20:14:52.124103+01:00","created_by":"Herb Caudill"}],"comments":[{"id":9,"issue_id":"rui-9dq.5","author":"Herb Caudill","text":"## Summary\n\nCreated the Header component with the following features:\n\n### Components\n- **Logo**: Displays the Ralph logo and brand name\n- **WorkspacePicker**: Dropdown showing current workspace with ability to switch workspaces\n  - Shows the workspace folder name (extracted from full path)\n  - Shows \"No workspace\" when no workspace is set\n  - Dropdown menu with recent workspaces and \"Open workspace...\" option\n  - Closes when clicking outside\n- **ConnectionIndicator**: Shows WebSocket connection status\n  - Green dot for connected\n  - Yellow dot for connecting\n  - Red dot for disconnected\n  - Status text visible on larger screens (hidden on mobile)\n\n### Integration\n- Header is now automatically included in MainLayout\n- Can be customized via `header` prop or hidden via `showHeader={false}`\n\n### Tests\n- 9 unit tests covering all functionality\n- Updated App.test.tsx and e2e tests to account for connection status appearing in multiple places","created_at":"2026-01-18T19:53:40Z"}]}
{"id":"rui-9dq.6","title":"Create StatusBar component","description":"Bottom bar showing: run status (● Running), repo/branch, token usage (↓in ↑out), iteration progress bar with count.","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-18T20:14:53.398933+01:00","created_by":"Herb Caudill","updated_at":"2026-01-18T20:57:24.299671+01:00","closed_at":"2026-01-18T20:57:24.299671+01:00","close_reason":"Closed","dependencies":[{"issue_id":"rui-9dq.6","depends_on_id":"rui-9dq","type":"parent-child","created_at":"2026-01-18T20:14:53.399497+01:00","created_by":"Herb Caudill"}],"comments":[{"id":10,"issue_id":"rui-9dq.6","author":"Herb Caudill","text":"## Summary\n\nImplemented the StatusBar component which displays:\n\n- **Run Status Indicator**: Shows current Ralph status (Stopped/Starting/Running/Stopping) with color-coded indicator dot\n- **Repository/Branch Display**: Shows workspace repo name and current git branch with git branch icon\n- **Token Usage Display**: Shows input/output token counts with ↓/↑ arrows, formatted with k/M suffixes for readability\n- **Iteration Progress Bar**: Visual progress bar with count (X/Y) when iterations are active\n\n### Store Updates\nExtended the Zustand store with:\n- `branch` state and `setBranch` action\n- `tokenUsage` state with `setTokenUsage` and `addTokenUsage` actions\n- `iteration` state with `setIteration` action\n- New selectors: `selectBranch`, `selectTokenUsage`, `selectIteration`\n\n### Files Changed\n- `src/components/layout/StatusBar.tsx` - New component\n- `src/components/layout/StatusBar.test.tsx` - 15 unit tests\n- `src/components/layout/index.ts` - Export StatusBar\n- `src/store/index.ts` - Extended state and actions\n- `src/store/index.test.ts` - 7 new tests for store extensions","created_at":"2026-01-18T19:57:20Z"}]}
{"id":"rui-9m2","title":"tighten up the leading on assistant text","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-19T18:19:33.122046+01:00","updated_at":"2026-01-19T18:24:29.024651+01:00","closed_at":"2026-01-19T18:24:29.024651+01:00","close_reason":"Closed","comments":[{"id":44,"issue_id":"rui-9m2","author":"Herb Caudill","text":"## Changes Made\n\nTightened the line-height (leading) on assistant text paragraphs:\n\n- Changed `prose-p:leading-relaxed` to `prose-p:leading-snug` in `AssistantText.tsx`\n- This reduces line-height from 1.625 to 1.375, creating more compact text that is still readable with the serif font\n\nThe change affects all assistant text rendered via the `AssistantText` component.","created_at":"2026-01-19T17:24:25Z"}]}
{"id":"rui-9to","title":"TypeScript build errors in story files and vite.config.ts","status":"closed","priority":1,"issue_type":"bug","owner":"herb@devresults.com","created_at":"2026-01-19T18:24:01.856286+01:00","created_by":"Herb Caudill","updated_at":"2026-01-19T18:26:37.03928+01:00","closed_at":"2026-01-19T18:26:37.03928+01:00","close_reason":"Closed","comments":[{"id":43,"issue_id":"rui-9to","author":"Herb Caudill","text":"## Build Errors\n\nRunning `pnpm build` fails with the following TypeScript errors:\n\n```\nsrc/components/tasks/TaskCard.stories.tsx(86,7): error TS2353: Object literal may only specify known properties, and 'defaultExpanded' does not exist in type 'TaskCardTask'.\nsrc/components/tasks/TaskList.stories.tsx(54,7): error TS2353: Object literal may only specify known properties, and 'other' does not exist in type 'Partial\u003cRecord\u003cTaskGroup, boolean\u003e\u003e'.\nsrc/components/tasks/TaskList.stories.tsx(66,7): error TS2353: Object literal may only specify known properties, and 'other' does not exist in type 'Partial\u003cRecord\u003cTaskGroup, boolean\u003e\u003e'.\nsrc/components/tasks/TaskList.stories.tsx(111,7): error TS2353: Object literal may only specify known properties, and 'other' does not exist in type 'Partial\u003cRecord\u003cTaskGroup, boolean\u003e\u003e'.\nvite.config.ts(26,33): error TS6133: 'err' is declared but its value is never read.\n```\n\nThese need to be fixed for production builds to work.","created_at":"2026-01-19T17:24:07Z"},{"id":45,"issue_id":"rui-9to","author":"Herb Caudill","text":"## Summary of Changes\n\nFixed all TypeScript build errors that were preventing production builds:\n\n### TaskCard.stories.tsx\n- Removed invalid `defaultExpanded` property from the task object in the `WithDescription` story. This property belongs on the story args (props), not inside the `TaskCardTask` type.\n\n### TaskList.stories.tsx  \n- Replaced invalid `other` group key with `closed` in three stories (`AllGroupsExpanded`, `AllGroupsCollapsed`, `ShowEmptyGroups`). The `TaskGroup` type only supports: `blocked`, `ready`, `in_progress`, `closed`.\n\n### vite.config.ts\n- Prefixed the unused `err` parameter with underscore (`_err`) in the WebSocket proxy error handler to satisfy TypeScript's `noUnusedLocals` check.\n\n**Build verification:** `pnpm build` now completes successfully.\n**Test verification:** All 473 unit tests and 2 e2e tests pass.","created_at":"2026-01-19T17:26:33Z"}]}
{"id":"rui-a2g","title":"Add keyboard hotkeys for all actions","description":"Full keyboard coverage:\n- Agent control (start, pause, stop, stop-after-current)\n- Navigation (move between tasks, focus sidebar/main)\n- Task management (create, edit, change status)\n\nStyle: VS Code-style (Cmd/Ctrl+Shift combos)\nConfig: Define hotkeys in a JSON file in the repo (not a settings UI)","status":"closed","priority":2,"issue_type":"feature","owner":"herb@devresults.com","created_at":"2026-01-18T20:47:54.550902+01:00","created_by":"Herb Caudill","updated_at":"2026-01-18T21:57:58.494466+01:00","closed_at":"2026-01-18T21:57:58.494466+01:00","close_reason":"Closed","dependencies":[{"issue_id":"rui-a2g","depends_on_id":"rui-4rt","type":"blocks","created_at":"2026-01-18T20:48:22.515398+01:00","created_by":"Herb Caudill"}],"comments":[{"id":24,"issue_id":"rui-a2g","author":"Herb Caudill","text":"## Implementation Summary\n\nImplemented VS Code-style keyboard hotkeys for ralph-ui.\n\n### Files Created\n- `src/config/hotkeys.json` - JSON configuration file defining all hotkeys\n- `src/config/hotkeys.schema.json` - JSON Schema for configuration validation\n- `src/config/index.ts` - TypeScript exports for hotkey config\n- `src/hooks/useHotkeys.ts` - Hook for global keyboard event handling\n- `src/hooks/useHotkeys.test.ts` - Comprehensive tests (16 test cases)\n\n### Files Modified\n- `src/store/index.ts` - Added sidebar state management (sidebarOpen, toggleSidebar)\n- `src/components/layout/MainLayout.tsx` - Now uses store for sidebar, exposes focus methods via ref\n- `src/components/chat/ChatInput.tsx` - Added ref handle for focus control\n- `src/App.tsx` - Integrated useHotkeys with all handler callbacks\n\n### Implemented Hotkeys\n| Shortcut | Action |\n|----------|--------|\n| Cmd+Enter | Start Ralph |\n| Cmd+. | Stop Ralph |\n| Cmd+Shift+. | Stop after current (placeholder) |\n| Cmd+/ | Pause (placeholder) |\n| Cmd+B | Toggle sidebar |\n| Cmd+1 | Focus sidebar |\n| Cmd+2 | Focus main content |\n| Cmd+K | Focus quick task input |\n| Cmd+L | Focus chat input |\n\n### Technical Details\n- Platform detection for Mac vs Windows/Linux (Cmd vs Ctrl)\n- Hotkeys work in input fields for agent control and navigation\n- Prevents default and stops propagation when handler fires\n- Uses event capturing phase for reliable handling\n- All hotkeys display with proper symbols (⌘⇧⌃⌥ on Mac)","created_at":"2026-01-18T20:57:55Z"}]}
{"id":"rui-a2r","title":"Change the \"Type a message...\" placeholder to \"Send Ralph a message...\"","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-19T20:17:47.129314+01:00","created_by":"Herb Caudill","updated_at":"2026-01-19T21:06:59.676925+01:00","closed_at":"2026-01-19T21:06:59.676925+01:00","close_reason":"Closed","comments":[{"id":87,"issue_id":"rui-a2r","author":"Herb Caudill","text":"Changed the default placeholder text in the ChatInput component from 'Type a message...' to 'Send Ralph a message...'. Updated in three places: the App.tsx usage, the ChatInput.tsx default prop value and JSDoc, and the ChatInput.test.tsx test expectation.","created_at":"2026-01-19T20:06:55Z"}]}
{"id":"rui-aet","title":"it doesn't seem like the messages I send to ralph are getting through","status":"closed","priority":0,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-19T20:09:39.147628+01:00","created_by":"Herb Caudill","updated_at":"2026-01-19T20:43:15.686442+01:00","closed_at":"2026-01-19T20:43:15.686442+01:00","close_reason":"Fixed by wrapping user messages in JSON format that Ralph CLI expects"}
{"id":"rui-alz","title":"in the status bar show how long ralph has been running","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-19T19:04:30.732017+01:00","created_by":"Herb Caudill","updated_at":"2026-01-19T20:09:56.050568+01:00","closed_at":"2026-01-19T20:09:56.050568+01:00","close_reason":"Closed","comments":[{"id":72,"issue_id":"rui-alz","author":"Herb Caudill","text":"Added RunDuration component to StatusBar that shows elapsed time while Ralph is running. Added runStartedAt state tracking in store that starts when Ralph transitions to running and clears when stopped.","created_at":"2026-01-19T19:09:52Z"}]}
{"id":"rui-an8","title":"Fix failing tests: TaskSidebar.test.tsx and App.test.tsx","description":"## Summary\nTests are failing due to TaskSidebar component refactoring. The tests expect a 'Tasks' heading and header styling that no longer exist in the component.\n\n## Failing Tests\n\n### TaskSidebar.test.tsx (4 failures)\n1. **renders with tasks heading** - expects `screen.getByRole('heading', { name: 'Tasks' })` but component has no heading\n2. **renders task icon** - expects an icon in a heading that doesn't exist\n3. **does not render quickInput area when not provided** - expects only 1 `.border-b` element (header), but there's no header\n4. **header has correct border styling** - expects header with `border-b` and `border-border` classes\n\n### App.test.tsx (1 failure)\n1. **renders the main layout with sidebar and status bar** - expects `screen.getByText('Tasks')` which no longer exists\n\n## Root Cause\nThe TaskSidebar component was refactored to be a pure layout component (slots pattern with quickInput and taskList props) without its own header. The tests were not updated to reflect this change.\n\n## Fix Options\n1. **Remove heading tests** - If the component intentionally has no heading, remove these tests\n2. **Add heading back** - If heading was removed by mistake, add it back to the component\n3. **Move heading responsibility** - Tests should check for 'Tasks' heading in a different location (e.g., in the actual app usage or parent component)","status":"closed","priority":1,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-18T23:29:58.958745+01:00","created_by":"Herb Caudill","updated_at":"2026-01-18T23:32:49.205522+01:00","closed_at":"2026-01-18T23:32:49.205522+01:00","close_reason":"Closed","comments":[{"id":29,"issue_id":"rui-an8","author":"Herb Caudill","text":"## Fix Summary\n\nFixed 5 failing tests caused by TaskSidebar component refactoring to a pure layout component (slots pattern).\n\n### Changes Made\n\n**src/components/tasks/TaskSidebar.test.tsx**\n- Removed 3 tests that expected non-existent header elements:\n  - 'renders with tasks heading' \n  - 'renders task icon'\n  - 'header has correct border styling'\n- Updated 'does not render quickInput area when not provided' test to expect 0 border-b elements (since there's no header)\n\n**src/App.test.tsx**\n- Changed assertion from `screen.getByText('Tasks')` to `screen.getByRole('complementary', { name: 'Task sidebar' })`\n\n**e2e/app.spec.ts**\n- Updated all 'Tasks' heading assertions to use complementary role for sidebar\n\n**src/components/layout/WorkspacePicker.tsx**\n- Removed unused PlusIcon component (was causing build failure)\n\n### Verification\n- All 457 unit tests pass\n- All 2 e2e tests pass\n- Build succeeds","created_at":"2026-01-18T22:32:45Z"}]}
{"id":"rui-apy","title":"omit the prefix from task ids, e.g. in this repo show `vyr` instead of `rui-vyr`","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-20T02:07:41.367783+01:00","created_by":"Herb Caudill","updated_at":"2026-01-20T02:49:52.902666+01:00","closed_at":"2026-01-20T02:49:52.902666+01:00","close_reason":"Closed","comments":[{"id":147,"issue_id":"rui-apy","author":"Herb Caudill","text":"## Changes Made\n\n- Created `stripTaskPrefix` utility function in `src/lib/stripTaskPrefix.ts` (already existed but wasn't connected)\n- Exported `stripTaskPrefix` from `src/lib/utils.ts`\n- Updated `TaskHoverCard` to display task IDs and parent IDs without the prefix\n- Updated `TaskDetailsDialog` to display task IDs and parent IDs without the prefix\n- Updated `TaskIdLink` to display clickable task ID links without the prefix (still passes full ID to handlers)\n- Added comprehensive tests for `stripTaskPrefix` utility\n- Updated `TaskIdLink` tests to reflect the new display behavior\n\nThe issue prefix is still used internally for matching and API calls, but the displayed text is now cleaner (e.g., `4vp` instead of `rui-4vp`).","created_at":"2026-01-20T01:49:48Z"}]}
{"id":"rui-ar2","title":"Test failure: Tab key toggle focus test in App.test.tsx","description":"The test 'Tab key toggles focus between task input and chat input' in src/App.test.tsx is failing.\n\n**Error:**\n```\nAssertionError: expected \u003ctextarea …(4)\u003e\u003c/textarea\u003e to be \u003ctextarea …(6)\u003e\u003c/textarea\u003e // Object.is equality\n\nThe test expects Tab to switch focus from task input to chat input, but after pressing Tab, the focus remains on the task input instead of moving to the chat input.\n\nExpected element: chat input textarea with aria-label=\"Message input\"\nActual element: task input textarea with aria-label=\"New task title\"\n```\n\n**Location:** src/App.test.tsx line 114\n\n**Test code:**\n```typescript\n// Press Tab - should switch to chat input\nfireEvent.keyDown(taskInput, { key: \"Tab\" })\nexpect(document.activeElement).toBe(chatInput)\n```\n\nThis suggests that either:\n1. The Tab key handling logic is not working correctly\n2. The test setup is incorrect\n3. The focus management changed but tests weren't updated","status":"closed","priority":1,"issue_type":"bug","owner":"herb@devresults.com","created_at":"2026-01-20T02:04:05.470605+01:00","created_by":"Herb Caudill","updated_at":"2026-01-20T02:05:49.337573+01:00","closed_at":"2026-01-20T02:05:49.337573+01:00","close_reason":"Closed","comments":[{"id":137,"issue_id":"rui-ar2","author":"Herb Caudill","text":"Test is now passing. All 799 unit tests pass including the Tab key focus test in App.test.tsx. The issue appears to have been fixed in a previous commit. Closing.","created_at":"2026-01-20T01:05:49Z"}]}
{"id":"rui-azk","title":"put the spinner to the left. Instead of the rotating disc, alternate between the 6 topology-* icons in tabler icons, while spinning them","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-19T19:11:14.74985+01:00","created_by":"Herb Caudill","updated_at":"2026-01-19T21:26:55.608951+01:00","closed_at":"2026-01-19T21:26:55.608951+01:00","close_reason":"Closed","comments":[{"id":94,"issue_id":"rui-azk","author":"Herb Caudill","text":"## Implementation\n\n- Created new  component in `src/components/ui/TopologySpinner.tsx`\n- Uses 6 tabler topology icons: IconTopologyStar, IconTopologyStar2, IconTopologyStar3, IconTopologyRing, IconTopologyRing2, IconTopologyRing3\n- Icons cycle every 300ms by default (configurable via `interval` prop)\n- Each icon spins using Tailwind's `animate-spin` class\n- Updated `EventStream.tsx` to use TopologySpinner instead of IconLoader\n- Positioned spinner to the left (`justify-start`) instead of center\n- Added comprehensive tests and Storybook stories","created_at":"2026-01-19T20:26:52Z"}]}
{"id":"rui-bgq","title":"Fix systemPrompt.test.ts test failures","description":"The tests in server/systemPrompt.test.ts expect the default prompt to contain '# Task Management Assistant' but the actual content in server/prompts/task-chat-system.md was changed to start with 'You are a task management assistant...' without updating the tests.\n\nFailing tests:\n- loadSystemPrompt \u003e loads default prompt when no custom prompt exists\n- initSystemPrompt \u003e creates .ralph directory and copies default prompt\n\nBoth tests check for the string '# Task Management Assistant' which no longer exists in the default prompt file.","status":"closed","priority":1,"issue_type":"bug","owner":"herb@devresults.com","created_at":"2026-01-19T23:12:28.565461+01:00","created_by":"Herb Caudill","updated_at":"2026-01-19T23:16:23.244426+01:00","closed_at":"2026-01-19T23:16:23.244426+01:00","close_reason":"Closed","comments":[{"id":125,"issue_id":"rui-bgq","author":"Herb Caudill","text":"This issue has already been resolved - all systemPrompt tests are passing.","created_at":"2026-01-19T22:16:23Z"}]}
{"id":"rui-bnb","title":"VS Code theme support","status":"open","priority":3,"issue_type":"epic","owner":"herb@devresults.com","created_at":"2026-01-19T19:18:42.084588+01:00","created_by":"Herb Caudill","updated_at":"2026-01-19T19:18:42.084588+01:00"}
{"id":"rui-cgf","title":"after adding a task the task input should retain focus","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-19T20:20:11.476218+01:00","created_by":"Herb Caudill","updated_at":"2026-01-19T21:12:37.894827+01:00","closed_at":"2026-01-19T21:12:37.894827+01:00","close_reason":"Closed","comments":[{"id":89,"issue_id":"rui-cgf","author":"Herb Caudill","text":"Fixed task input focus retention after task creation.\n\n## Changes\n\n- Modified `QuickTaskInput` to await the `onTaskCreated` callback before restoring focus\n- Used `requestAnimationFrame` to ensure focus is restored after React completes any re-renders triggered by the parent component refreshing the task list\n- Updated test to account for async focus restoration\n\n## Technical Details\n\nThe issue was that when a task was created:\n1. The component would set focus on the textarea\n2. Then call `onTaskCreated` which triggers a task list refresh in the parent\n3. The refresh causes a state update and re-render which was stealing focus\n\nThe fix awaits the callback completion, then uses `requestAnimationFrame` to schedule the focus call after the browser's paint cycle, ensuring it happens after all React re-renders complete.","created_at":"2026-01-19T20:12:34Z"}]}
{"id":"rui-cxn","title":"ThemePicker component","description":"Header dropdown showing all installed VS Code themes grouped by dark/light with hover preview","status":"open","priority":3,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-19T19:19:16.895707+01:00","created_by":"Herb Caudill","updated_at":"2026-01-19T19:19:16.895707+01:00","dependencies":[{"issue_id":"rui-cxn","depends_on_id":"rui-bnb","type":"parent-child","created_at":"2026-01-19T19:19:36.320903+01:00","created_by":"Herb Caudill"},{"issue_id":"rui-cxn","depends_on_id":"rui-5w0","type":"blocks","created_at":"2026-01-19T19:20:00.933224+01:00","created_by":"Herb Caudill"}]}
{"id":"rui-d1x","title":"Auto-expanding chat input","description":"Make the 'send ralph a message' input just one line tall by default but expand to fit the message as user types.","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-19T22:13:30.858711+01:00","created_by":"Herb Caudill","updated_at":"2026-01-19T23:37:37.890973+01:00","closed_at":"2026-01-19T23:37:37.890973+01:00","close_reason":"Closed","comments":[{"id":133,"issue_id":"rui-d1x","author":"Herb Caudill","text":"Implemented auto-expanding chat input:\n\n- Changed the textarea from a fixed 3-row height to start with 1 row\n- Added `adjustTextareaHeight` callback that resets height to 'auto' then sets it to scrollHeight\n- Used `useEffect` to trigger height adjustment whenever message content changes\n- Added `overflow-hidden` class to hide scrollbar during auto-resize\n- Added tests for auto-expanding behavior (starts with 1 row, adjusts on content change, resets when cleared)","created_at":"2026-01-19T22:37:34Z"}]}
{"id":"rui-dco","title":"Pick up accent color from peacock settings","description":"Read peacock color from .vscode/settings.json (peacock.color key).\n\nFallback to black if not found.\n\nPurpose: Visual indicator to distinguish which project you're looking at.","status":"closed","priority":2,"issue_type":"feature","owner":"herb@devresults.com","created_at":"2026-01-18T20:47:55.684249+01:00","created_by":"Herb Caudill","updated_at":"2026-01-18T21:50:42.926879+01:00","closed_at":"2026-01-18T21:50:42.926879+01:00","close_reason":"Closed","dependencies":[{"issue_id":"rui-dco","depends_on_id":"rui-4rt","type":"blocks","created_at":"2026-01-18T20:48:23.537208+01:00","created_by":"Herb Caudill"}],"comments":[{"id":23,"issue_id":"rui-dco","author":"Herb Caudill","text":"## Implementation Summary\n\nAdded peacock accent color support to distinguish projects visually.\n\n### Changes:\n\n**Server** (`server/index.ts`):\n- Added `readPeacockColor()` function that reads `.vscode/settings.json` and extracts the `peacock.color` value\n- Added `accentColor` field to the `/api/workspace` endpoint response\n- Falls back to `null` when peacock settings don't exist or are invalid\n\n**Frontend Store** (`src/store/index.ts`):\n- Added `accentColor` state (string | null)\n- Added `setAccentColor` action\n- Added `selectAccentColor` selector\n\n**WorkspacePicker** (`src/components/layout/WorkspacePicker.tsx`):\n- Updated to extract `accentColor` from workspace API response\n- Sets accent color in store when workspace info is fetched\n\n**Header** (`src/components/layout/Header.tsx`):\n- Added 4px colored bar at the top of the header\n- Uses accent color from store, falls back to black (`#000000`)\n- Bar has `data-testid=\"accent-bar\"` for testing\n\n### Tests:\n- Added `server/peacock.test.ts` with 6 tests for `readPeacockColor()`\n- Added 4 tests to Header.test.tsx for accent color bar behavior\n- Added 2 tests to store/index.test.ts for accent color state","created_at":"2026-01-18T20:50:39Z"}]}
{"id":"rui-e7s","title":"for the list of closed tasks, add a dropdown to the right of the 'Closed' label to choose between:\n- past hour\n- past day\n- past week\n- all time","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-19T18:34:11.500479+01:00","created_by":"Herb Caudill","updated_at":"2026-01-19T19:26:58.744088+01:00","closed_at":"2026-01-19T19:26:58.744088+01:00","close_reason":"Closed","comments":[{"id":66,"issue_id":"rui-e7s","author":"Herb Caudill","text":"This feature was already fully implemented. The closed tasks section has a dropdown with the following time filter options: Past hour, Past day, Past week, and All time. The implementation includes:\n- Time filter state management with localStorage persistence\n- Dropdown UI integrated into the Closed group header\n- Filtering logic that respects the closed_at timestamp\n- Comprehensive test coverage (tests in TaskList.test.tsx lines 592-736)","created_at":"2026-01-19T18:26:54Z"}]}
{"id":"rui-ea7","title":"move the status bar to the top of the right-hand panel. Add the name of the task currently being worked on","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-19T18:55:57.367667+01:00","created_by":"Herb Caudill","updated_at":"2026-01-19T20:01:32.638318+01:00","closed_at":"2026-01-19T20:01:32.638318+01:00","close_reason":"Closed","comments":[{"id":70,"issue_id":"rui-ea7","author":"Herb Caudill","text":"This task was already completed in a prior update. The status bar is now positioned at the top of the right-hand panel (main content area) in the AgentView component in App.tsx (lines 116-117, 142-188). It displays:\n\n- **Left side**: Current task ID and content (or 'No task in progress' when idle)\n- **Right side**: Connection status indicator (green/yellow/red dot with label) and Ralph status\n\nDuring this session, I fixed a build error caused by unused imports in `src/lib/ralphConnection.ts` - removed `RALPH_STATUSES` and `RalphStatus` that were imported but not used.","created_at":"2026-01-19T19:01:29Z"}]}
{"id":"rui-ecy","title":"Fixed sidebar headings with scrollable sections","description":"Task sidebar should always show all status headings (Backlog, To Do, In Progress, Done, etc.). Scrolling should happen within each status section, not the whole sidebar.","status":"open","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-19T22:55:24.974262+01:00","created_by":"Herb Caudill","updated_at":"2026-01-19T23:33:14.706638+01:00"}
{"id":"rui-eep","title":"in the add task input, enter should submit and shift-enter should create a new line","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-19T19:27:10.826066+01:00","created_by":"Herb Caudill","updated_at":"2026-01-19T20:17:20.351803+01:00","closed_at":"2026-01-19T20:17:20.351803+01:00","close_reason":"Closed","comments":[{"id":75,"issue_id":"rui-eep","author":"Herb Caudill","text":"Changed QuickTaskInput keyboard behavior:\n\n- **Enter** now submits the task (previously required Cmd/Ctrl+Enter)\n- **Shift+Enter** creates a new line in the textarea\n\nUpdated JSDoc and all related tests to reflect this change.","created_at":"2026-01-19T19:17:16Z"}]}
{"id":"rui-egx","title":"use the folder-filled icon for workspaces and color it according to the workspace's accent color - both when showing the selected one and in the dropdown (replacing the colored dots)","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-19T18:30:57.848854+01:00","created_by":"Herb Caudill","updated_at":"2026-01-19T18:52:01.166394+01:00","closed_at":"2026-01-19T18:52:01.166394+01:00","close_reason":"Closed","comments":[{"id":55,"issue_id":"rui-egx","author":"Herb Caudill","text":"## Changes Made\n\nReplaced the colored dot indicators with filled folder icons that are colored according to each workspace's accent color:\n\n1. **Replaced FolderIcon with FolderFilledIcon** - Changed from a stroked outline folder to a solid filled folder icon\n2. **Added color prop to icon** - The new icon accepts a `color` prop to set the fill color directly\n3. **Selected workspace button** - The folder icon is now colored with the workspace's accent color (falls back to muted-foreground when no accent color is set)\n4. **Dropdown list items** - Replaced the small colored dots with 14px folder icons colored by each workspace's accent color\n\nThe result is a more cohesive visual design where folders consistently represent workspaces throughout the UI, with their accent colors providing visual differentiation.","created_at":"2026-01-19T17:51:57Z"}]}
{"id":"rui-el8","title":"Add status color CSS variables","description":"Add --status-success, --status-warning, --status-error, --status-info, --status-neutral CSS variables to index.css","status":"open","priority":3,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-19T19:19:14.071517+01:00","created_by":"Herb Caudill","updated_at":"2026-01-19T19:19:14.071517+01:00","dependencies":[{"issue_id":"rui-el8","depends_on_id":"rui-bnb","type":"parent-child","created_at":"2026-01-19T19:19:36.317638+01:00","created_by":"Herb Caudill"}]}
{"id":"rui-eou","title":"Task progress bar in sidebar","description":"At the bottom of the task sidebar, show a progress bar where the numerator is the number of closed tasks, and the denominator is the number of tasks at the time that ralph was started plus any new tasks added since ralph was started.","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-19T21:14:16.284972+01:00","created_by":"Herb Caudill","updated_at":"2026-01-20T02:59:58.00004+01:00","closed_at":"2026-01-20T02:59:58.00004+01:00","close_reason":"Closed","comments":[{"id":151,"issue_id":"rui-eou","author":"Herb Caudill","text":"## Changes Made\n\nAdded a task progress bar at the bottom of the task sidebar that displays task completion progress.\n\n### Implementation Details\n\n1. **Store Changes** (`src/store/index.ts`):\n   - Added `initialTaskCount` state to track the number of tasks when Ralph starts\n   - Updated `setRalphStatus` to capture initial count when transitioning to running, and clear it when stopped\n   - Added `selectInitialTaskCount` selector\n\n2. **TaskProgressBar Component** (`src/components/tasks/TaskProgressBar.tsx`):\n   - Shows progress bar with closed tasks / total tasks\n   - Total = max(initial count, current count) to handle new tasks added during run\n   - Only visible when Ralph is running, paused, or stopping_after_current\n   - Full accessibility support (progressbar role, aria attributes)\n\n3. **TaskSidebar Integration** (`src/components/tasks/TaskSidebar.tsx`):\n   - Progress bar renders at the bottom of the sidebar with border-top separator\n\n### Tests Added\n- 15 tests for TaskProgressBar covering visibility, progress calculation, accessibility, and styling\n- 4 tests for store initialTaskCount behavior","created_at":"2026-01-20T01:59:54Z"}]}
{"id":"rui-fcf","title":"TaskSidebar test failure: 'does not render quickInput area when not provided' expects wrong border count","description":"## Summary\n\nThe test `does not render quickInput area when not provided` in `TaskSidebar.test.tsx` is failing.\n\n## Root Cause\n\nThe test expects zero `.border-b` elements when `quickInput` is not provided, but the component was updated to include a header that always renders with a `border-b` class.\n\n**Test code (line 30-34):**\n```tsx\nit('does not render quickInput area when not provided', () =\u003e {\n  const { container } = render(\u003cTaskSidebar /\u003e)\n  // No border-b elements when quickInput not provided (component has no header)\n  const borderBElements = container.querySelectorAll('.border-b')\n  expect(borderBElements).toHaveLength(0)\n})\n```\n\n**Component now has a permanent header (line 37):**\n```tsx\n\u003cdiv className=\"border-border flex shrink-0 items-center gap-2 border-b px-4 py-3\"\u003e\n  ...\n  \u003ch2 className=\"text-sm font-semibold\"\u003eTasks\u003c/h2\u003e\n\u003c/div\u003e\n```\n\n## Fix\n\nUpdate the test to expect 1 `border-b` element (the header) when `quickInput` is not provided, and update the comment to reflect that the component now has a header.\n\n## Files\n\n- `src/components/tasks/TaskSidebar.test.tsx`","status":"closed","priority":1,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-18T23:38:49.993534+01:00","created_by":"Herb Caudill","updated_at":"2026-01-18T23:39:52.804618+01:00","closed_at":"2026-01-18T23:39:52.804618+01:00","close_reason":"Closed","comments":[{"id":31,"issue_id":"rui-fcf","author":"Herb Caudill","text":"## Fix Applied\n\nUpdated the test `does not render quickInput area when not provided` in `TaskSidebar.test.tsx`:\n\n- Changed expected `.border-b` element count from 0 to 1\n- Updated comment to reflect that the header now has a `border-b` class\n\nThe test was failing because the component was updated to include a permanent header with `border-b` styling, but the test still expected no `border-b` elements when `quickInput` was not provided.\n\n**Commit:** 0f96d9e","created_at":"2026-01-18T22:39:49Z"}]}
{"id":"rui-fh0","title":"Issue dialog should show child tasks and blockers","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-19T22:18:13.850409+01:00","created_by":"Herb Caudill","updated_at":"2026-01-20T02:52:23.602519+01:00","closed_at":"2026-01-20T02:52:23.602519+01:00","close_reason":"Closed","comments":[{"id":149,"issue_id":"rui-fh0","author":"Herb Caudill","text":"Closed as duplicate - covered by rui-w2g.7","created_at":"2026-01-20T01:52:23Z"}]}
{"id":"rui-fow","title":"TaskIdLink: only match task IDs with the repo's prefix (e.g. rui-xxx), not arbitrary hyphenated words","status":"closed","priority":1,"issue_type":"bug","owner":"herb@devresults.com","created_at":"2026-01-20T02:22:30.04588+01:00","created_by":"Herb Caudill","updated_at":"2026-01-20T02:37:09.202889+01:00","closed_at":"2026-01-20T02:37:09.202889+01:00","close_reason":"Closed","comments":[{"id":145,"issue_id":"rui-fow","author":"Herb Caudill","text":"## Changes\n\n- Modified `TaskIdLink` component to use the workspace's configured issue prefix from the store (`issuePrefix`)\n- Created `createTaskIdPattern()` helper that dynamically builds a regex for the current prefix\n- Updated `containsTaskId()` utility to require a prefix parameter\n- Now only task IDs matching the configured prefix (e.g., `rui-xxx` when prefix is `rui`) are linkified\n- Arbitrary hyphenated words like `self-contained` or `high-quality` are no longer incorrectly linkified\n\n## Tests\n\n- Added tests for prefix-specific matching behavior\n- Added tests verifying non-matching prefixes don't create links\n- Added test for graceful handling when no prefix is configured","created_at":"2026-01-20T01:37:05Z"}]}
{"id":"rui-fsd","title":"Add pause support","description":"Enable pause button and implement handlePause when ralph CLI supports pause. Currently the button is always disabled. Locations: ControlBar.tsx getButtonStates(), handlePause(), and App.tsx handleAgentPause().","status":"closed","priority":2,"issue_type":"feature","owner":"herb@devresults.com","created_at":"2026-01-18T23:05:24.176869+01:00","created_by":"Herb Caudill","updated_at":"2026-01-19T01:36:47.114139+01:00","closed_at":"2026-01-19T01:36:47.114139+01:00","close_reason":"Closed","comments":[{"id":34,"issue_id":"rui-fsd","author":"Herb Caudill","text":"## Changes\n- Added `pause()` and `resume()` methods to RalphManager using SIGTSTP/SIGCONT signals\n- Added 'paused' status to RalphStatus type in store and server\n- Added /api/pause and /api/resume REST endpoints\n- Updated ControlBar:\n  - Enable pause button when running\n  - Toggle between Pause/Resume icons and labels based on state  \n  - Enable stop button when paused\n- Updated StatusBar with orange indicator for paused state\n- Updated hotkey description for Cmd+/ (pause/resume)\n- Added comprehensive tests for pause/resume functionality\n\n## Files changed\n- server/RalphManager.ts\n- server/index.ts\n- src/store/index.ts\n- src/App.tsx\n- src/components/controls/ControlBar.tsx\n- src/components/layout/StatusBar.tsx\n- src/config/hotkeys.json\n- Plus test files","created_at":"2026-01-19T00:36:43Z"}]}
{"id":"rui-fwl","title":"fix the act() test warnings","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-19T18:23:32.620916+01:00","updated_at":"2026-01-19T18:32:41.556276+01:00","closed_at":"2026-01-19T18:32:41.556276+01:00","close_reason":"Closed","comments":[{"id":46,"issue_id":"rui-fwl","author":"Herb Caudill","text":"Fixed the act() test warnings by:\n\n1. **Adding waitFor() calls** after render in tests that don't properly wait for async fetch operations to complete. Components like WorkspacePicker, Header, MainLayout, and App all fetch workspace info on mount, so tests need to wait for these operations.\n\n2. **Wrapping store method calls in act()** for tests that directly call zustand store methods (like `setAccentColor`) that trigger React state updates.\n\n3. **Properly mocking workspace responses** in tests that depend on accent color behavior to ensure the fetch doesn't overwrite the test's expected state.\n\nFiles modified:\n- `src/App.test.tsx`\n- `src/components/layout/Header.test.tsx`\n- `src/components/layout/MainLayout.test.tsx`\n- `src/components/layout/WorkspacePicker.test.tsx`\n\nAll 473 unit tests continue to pass with no act() warnings.","created_at":"2026-01-19T17:32:37Z"}]}
{"id":"rui-g0q","title":"Use an input group for messages to Ralph. The input should be a text area and should not have its own border. It should behave the same as the task input (enter submits, shift-enter adds a new line)","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-19T20:16:44.182617+01:00","created_by":"Herb Caudill","updated_at":"2026-01-19T22:06:15.237355+01:00","closed_at":"2026-01-19T22:06:15.237355+01:00","close_reason":"Closed","comments":[{"id":107,"issue_id":"rui-g0q","author":"Herb Caudill","text":"## Changes\n\n- Converted ChatInput from single-line `\u003cinput\u003e` to multi-line `\u003ctextarea\u003e`\n- Removed border styling (now borderless with transparent background)\n- Added support for Shift+Enter to add new lines, Enter to submit\n- Moved submit button below textarea, aligned to right\n- Updated styling to match QuickTaskInput component pattern\n- Updated tests to verify new borderless styling classes","created_at":"2026-01-19T21:06:11Z"}]}
{"id":"rui-ged","title":"get rid of the pathname under the workspace name in the dropdown","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-19T18:31:47.002608+01:00","created_by":"Herb Caudill","updated_at":"2026-01-19T18:45:39.594182+01:00","closed_at":"2026-01-19T18:45:39.594182+01:00","close_reason":"Closed","comments":[{"id":52,"issue_id":"rui-ged","author":"Herb Caudill","text":"Removed the pathname display from workspace dropdown items in WorkspacePicker.tsx. Previously each workspace in the dropdown showed both the name and the path (like ~/Code/project). Now it only shows the workspace name, simplifying the UI while the accent color dot and checkmark still indicate the workspace identity and active status.","created_at":"2026-01-19T17:45:35Z"}]}
{"id":"rui-h9h","title":"Add find feature (Cmd+F)","description":"Add find feature with Cmd+F - search bar between add task input and task list","status":"in_progress","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-19T22:21:43.545394+01:00","created_by":"Herb Caudill","updated_at":"2026-01-20T03:29:21.677549+01:00","comments":[{"id":113,"issue_id":"rui-h9h","author":"Herb Caudill","text":"Search should filter the task list live as the user types","created_at":"2026-01-19T21:22:02Z"}]}
{"id":"rui-hjx","title":"refactor so that all utility functions are in their own file (one file, one function)","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-19T20:27:47.55908+01:00","created_by":"Herb Caudill","updated_at":"2026-01-19T21:17:15.92794+01:00","closed_at":"2026-01-19T21:17:15.92794+01:00","close_reason":"Closed","comments":[{"id":91,"issue_id":"rui-hjx","author":"Herb Caudill","text":"## Changes\n\n- Split `src/lib/utils.ts` into individual files following one-file-one-function pattern:\n  - `cn.ts` - Class name merging utility using clsx + tailwind-merge\n  - `getContrastingColor.ts` - WCAG-based color contrast calculation (includes private `getLuminance` helper)\n  - `toRelativePath.ts` - Workspace path normalization utility\n\n- `utils.ts` is now a barrel file that re-exports all utilities, maintaining backwards compatibility for all existing imports\n\n- Tests split into corresponding individual test files:\n  - `cn.test.ts` (3 tests)\n  - `getContrastingColor.test.ts` (4 tests)\n  - `toRelativePath.test.ts` (7 tests)\n\nAll 565 tests pass, build succeeds.","created_at":"2026-01-19T20:17:12Z"}]}
{"id":"rui-hob","title":"show the closed tasks in the order that they were closed","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-19T18:57:48.822417+01:00","created_by":"Herb Caudill","updated_at":"2026-01-19T19:10:33.705027+01:00","closed_at":"2026-01-19T19:10:33.705027+01:00","close_reason":"Closed","comments":[{"id":62,"issue_id":"rui-hob","author":"Herb Caudill","text":"Implemented sorting of closed tasks by `closed_at` timestamp (most recently closed first).\n\n**Changes:**\n- Added `closed_at` field to `BdIssue` interface in `server/BdProxy.ts`\n- Added `closed_at` field to `TaskCardTask` interface in `src/components/tasks/TaskCard.tsx`\n- Updated sorting logic in `TaskList.tsx` to sort closed tasks by `closed_at` (descending) instead of by priority\n- Tasks without a `closed_at` timestamp are sorted to the bottom of the closed list\n- Added unit tests to verify the sorting behavior\n\nThis makes it easier to see what was recently completed, with the most recently closed tasks appearing at the top of the Closed section.","created_at":"2026-01-19T18:10:30Z"}]}
{"id":"rui-hsr","title":"clicking a task currently toggles displaying a line underneath it showing the type. we don't need any of that - clicking should just open the dialog","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-19T21:05:10.255774+01:00","created_by":"Herb Caudill","updated_at":"2026-01-19T21:30:00.287373+01:00","closed_at":"2026-01-19T21:30:00.287373+01:00","close_reason":"Closed","comments":[{"id":95,"issue_id":"rui-hsr","author":"Herb Caudill","text":"Removed the inline task expansion behavior from TaskCard. \n\n**Changes made:**\n- Removed `defaultExpanded` prop from TaskCardProps\n- Removed `isExpanded` state and `toggleExpanded` function  \n- Modified `handleClick` to only call `onClick` callback without toggling expansion\n- Removed the expanded details section that showed issue_type, parent, and description\n- Updated JSDoc to reflect the new simpler behavior\n- Updated tests to remove expand/collapse tests and add keyboard navigation tests\n- Updated stories to remove `defaultExpanded` props\n\nNow clicking a task only triggers the `onClick` callback (which opens the TaskDetailsDialog), without showing any inline expanded content.","created_at":"2026-01-19T20:29:56Z"}]}
{"id":"rui-i3g","title":"Theme color mapper","description":"Map VS Code color tokens to app CSS variables with fallback chains in src/lib/theme/mapper.ts","status":"open","priority":3,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-19T19:19:00.913655+01:00","created_by":"Herb Caudill","updated_at":"2026-01-19T19:19:00.913655+01:00","dependencies":[{"issue_id":"rui-i3g","depends_on_id":"rui-bnb","type":"parent-child","created_at":"2026-01-19T19:19:36.312962+01:00","created_by":"Herb Caudill"},{"issue_id":"rui-i3g","depends_on_id":"rui-tzz","type":"blocks","created_at":"2026-01-19T19:19:47.648811+01:00","created_by":"Herb Caudill"},{"issue_id":"rui-i3g","depends_on_id":"rui-nrh","type":"blocks","created_at":"2026-01-19T19:19:47.773188+01:00","created_by":"Herb Caudill"}]}
{"id":"rui-ib2","title":"Test failure: QuickTaskInput localStorage not cleared after successful submission","description":"The test 'clears localStorage after successful submission' in QuickTaskInput.test.tsx is failing.\n\n## Error\n```\nAssertionError: expected 'Task to submit' to be null\n\n- Expected: null\n+ Received: \"Task to submit\"\n\n❯ src/components/tasks/QuickTaskInput.test.tsx:464:49\n```\n\n## Location\n- Test file: `src/components/tasks/QuickTaskInput.test.tsx`\n- Line 464: `expect(localStorage.getItem(STORAGE_KEY)).toBeNull()`\n\n## Context\nThe test expects localStorage to be cleared after a successful form submission, but the value 'Task to submit' is still present in localStorage after the submission completes.","status":"closed","priority":1,"issue_type":"bug","owner":"herb@devresults.com","created_at":"2026-01-19T21:48:30.316723+01:00","created_by":"Herb Caudill","updated_at":"2026-01-19T21:51:01.934073+01:00","closed_at":"2026-01-19T21:51:01.934073+01:00","close_reason":"Closed","comments":[{"id":102,"issue_id":"rui-ib2","author":"Herb Caudill","text":"## Fix Applied\n\nThe test was flaky due to a race condition. The test was:\n\n1. Waiting for the input value to be cleared\n2. Immediately checking that localStorage was null\n\nHowever, localStorage is cleared by a `useEffect` that runs *after* React updates the input value. In some test runs (especially when running the full suite), the effect hadn't executed yet.\n\n### Solution\nWrapped the localStorage assertion in `waitFor()` to ensure the test waits for the effect to complete:\n\n```tsx\n// localStorage is cleared by useEffect after render, so we need to wait for it\nawait waitFor(() =\u003e {\n  expect(localStorage.getItem(STORAGE_KEY)).toBeNull()\n})\n```\n\n### Verification\n- Ran the test in isolation multiple times: all pass\n- Ran the full test suite multiple times: all pass (604/604 tests)","created_at":"2026-01-19T20:50:58Z"}]}
{"id":"rui-j2w","title":"In the event log, when displaying paths, if they're in this repo show the path relative to the repo (so `src/components/ui/dialog.tsx` instead of `Users/herbcaudill/Code/HerbCaudill/ralph-ui/src/components/ui/dialog.tsx`. I think you can do that by just calculating the full path of the repo once (in this case `Users/herbcaudill/Code/HerbCaudill/ralph-ui/` , and just eliminating that from any part of the response","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-19T19:31:01.168468+01:00","created_by":"Herb Caudill","updated_at":"2026-01-19T20:20:29.300687+01:00","closed_at":"2026-01-19T20:20:29.300687+01:00","close_reason":"Closed","comments":[{"id":76,"issue_id":"rui-j2w","author":"Herb Caudill","text":"## Summary of Changes\n\nAdded a `toRelativePath()` utility function in `src/lib/utils.ts` that converts absolute paths to workspace-relative paths when the file is within the current workspace.\n\nUpdated `ToolUseCard.tsx` to:\n- Import and use `toRelativePath` utility \n- Import workspace selector from store\n- Pass workspace to `getToolSummary` function\n- Apply relative path conversion for Read, Edit, and Write tool file paths\n\nAdded comprehensive tests:\n- 7 new tests in `utils.test.ts` for `toRelativePath` function (edge cases like trailing slashes, partial matches, null workspace)\n- 5 new tests in `ToolUseCard.test.tsx` verifying relative path display for Read/Edit/Write tools","created_at":"2026-01-19T19:20:25Z"}]}
{"id":"rui-j9s","title":"Fix failing App.test.tsx Tab key focus test","status":"closed","priority":1,"issue_type":"bug","owner":"herb@devresults.com","created_at":"2026-01-20T02:02:46.994783+01:00","created_by":"Herb Caudill","updated_at":"2026-01-20T02:05:44.584636+01:00","closed_at":"2026-01-20T02:05:44.584636+01:00","close_reason":"Closed","comments":[{"id":136,"issue_id":"rui-j9s","author":"Herb Caudill","text":"This is a duplicate of rui-ar2. Closing.","created_at":"2026-01-20T01:05:44Z"}]}
{"id":"rui-jij","title":"Fix failing systemPrompt tests - default prompt format mismatch","description":"## Summary\nTwo tests in `server/systemPrompt.test.ts` are failing:\n\n1. `loadSystemPrompt \u003e loads default prompt when no custom prompt exists`\n2. `initSystemPrompt \u003e creates .ralph directory and copies default prompt`\n\n## Root Cause\nThe tests expect the default system prompt to contain `# Task Management Assistant` as a markdown header, but the actual default prompt in `server/defaultSystemPrompt.ts` starts with plain text: `You are a task management assistant...`\n\n## Affected Files\n- `server/systemPrompt.test.ts` (lines 66-67)\n- `server/defaultSystemPrompt.ts`\n\n## Resolution Options\n1. Update the default prompt in `defaultSystemPrompt.ts` to start with `# Task Management Assistant`\n2. Update the tests to match the current prompt format\n\nOption 1 is likely preferred as the markdown header provides better structure.","status":"closed","priority":1,"issue_type":"bug","owner":"herb@devresults.com","created_at":"2026-01-19T23:13:58.893704+01:00","created_by":"Herb Caudill","updated_at":"2026-01-19T23:16:29.377614+01:00","closed_at":"2026-01-19T23:16:29.377614+01:00","close_reason":"Closed","comments":[{"id":126,"issue_id":"rui-jij","author":"Herb Caudill","text":"This issue is a duplicate of rui-bgq and has already been resolved - all systemPrompt tests are passing.","created_at":"2026-01-19T22:16:29Z"}]}
{"id":"rui-ktc","title":"Tasks in the sidebar should be ordered by priority, then create date","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-19T22:11:52.812076+01:00","created_by":"Herb Caudill","updated_at":"2026-01-19T23:30:51.673714+01:00","closed_at":"2026-01-19T23:30:51.673714+01:00","close_reason":"Closed","comments":[{"id":131,"issue_id":"rui-ktc","author":"Herb Caudill","text":"Added secondary sorting by `created_at` for tasks in the sidebar. Tasks are now sorted by priority first, then by creation date (oldest first) within the same priority level. This provides consistent, predictable ordering. Changes made:\n\n- Added `created_at` field to `TaskCardTask` interface\n- Updated `sortTasks` function in `TaskList.tsx` to use `created_at` as secondary sort\n- Updated epic sorting to also use `created_at` as secondary sort\n- Added 4 new tests to verify the sorting behavior","created_at":"2026-01-19T22:30:48Z"}]}
{"id":"rui-lem","title":"Make sidebar resizable","status":"closed","priority":2,"issue_type":"feature","owner":"herb@devresults.com","created_at":"2026-01-18T23:30:48.298694+01:00","created_by":"Herb Caudill","updated_at":"2026-01-18T23:38:14.347731+01:00","closed_at":"2026-01-18T23:38:14.347731+01:00","close_reason":"Closed","comments":[{"id":30,"issue_id":"rui-lem","author":"Herb Caudill","text":"## Summary\n\nImplemented a resizable sidebar for the main layout.\n\n### Changes\n- Added `sidebarWidth` state (default: 320px) and `setSidebarWidth` action to the Zustand store\n- Added `selectSidebarWidth` selector\n- Modified `MainLayout` component to:\n  - Use dynamic width from store instead of fixed Tailwind classes\n  - Add a vertical resize handle on the sidebar's right edge\n  - Handle mouse drag events to resize\n  - Clamp width between 200px (min) and 600px (max)\n  - Disable CSS transitions during resize for smooth dragging\n  - Update toggle button position dynamically based on sidebar width\n\n### Tests Added\n- 6 new tests for resizable sidebar functionality in `MainLayout.test.tsx`\n- Updated store tests to verify `sidebarWidth` initial state, set action, and reset behavior\n\n### Files Modified\n- `src/store/index.ts` - Added sidebarWidth state and actions\n- `src/store/index.test.ts` - Added tests for new state\n- `src/components/layout/MainLayout.tsx` - Implemented resize functionality\n- `src/components/layout/MainLayout.test.tsx` - Added resize tests","created_at":"2026-01-18T22:38:09Z"}]}
{"id":"rui-lep","title":"show a progress bar for the context window","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-19T21:11:50.769247+01:00","created_by":"Herb Caudill","updated_at":"2026-01-19T22:04:04.783698+01:00","closed_at":"2026-01-19T22:04:04.783698+01:00","close_reason":"Closed"}
{"id":"rui-lj0","title":"Set up Storybook for component documentation","description":"Add Storybook for interactive component documentation.\n\nScope: Every component and page layout should have stories.","status":"closed","priority":2,"issue_type":"feature","owner":"herb@devresults.com","created_at":"2026-01-18T20:47:57.837336+01:00","created_by":"Herb Caudill","updated_at":"2026-01-18T22:16:47.738939+01:00","closed_at":"2026-01-18T22:16:47.738939+01:00","close_reason":"Closed","dependencies":[{"issue_id":"rui-lj0","depends_on_id":"rui-4rt","type":"blocks","created_at":"2026-01-18T20:48:25.772522+01:00","created_by":"Herb Caudill"}],"comments":[{"id":27,"issue_id":"rui-lj0","author":"Herb Caudill","text":"## Completed: Storybook Setup\n\n### Changes Made:\n- Installed Storybook 8.x with React/Vite integration\n- Created `.storybook/` configuration directory with:\n  - `main.ts` - Storybook config with React-Vite framework\n  - `preview.ts` - Preview config with dark/light backgrounds\n  - `decorators.tsx` - Store state decorators for Zustand integration\n\n### Stories Created (12 files total):\n- **UI**: Button (all variants, sizes, states)\n- **Layout**: StatusBar, Header, MainLayout\n- **Tasks**: TaskCard (all statuses, priorities), TaskList (grouping, sorting), QuickTaskInput\n- **Chat**: ChatInput (various contexts)\n- **Events**: TextBlock (markdown, roles), ToolUseCard (all tools, statuses), EventStream\n- **Controls**: ControlBar (all states)\n\n### Scripts Added:\n- `pnpm storybook` - Run Storybook dev server on port 6006\n- `pnpm build-storybook` - Build static Storybook\n\n### Notes:\n- Storybook 8.x has peer dependency warnings for Vite 7.x (uses Vite 6.x support), but builds and runs correctly\n- Added `storybook-static/` to .gitignore","created_at":"2026-01-18T21:16:42Z"}]}
{"id":"rui-lo2","title":"Server foundation","description":"Express server with WebSocket support, ralph process management, and REST API","status":"closed","priority":2,"issue_type":"epic","owner":"herb@devresults.com","created_at":"2026-01-18T20:14:18.658139+01:00","created_by":"Herb Caudill","updated_at":"2026-01-18T21:46:30.432431+01:00","closed_at":"2026-01-18T21:46:30.432431+01:00","close_reason":"Closed"}
{"id":"rui-lo2.1","title":"Set up Express server with WebSocket support","description":"Create server/index.ts with Express and ws library. Set up basic HTTP server and WebSocket upgrade handling.","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-18T20:14:33.563407+01:00","created_by":"Herb Caudill","updated_at":"2026-01-18T20:30:21.925436+01:00","closed_at":"2026-01-18T20:30:21.925436+01:00","close_reason":"Closed","dependencies":[{"issue_id":"rui-lo2.1","depends_on_id":"rui-lo2","type":"parent-child","created_at":"2026-01-18T20:14:33.563994+01:00","created_by":"Herb Caudill"}],"comments":[{"id":2,"issue_id":"rui-lo2.1","author":"Herb Caudill","text":"## Summary\n\nSet up Express server with WebSocket support as the foundation for the ralph-ui backend.\n\n### Changes Made\n\n**New Files:**\n- `server/index.ts` - Main server file with:\n  - Express app with JSON parsing and health endpoint\n  - Placeholder API endpoints for ralph control (`/api/start`, `/api/stop`, `/api/message`)\n  - WebSocket server at `/ws` with:\n    - Heartbeat mechanism (30s ping/pong)\n    - Client connection tracking\n    - `broadcast()` function for sending to all clients\n    - Message handling with ping/pong support\n  - Port availability checking with fallback\n  - SPA static file serving from `dist/`\n- `server/index.test.ts` - Tests for health endpoint and WebSocket functionality\n- `tsconfig.server.json` - TypeScript config for Node.js server code\n\n**Modified Files:**\n- `package.json` - Added `express`, `ws`, `@types/express`, `@types/ws`, `tsx` deps; added `dev:server` script\n- `tsconfig.json` - Added reference to server tsconfig\n- `vitest.config.ts` - Added `environmentMatchGlobs` to run server tests in Node environment\n\n### Usage\n\nStart the server:\n```bash\npnpm dev:server\n```\n\nThe server runs at `http://localhost:3000` (or next available port) with WebSocket at `ws://localhost:3000/ws`.","created_at":"2026-01-18T19:30:18Z"}]}
{"id":"rui-lo2.2","title":"Create RalphManager class","description":"Spawn ralph CLI as child process, capture stdout JSON events, write to stdin for commands. Handle start/stop/message operations. DEPENDS ON: r-y41 (--json flag in ralph)","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-18T20:14:34.411166+01:00","created_by":"Herb Caudill","updated_at":"2026-01-18T20:35:21.523502+01:00","closed_at":"2026-01-18T20:35:21.523502+01:00","close_reason":"Closed","dependencies":[{"issue_id":"rui-lo2.2","depends_on_id":"rui-lo2","type":"parent-child","created_at":"2026-01-18T20:14:34.41171+01:00","created_by":"Herb Caudill"},{"issue_id":"rui-lo2.2","depends_on_id":"rui-lo2.1","type":"blocks","created_at":"2026-01-18T20:15:41.614107+01:00","created_by":"Herb Caudill"}],"comments":[{"id":3,"issue_id":"rui-lo2.2","author":"Herb Caudill","text":"## Summary\n\nCreated `RalphManager` class in `server/RalphManager.ts` that manages the ralph CLI child process.\n\n### Features\n- Spawns ralph CLI with `--json` flag for structured JSON output\n- Parses newline-delimited JSON events from stdout\n- Handles multi-chunk/split stdout data with buffering\n- Provides `start(iterations?)`, `stop(timeout?)`, and `send(message)` methods\n- Emits events: `event` (JSON), `output` (non-JSON), `error`, `exit`, `status`\n- Graceful shutdown with SIGTERM, falling back to SIGKILL after timeout\n- Uses dependency injection for spawn function (testability)\n\n### Types exported\n- `RalphStatus`: \"stopped\" | \"starting\" | \"running\" | \"stopping\"\n- `RalphEvent`: JSON event structure from ralph\n- `SpawnFn`: Spawn function signature for DI\n- `RalphManagerOptions`: Configuration options\n\n### Tests\n20 comprehensive unit tests covering:\n- Initialization and status\n- Start/stop lifecycle\n- stdin message sending\n- stdout JSON parsing (including split chunks)\n- stderr error handling\n- Timeout force-kill behavior","created_at":"2026-01-18T19:35:17Z"}]}
{"id":"rui-lo2.3","title":"Implement WebSocket event broadcast","description":"Broadcast ralph events to all connected WebSocket clients. Handle client connect/disconnect.","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-18T20:14:35.595973+01:00","created_by":"Herb Caudill","updated_at":"2026-01-18T20:38:30.419382+01:00","closed_at":"2026-01-18T20:38:30.419382+01:00","close_reason":"Closed","dependencies":[{"issue_id":"rui-lo2.3","depends_on_id":"rui-lo2","type":"parent-child","created_at":"2026-01-18T20:14:35.596531+01:00","created_by":"Herb Caudill"},{"issue_id":"rui-lo2.3","depends_on_id":"rui-lo2.2","type":"blocks","created_at":"2026-01-18T20:15:43.350215+01:00","created_by":"Herb Caudill"}],"comments":[{"id":4,"issue_id":"rui-lo2.3","author":"Herb Caudill","text":"## Summary\n\nImplemented WebSocket event broadcasting for RalphManager events.\n\n### Changes\n\n1. **server/index.ts**:\n   - Added `getRalphManager()` singleton function that creates a RalphManager and wires up event broadcasting\n   - All RalphManager events (event, status, output, error, exit) are now broadcast to connected WebSocket clients\n   - Messages are prefixed with `ralph:` (e.g., `ralph:event`, `ralph:status`)\n   - Added `getClientCount()` helper for monitoring connected clients\n   - Added `resetRalphManager()` for test cleanup\n\n2. **server/broadcast.test.ts** (new file):\n   - Comprehensive test coverage for broadcast functionality\n   - Tests for multi-client broadcast\n   - Tests for each event type (status, event, output, error, exit)\n   - Tests for client disconnect handling\n\n### WebSocket Message Types\n\nClients receive these message types:\n- `ralph:status` - Process status changes (stopped, starting, running, stopping)\n- `ralph:event` - JSON events from ralph stdout\n- `ralph:output` - Non-JSON stdout lines\n- `ralph:error` - Error messages\n- `ralph:exit` - Process exit with code and signal","created_at":"2026-01-18T19:38:26Z"}]}
{"id":"rui-lo2.4","title":"Create REST API endpoints","description":"POST /api/start, POST /api/stop, POST /api/message endpoints that interact with RalphManager.","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-18T20:14:36.591728+01:00","created_by":"Herb Caudill","updated_at":"2026-01-18T20:40:48.631687+01:00","closed_at":"2026-01-18T20:40:48.631687+01:00","close_reason":"Closed","dependencies":[{"issue_id":"rui-lo2.4","depends_on_id":"rui-lo2","type":"parent-child","created_at":"2026-01-18T20:14:36.592287+01:00","created_by":"Herb Caudill"},{"issue_id":"rui-lo2.4","depends_on_id":"rui-lo2.2","type":"blocks","created_at":"2026-01-18T20:15:44.278969+01:00","created_by":"Herb Caudill"}],"comments":[{"id":5,"issue_id":"rui-lo2.4","author":"Herb Caudill","text":"## Implementation Summary\n\nImplemented the REST API endpoints that interact with RalphManager:\n\n### Endpoints\n\n- **POST /api/start** - Start the ralph process\n  - Optional `iterations` parameter in request body\n  - Returns 409 if already running\n  - Returns `{ ok: true, status: \"running\" }` on success\n\n- **POST /api/stop** - Stop the ralph process  \n  - Returns 409 if not running\n  - Returns `{ ok: true, status: \"stopped\" }` on success\n\n- **POST /api/message** - Send message to ralph stdin\n  - Requires `message` in request body (string or object)\n  - Returns 400 if message missing\n  - Returns 409 if ralph not running\n\n- **GET /api/status** - Get current ralph status\n  - Returns `{ ok: true, status: \"\u003cstatus\u003e\" }`\n\n### Testing\n\nAdded comprehensive test suite in `server/api.test.ts` with 11 tests covering:\n- Status endpoint in both stopped and running states\n- Start endpoint success, with iterations, and conflict handling\n- Stop endpoint success and conflict handling\n- Message endpoint with string/object messages, missing message, and not running state","created_at":"2026-01-18T19:40:44Z"}]}
{"id":"rui-m23","title":"Remove tasks heading","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-18T23:47:07.84949+01:00","created_by":"Herb Caudill","updated_at":"2026-01-18T23:53:25.202033+01:00","closed_at":"2026-01-18T23:53:25.202033+01:00","close_reason":"Closed","comments":[{"id":33,"issue_id":"rui-m23","author":"Herb Caudill","text":"Removed the Tasks header from TaskSidebar component:\\n\\n- Deleted header section with checkmark icon and \"Tasks\" heading\\n- Updated TaskSidebar.test.tsx to expect 0 border-b elements when no quickInput is provided\\n- Also removed duplicate Tasks headings from MainLayout.stories.tsx\\n\\nThe sidebar context is clear from the layout, making the explicit header redundant.","created_at":"2026-01-18T22:53:05Z"}]}
{"id":"rui-mjf","title":"Make a favicon with the ralph logo","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-19T19:42:07.168998+01:00","created_by":"Herb Caudill","updated_at":"2026-01-19T20:33:48.150453+01:00","closed_at":"2026-01-19T20:33:48.150453+01:00","close_reason":"Closed","comments":[{"id":78,"issue_id":"rui-mjf","author":"Herb Caudill","text":"Created an SVG favicon using the existing Ralph robot logo from the Header component.\n\n**Changes:**\n- Added `public/favicon.svg` - SVG version of the robot logo with neutral gray (#374151) stroke\n- Updated `index.html` to reference the favicon with proper SVG MIME type\n\nThe favicon matches the app's branding and works well in modern browsers.","created_at":"2026-01-19T19:33:44Z"}]}
{"id":"rui-moz","title":"for the send message button use an up arrow icon rather than the send icon","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-19T19:03:30.508849+01:00","created_by":"Herb Caudill","updated_at":"2026-01-19T19:40:33.73082+01:00","closed_at":"2026-01-19T19:40:33.73082+01:00","close_reason":"Closed","comments":[{"id":69,"issue_id":"rui-moz","author":"Herb Caudill","text":"Changed the send message button icon from a paper plane (send icon) to an up arrow icon in the ChatInput component. The SVG path was updated from the paper plane design to use a standard arrow-up pattern.","created_at":"2026-01-19T18:40:30Z"}]}
{"id":"rui-mrn","title":"Show token counts in status bar","description":"Show tokens sent and received in the status bar (currently always shows ↓0↑0)","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-19T20:19:38.079276+01:00","created_by":"Herb Caudill","updated_at":"2026-01-20T02:46:04.24812+01:00","closed_at":"2026-01-20T02:46:04.24812+01:00","close_reason":"Closed","comments":[{"id":88,"issue_id":"rui-mrn","author":"Herb Caudill","text":"## Summary\n\nFixed the token usage display in the status bar which was always showing ↓0↑0.\n\n### Changes\n- Updated `ralphConnection.ts` to extract token usage from `message_delta` stream events\n- Token counts now include:\n  - `input_tokens` (regular input tokens)\n  - `cache_creation_input_tokens` (tokens used to create cache)\n  - `cache_read_input_tokens` (tokens read from cache)\n  - `output_tokens` (tokens in assistant responses)\n- Added tests to verify token extraction and accumulation\n\n### How it works\nThe Claude Code API sends `message_delta` events at the end of each message containing usage statistics. The `ralphConnection` message handler now detects these events and calls `addTokenUsage()` to accumulate the counts in the store, which the StatusBar's `TokenUsageDisplay` component then displays.","created_at":"2026-01-19T20:09:41Z"}]}
{"id":"rui-n7m","title":"sometimes it says \"Ralph: stopped\" even though ervents are coming in","status":"tombstone","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-19T19:33:38.778283+01:00","created_by":"Herb Caudill","updated_at":"2026-01-19T20:24:04.907223+01:00","deleted_at":"2026-01-19T20:24:04.907223+01:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"rui-nrh","title":"Theme parser","description":"Parse and validate VS Code theme JSON, extract colors and tokenColors in src/lib/theme/parser.ts","status":"open","priority":3,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-19T19:18:59.907428+01:00","created_by":"Herb Caudill","updated_at":"2026-01-19T19:18:59.907428+01:00","dependencies":[{"issue_id":"rui-nrh","depends_on_id":"rui-bnb","type":"parent-child","created_at":"2026-01-19T19:19:36.311714+01:00","created_by":"Herb Caudill"},{"issue_id":"rui-nrh","depends_on_id":"rui-tzz","type":"blocks","created_at":"2026-01-19T19:19:46.660835+01:00","created_by":"Herb Caudill"}]}
{"id":"rui-obb","title":"Theme API endpoints","description":"Add GET /api/themes and GET /api/themes/:id endpoints to Express server","status":"open","priority":3,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-19T19:18:58.131159+01:00","created_by":"Herb Caudill","updated_at":"2026-01-19T19:18:58.131159+01:00","dependencies":[{"issue_id":"rui-obb","depends_on_id":"rui-bnb","type":"parent-child","created_at":"2026-01-19T19:19:36.309289+01:00","created_by":"Herb Caudill"},{"issue_id":"rui-obb","depends_on_id":"rui-w8p","type":"blocks","created_at":"2026-01-19T19:19:45.819284+01:00","created_by":"Herb Caudill"}]}
{"id":"rui-om9","title":"make the spinner a tiny bit smaller","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-19T21:41:09.335138+01:00","created_by":"Herb Caudill","updated_at":"2026-01-19T22:04:39.954464+01:00","closed_at":"2026-01-19T22:04:39.954464+01:00","close_reason":"Combined into rui-42g"}
{"id":"rui-ozo","title":"Fix failing TaskSidebar test (does not render quickInput area)","status":"closed","priority":3,"issue_type":"bug","owner":"herb@devresults.com","created_at":"2026-01-18T23:35:51.275306+01:00","created_by":"Herb Caudill","updated_at":"2026-01-19T02:00:42.319251+01:00","closed_at":"2026-01-19T02:00:42.319251+01:00","close_reason":"Closed","comments":[{"id":41,"issue_id":"rui-ozo","author":"Herb Caudill","text":"The TaskSidebar test is now passing. All 12 tests in TaskSidebar.test.tsx pass successfully. The component correctly renders the quickInput area only when the prop is provided (line 37) and doesn't render any border-b elements when quickInput is not provided, as expected by the test on lines 30-35. No changes were needed - this issue was resolved in a previous update.","created_at":"2026-01-19T01:00:38Z"}]}
{"id":"rui-p0o","title":"the sidebar width should be persisted","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-19T20:36:24.519291+01:00","created_by":"Herb Caudill","updated_at":"2026-01-19T21:24:11.001949+01:00","closed_at":"2026-01-19T21:24:11.001949+01:00","close_reason":"Closed","comments":[{"id":93,"issue_id":"rui-p0o","author":"Herb Caudill","text":"## Implementation Summary\n\nAdded localStorage persistence for the sidebar width, following the existing patterns in the codebase.\n\n### Changes made:\n\n**src/store/index.ts**\n- Added `SIDEBAR_WIDTH_STORAGE_KEY` constant (`ralph-ui-sidebar-width`)\n- Added `loadSidebarWidth()` helper that:\n  - Reads from localStorage on store initialization\n  - Validates the value is a number between 200-600 (min/max constraints)\n  - Returns default (320) if invalid or unavailable\n- Added `saveSidebarWidth()` helper to persist to localStorage\n- Modified `setSidebarWidth` action to call `saveSidebarWidth` before updating state\n- Added `getInitialStateWithPersistence()` to load persisted width on store creation\n\n**src/store/index.test.ts**\n- Added test for persistence on width change\n- Added test suite for localStorage initialization behavior:\n  - Loads width from localStorage on store creation\n  - Uses default when localStorage is empty\n  - Uses default when value is invalid (NaN)\n  - Uses default when value is below minimum (200)\n  - Uses default when value is above maximum (600)\n\nAll tests pass.","created_at":"2026-01-19T20:24:07Z"}]}
{"id":"rui-p5m","title":"use the square-rounded-plus-filled icon for the add button","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-19T19:26:48.778987+01:00","created_by":"Herb Caudill","updated_at":"2026-01-19T20:12:06.270233+01:00","closed_at":"2026-01-19T20:12:06.270233+01:00","close_reason":"Closed","comments":[{"id":73,"issue_id":"rui-p5m","author":"Herb Caudill","text":"Changed the QuickTaskInput add button from text ('Add'/'Adding...') to use the tabler `IconSquareRoundedPlusFilled` icon. Also adjusted button padding from `px-3 py-1.5` to `p-1.5` for a more compact icon-only button style.","created_at":"2026-01-19T19:12:02Z"}]}
{"id":"rui-pfv","title":"Group tasks by epic within each status","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-18T23:37:28.769679+01:00","created_by":"Herb Caudill","updated_at":"2026-01-19T01:54:31.661943+01:00","closed_at":"2026-01-19T01:54:31.661943+01:00","close_reason":"Closed","comments":[{"id":38,"issue_id":"rui-pfv","author":"Herb Caudill","text":"## Changes Made\n\nRefactored the `TaskList` component to change the grouping hierarchy:\n\n### Before\n- Tasks were grouped by epic first (epic headers at top level)\n- Ungrouped tasks (without epic) were grouped by status below\n\n### After\n- Primary grouping is by status (Ready, In Progress, Blocked, Closed)\n- Within each status group, tasks are sub-grouped by their parent epic\n- Tasks without an epic appear at the end of each status group as a flat list\n- Epic sub-groups are collapsible independently of status groups\n\n### Technical Details\n- Introduced `StatusGroupData` and `EpicSubGroup` interfaces to model the new structure\n- Refactored the `useMemo` hook to group tasks by status first, then by epic within each status\n- Updated tests to reflect the new grouping behavior\n- Added a new test for epic priority sorting within status groups\n\n### Files Changed\n- `src/components/tasks/TaskList.tsx` - Main component refactor\n- `src/components/tasks/TaskList.test.tsx` - Updated tests","created_at":"2026-01-19T00:54:27Z"}]}
{"id":"rui-r0q","title":"Tests fail: systemPrompt tests expect header format not in actual prompt file","description":"## Summary\nTwo tests in `server/systemPrompt.test.ts` are failing because they expect the default system prompt to contain `# Task Management Assistant` as a markdown header, but the actual file `server/prompts/task-chat-system.md` starts with `You are a task management assistant...` without the header.\n\n## Failing Tests\n1. `loadSystemPrompt \u003e loads default prompt when no custom prompt exists`\n2. `initSystemPrompt \u003e creates .ralph directory and copies default prompt`\n\n## Root Cause\nThe test expectations at lines 66 and 93 use:\n```js\nexpect(result).toContain('# Task Management Assistant')\n```\n\nBut the actual prompt file content begins with:\n```\nYou are a task management assistant integrated into Ralph UI...\n```\n\n## Fix Options\nEither:\n1. Update the tests to match the actual prompt content (check for `You are a task management assistant` instead)\n2. Update the prompt file to include `# Task Management Assistant` as a header\n\nRecommend option 1 since the prompt content appears intentionally changed.","status":"closed","priority":1,"issue_type":"bug","owner":"herb@devresults.com","created_at":"2026-01-19T23:14:39.783642+01:00","created_by":"Herb Caudill","updated_at":"2026-01-19T23:15:41.112289+01:00","closed_at":"2026-01-19T23:15:41.112289+01:00","close_reason":"Closed","comments":[{"id":124,"issue_id":"rui-r0q","author":"Herb Caudill","text":"Fixed the failing tests by updating expectations in `server/systemPrompt.test.ts`:\n\n- Changed line 66: `expect(result).toContain('# Task Management Assistant')` → `expect(result).toContain('task management assistant')`\n- Changed line 93: Same update for the initSystemPrompt test\n\nThe tests now check for the actual prompt content (lowercase phrase) rather than the old markdown header format that was removed in a previous prompt file update.\n\nAll 760 tests pass after the fix.","created_at":"2026-01-19T22:15:37Z"}]}
{"id":"rui-r53","title":"Restyle task input as borderless shadcn input group with add button","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-18T23:47:49.715668+01:00","created_by":"Herb Caudill","updated_at":"2026-01-19T01:57:09.747895+01:00","closed_at":"2026-01-19T01:57:09.747895+01:00","close_reason":"Closed","comments":[{"id":39,"issue_id":"rui-r53","author":"Herb Caudill","text":"## Summary of Changes\n\nRestyled the QuickTaskInput component to use a borderless shadcn input group style:\n\n- **Input**: Now borderless with transparent background, no focus ring, and a minimal appearance\n- **Add button**: Changed from a primary-colored button to a subtle muted icon that transitions to foreground color on hover\n- **Layout**: Input and button are grouped together in a flex container for visual unity\n\nThe component maintains all existing functionality (keyboard submit, loading state, disabled state) while providing a cleaner, more minimal appearance that integrates better with the sidebar.","created_at":"2026-01-19T00:57:05Z"}]}
{"id":"rui-rk9","title":"put assistant text in font-serif","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-19T01:13:40.303767+01:00","updated_at":"2026-01-19T01:59:35.180498+01:00","closed_at":"2026-01-19T01:59:35.180498+01:00","close_reason":"Closed","comments":[{"id":40,"issue_id":"rui-rk9","author":"Herb Caudill","text":"Added `font-serif` class to the AssistantText component so Claude's responses are rendered in IBM Plex Serif. This provides better readability and visual distinction between assistant text and the rest of the UI.","created_at":"2026-01-19T00:59:30Z"}]}
{"id":"rui-rks","title":"Test failure: gitBranch.test.ts - git commit fails in test setup","description":"## Description\n\nThe test `server/gitBranch.test.ts \u003e getGitBranch \u003e returns the current branch name in a git repo` is failing.\n\n## Error\n\n```\nError: Command failed: touch test.txt \u0026\u0026 git add . \u0026\u0026 git commit -m 'initial'\n```\n\nThe git commit command in the test setup is failing. This is happening at line 25 of the test file.\n\n## Analysis\n\nThe test creates a temporary git repository and tries to:\n1. Initialize a git repo with `git init`\n2. Configure user email and name\n3. Create a file, add it, and commit\n\nThe commit is failing, likely because:\n- Git hooks from the parent repo might be interfering\n- The test might need to use `--no-verify` to skip hooks\n- Or there's some other git configuration issue\n\n## Test Context\n\nThe second test (`returns 'main' for a new repo on main branch`) passes with essentially the same setup, suggesting the issue might be intermittent or related to test isolation.\n\n## Reproduction\n\nRun `pnpm test run server/gitBranch.test.ts`\n\n## Suggested Fix\n\nAdd `--no-verify` flag to the git commit commands in tests to skip any hooks that might interfere.","status":"closed","priority":1,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-20T02:16:33.519425+01:00","created_by":"Herb Caudill","updated_at":"2026-01-20T02:17:46.652586+01:00","closed_at":"2026-01-20T02:17:46.652586+01:00","close_reason":"Closed","comments":[{"id":141,"issue_id":"rui-rks","author":"Herb Caudill","text":"## Fix Summary\n\nAdded `--no-verify` flag to git commit commands in `server/gitBranch.test.ts`.\n\n### Problem\nThe test was failing because git hooks from the parent repository were being triggered when the test created temporary git repos and tried to commit files.\n\n### Solution\nAdded `--no-verify` to the git commit commands in the test setup to skip hooks:\n- Line 25: `git commit --no-verify -m 'initial'`\n- Line 40: `git commit --no-verify -m 'initial'`\n\n### Verification\n- All 4 tests in gitBranch.test.ts now pass\n- Full test suite passes (815/815 tests)\n- Build succeeds","created_at":"2026-01-20T01:17:42Z"}]}
{"id":"rui-t50","title":"Show hotkeys for any buttons on hover","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-19T18:58:06.946797+01:00","created_by":"Herb Caudill","updated_at":"2026-01-19T19:15:53.569804+01:00","closed_at":"2026-01-19T19:15:53.569804+01:00","close_reason":"Closed","comments":[{"id":63,"issue_id":"rui-t50","author":"Herb Caudill","text":"## Summary\n\nAdded tooltip support with hotkey display for all control bar buttons (Start, Pause, Stop, Stop after current).\n\n### Changes\n\n- **New Tooltip Component** (`src/components/ui/tooltip.tsx`):\n  - Created `TooltipProvider`, `Tooltip`, `TooltipTrigger`, `TooltipContent` components using @radix-ui/react-tooltip\n  - Added `Kbd` component for styled keyboard shortcut display\n  - Added `TooltipButton` convenience wrapper that combines tooltip + optional hotkey display\n\n- **ControlBar Updates** (`src/components/controls/ControlBar.tsx`):\n  - Wrapped all control buttons with `TooltipButton`\n  - Added hotkey display using `getHotkeyDisplay()` from `useHotkeys` hook\n  - Tooltips now show button name + keyboard shortcut on hover (e.g., \"Start ⌘⏎\")\n\n- **Test Infrastructure** (`src/test-utils.tsx`):\n  - Created custom render function that wraps components with `TooltipProvider`\n  - Updated all affected test files to use custom render\n\n- **Dependencies**:\n  - Added `@radix-ui/react-tooltip` package\n\n### Hotkeys Displayed\n\n| Button | Tooltip | Hotkey |\n|--------|---------|--------|\n| Start | Start | ⌘⏎ |\n| Pause | Pause / Resume | ⌘/ |\n| Stop | Stop | ⌘. |\n| Stop after current | Stop after current | ⇧⌘. |\n\nAll tests pass (494 unit tests + 2 E2E tests).","created_at":"2026-01-19T18:15:50Z"}]}
{"id":"rui-tux","title":"in the task input area, the input should be a text area so I can input more than one line. The \"add\" button should be below the text area and should say \"Add\"","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-19T18:47:15.553753+01:00","created_by":"Herb Caudill","updated_at":"2026-01-19T19:24:52.374633+01:00","closed_at":"2026-01-19T19:24:52.374633+01:00","close_reason":"Closed","comments":[{"id":65,"issue_id":"rui-tux","author":"Herb Caudill","text":"## Changes Made\n\n- Converted single-line `\u003cinput\u003e` to 3-row `\u003ctextarea\u003e` for multiline task entry\n- Moved the submit button below the textarea and changed it from a Plus icon to \"Add\" text\n- Changed submission shortcut from Enter to Cmd/Ctrl+Enter (plain Enter now adds newlines)\n- Shows \"Adding...\" with spinner while submitting\n\n## Files Modified\n- `src/components/tasks/QuickTaskInput.tsx` - Main component changes\n- `src/components/tasks/QuickTaskInput.test.tsx` - Updated tests for new keyboard shortcuts\n\n## Testing\n- All 31 QuickTaskInput tests pass\n- Full test suite passes (504 tests)\n- Build successful","created_at":"2026-01-19T18:24:48Z"}]}
{"id":"rui-tzz","title":"Theme types","description":"Create VSCodeTheme, AppTheme, ThemeMeta, and StatusColors types in src/lib/theme/types.ts","status":"open","priority":3,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-19T19:18:59.049903+01:00","created_by":"Herb Caudill","updated_at":"2026-01-19T19:18:59.049903+01:00","dependencies":[{"issue_id":"rui-tzz","depends_on_id":"rui-bnb","type":"parent-child","created_at":"2026-01-19T19:19:36.310497+01:00","created_by":"Herb Caudill"}]}
{"id":"rui-uxz","title":"even if a button is disabled (e.g. the start button when ralph is already running) it should show its tooltip so I know what it does and its hotkey","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-19T21:07:15.992269+01:00","created_by":"Herb Caudill","updated_at":"2026-01-19T21:39:35.853437+01:00","closed_at":"2026-01-19T21:39:35.853437+01:00","close_reason":"Closed","comments":[{"id":97,"issue_id":"rui-uxz","author":"Herb Caudill","text":"## Changes\n\nWrapped `TooltipButton` children in a `\u003cspan className=\"inline-flex\"\u003e` so tooltips display even when the button is disabled.\n\n### Problem\nDisabled HTML elements don't fire pointer events (like `mouseEnter` or `pointerEnter`), so Radix UI tooltips couldn't be triggered on disabled buttons.\n\n### Solution\nAdded a wrapper `\u003cspan\u003e` around the children in `TooltipButton`. The span receives pointer events even when its child button is disabled, allowing the tooltip to work normally.\n\n### Files changed\n- `src/components/ui/tooltip.tsx` - Added span wrapper around children\n- `src/components/ui/tooltip.test.tsx` - Added test verifying the wrapper span exists","created_at":"2026-01-19T20:39:31Z"}]}
{"id":"rui-vyr","title":"Show type and priority icons in task list","description":"Task listing should show type icon (if not 'task') and color-coded priority icon (if not P2) on the right side of each task item.","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-19T22:24:29.71949+01:00","created_by":"Herb Caudill","updated_at":"2026-01-20T02:09:17.810599+01:00","closed_at":"2026-01-20T02:09:17.810599+01:00","close_reason":"Closed","comments":[{"id":138,"issue_id":"rui-vyr","author":"Herb Caudill","text":"## Summary\n\nAdded type and priority icons to the task list (TaskCard component).\n\n### Changes\n- Added type icons on the right side for non-default issue types:\n  - `bug` → red bug icon\n  - `feature` → purple sparkles icon\n  - `epic` → indigo stack icon\n  - `task` → no icon (default, omitted)\n  \n- Added color-coded priority badges for non-P2 priorities:\n  - P0 → red badge (critical)\n  - P1 → orange badge (high)\n  - P3 → gray badge (low)\n  - P4 → light gray badge (lowest)\n  - P2 → no badge (medium, default)\n\n### Tests\n- Added 12 new tests covering type and priority indicator rendering\n- All 811 tests passing","created_at":"2026-01-20T01:09:14Z"}]}
{"id":"rui-w2g","title":"Editable issue properties in dialog","description":"In the task dialog, the type should be editable. This dialog needs to show (and support editing) other bd issue properties:\n- labels\n- parent\n- comments\n\nComments and description should be displayed as markdown. Clicking a description to edit it replaces the markdown with a textarea.","status":"closed","priority":2,"issue_type":"epic","owner":"herb@devresults.com","created_at":"2026-01-19T21:04:12.459422+01:00","created_by":"Herb Caudill","updated_at":"2026-01-20T03:29:11.429291+01:00","closed_at":"2026-01-20T03:29:11.429291+01:00","close_reason":"Closed","comments":[{"id":148,"issue_id":"rui-w2g","author":"Herb Caudill","text":"Broken down into sub-issues:\n- rui-w2g.1: Add type selector to task dialog\n- rui-w2g.2: Add parent issue editing to task dialog  \n- rui-w2g.3: Add labels support to task dialog\n- rui-w2g.4: Add comments display to task dialog\n- rui-w2g.5: Add markdown rendering to task dialog\n- rui-w2g.6: Add click-to-edit description in task dialog\n- rui-w2g.7: Show child tasks and blockers in task dialog","created_at":"2026-01-20T01:52:05Z"}]}
{"id":"rui-w2g.1","title":"Add type selector to task dialog","description":"Add an editable type selector to the TaskDetailsDialog so users can change issue_type (task, bug, feature, epic). This should use the existing Select component and the typeConfig from TaskCard.tsx.","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-20T02:51:27.919647+01:00","created_by":"Herb Caudill","updated_at":"2026-01-20T02:56:00.541475+01:00","closed_at":"2026-01-20T02:56:00.541475+01:00","close_reason":"Closed","dependencies":[{"issue_id":"rui-w2g.1","depends_on_id":"rui-w2g","type":"parent-child","created_at":"2026-01-20T02:51:27.92082+01:00","created_by":"Herb Caudill"}],"comments":[{"id":150,"issue_id":"rui-w2g.1","author":"Herb Caudill","text":"## Changes Made\n\nAdded an editable type selector to TaskDetailsDialog:\n\n1. **New Type Selector UI**: Added a dropdown select in the dialog that allows users to change the issue type (task, bug, feature, epic)\n\n2. **State Management**: Added `issueType` state variable with proper initialization from task data and change tracking\n\n3. **TaskUpdateData Extended**: Added `issue_type` field to the `TaskUpdateData` interface so type changes are included in save payloads\n\n4. **Consistent Icon Display**: Each type option shows the same icon and color as used in TaskCard (IconCheckbox for task, IconBug for bug, IconSparkles for feature, IconStack2 for epic)\n\n5. **Parent Display**: Kept parent issue display as read-only, showing \"None\" when no parent is set\n\n6. **Tests Updated**: Updated existing tests and added new tests for type selector editing and saving functionality\n\nCommit: ed1b1d5","created_at":"2026-01-20T01:55:57Z"}]}
{"id":"rui-w2g.2","title":"Add parent issue editing to task dialog","description":"Make the parent field editable in TaskDetailsDialog. Allow users to set or change the parent issue. This requires updating the TaskUpdateData type and the onSave handler to support parent changes.","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-20T02:51:33.65956+01:00","created_by":"Herb Caudill","updated_at":"2026-01-20T03:04:21.294379+01:00","closed_at":"2026-01-20T03:04:21.294379+01:00","close_reason":"Closed","dependencies":[{"issue_id":"rui-w2g.2","depends_on_id":"rui-w2g","type":"parent-child","created_at":"2026-01-20T02:51:33.660537+01:00","created_by":"Herb Caudill"}],"comments":[{"id":152,"issue_id":"rui-w2g.2","author":"Herb Caudill","text":"Added parent issue editing to TaskDetailsDialog:\n\n- Updated `TaskUpdateData` interface to include `parent?: string | null`\n- Added parent state tracking with change detection\n- Implemented a dropdown selector showing all valid parent options\n- The dropdown filters out the task itself and its direct children to prevent circular references\n- If current parent isn't in the tasks list, it's still shown as an option\n- Added 4 new tests covering:\n  - Editing parent via selector\n  - Saving parent changes\n  - Clearing parent by selecting None\n  - Filtering self and children from options\n\nFiles modified:\n- `src/components/tasks/TaskDetailsDialog.tsx`\n- `src/components/tasks/TaskDetailsDialog.test.tsx`\n- `src/components/tasks/TaskDetailsDialog.stories.tsx`","created_at":"2026-01-20T02:04:17Z"}]}
{"id":"rui-w2g.3","title":"Add labels support to task dialog","description":"Add labels display and editing to TaskDetailsDialog:\n1. Add getLabels() and addLabel()/removeLabel() methods to BdProxy\n2. Add GET /api/tasks/:id/labels and POST/DELETE endpoints to server\n3. Update TaskCardTask type to include labels\n4. Add labels UI in TaskDetailsDialog with add/remove capability","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-20T02:51:39.257033+01:00","created_by":"Herb Caudill","updated_at":"2026-01-20T03:10:15.416854+01:00","closed_at":"2026-01-20T03:10:15.416854+01:00","close_reason":"Closed","dependencies":[{"issue_id":"rui-w2g.3","depends_on_id":"rui-w2g","type":"parent-child","created_at":"2026-01-20T02:51:39.258304+01:00","created_by":"Herb Caudill"}],"comments":[{"id":153,"issue_id":"rui-w2g.3","author":"Herb Caudill","text":"## Implementation Summary\n\nAdded full labels support to the task dialog with the following changes:\n\n### BdProxy (server/BdProxy.ts)\n- Added `BdLabelResult` type\n- Added `getLabels(id)` - fetch labels for an issue\n- Added `addLabel(id, label)` - add a label to an issue\n- Added `removeLabel(id, label)` - remove a label from an issue  \n- Added `listAllLabels()` - list all unique labels in the database\n\n### Server API (server/index.ts)\n- `GET /api/tasks/:id/labels` - Get labels for a task\n- `POST /api/tasks/:id/labels` - Add a label to a task\n- `DELETE /api/tasks/:id/labels/:label` - Remove a label from a task\n- `GET /api/labels` - List all unique labels in the database\n\n### TaskCardTask Type (src/components/tasks/TaskCard.tsx)\n- Added optional `labels?: string[]` field\n\n### TaskDetailsDialog UI (src/components/tasks/TaskDetailsDialog.tsx)\n- Added labels section displaying current labels as badges\n- Labels can be removed by clicking the X button on each badge\n- \"Add label\" button shows inline input for new labels\n- Labels are fetched from API when dialog opens\n- Add/remove operations are immediately reflected in UI\n\n### Tests\n- Added tests for all new BdProxy methods\n- Added tests for labels UI in TaskDetailsDialog (display, add button, remove button, read-only mode)","created_at":"2026-01-20T02:10:11Z"}]}
{"id":"rui-w2g.4","title":"Add comments display to task dialog","description":"Add comments display and add capability to TaskDetailsDialog:\n1. Add getComments() method to BdProxy using 'bd comments ID --json'\n2. Add GET /api/tasks/:id/comments endpoint to server\n3. Create CommentsSection component to display comments\n4. Render comments as markdown","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-20T02:51:44.184989+01:00","created_by":"Herb Caudill","updated_at":"2026-01-20T03:16:59.132846+01:00","closed_at":"2026-01-20T03:16:59.132846+01:00","close_reason":"Closed","dependencies":[{"issue_id":"rui-w2g.4","depends_on_id":"rui-w2g","type":"parent-child","created_at":"2026-01-20T02:51:44.185973+01:00","created_by":"Herb Caudill"}],"comments":[{"id":155,"issue_id":"rui-w2g.4","author":"Herb Caudill","text":"## Changes Made\n\n### BdProxy (`server/BdProxy.ts`)\n- Added `BdComment` interface for typed comment data\n- Added `getComments(id: string)` method to fetch comments via `bd comments ID --json`\n\n### Server (`server/index.ts`)\n- Added `GET /api/tasks/:id/comments` endpoint that returns comments for a task\n\n### CommentsSection Component (`src/components/tasks/CommentsSection.tsx`)\n- New component that displays comments with markdown rendering\n- Supports adding new comments with Ctrl/Cmd+Enter keyboard shortcut\n- Relative time formatting (e.g., \"2 hours ago\", \"yesterday\")\n- TaskIdLink support for linking to other tasks mentioned in comments\n- Respects read-only mode\n\n### TaskDetailsDialog Integration\n- Added CommentsSection to the dialog, appearing below the Type/Parent row\n- Comments are fetched when the dialog opens for a task\n\n### Tests\n- Added 3 tests for `BdProxy.getComments()` in `server/BdProxy.test.ts`\n- Added 14 tests for `CommentsSection` component covering:\n  - Loading state\n  - Comments display with markdown\n  - Error handling\n  - Read-only mode\n  - Adding comments\n  - API calls","created_at":"2026-01-20T02:16:55Z"}]}
{"id":"rui-w2g.5","title":"Add markdown rendering to task dialog","description":"Render description and comments as markdown in TaskDetailsDialog:\n1. Install or use existing markdown parsing library\n2. Create MarkdownContent component for rendering\n3. Update description display to use MarkdownContent\n4. Update comments display to use MarkdownContent","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-20T02:51:49.431264+01:00","created_by":"Herb Caudill","updated_at":"2026-01-20T03:20:36.777792+01:00","closed_at":"2026-01-20T03:20:36.777792+01:00","close_reason":"Closed","dependencies":[{"issue_id":"rui-w2g.5","depends_on_id":"rui-w2g","type":"parent-child","created_at":"2026-01-20T02:51:49.432301+01:00","created_by":"Herb Caudill"}],"comments":[{"id":156,"issue_id":"rui-w2g.5","author":"Herb Caudill","text":"## Summary\n\nAdded markdown rendering support to the task dialog for descriptions and comments:\n\n### Changes Made\n\n1. **Created `MarkdownContent` component** (`src/components/ui/MarkdownContent.tsx`)\n   - Reusable component for rendering markdown with GFM (GitHub Flavored Markdown) support\n   - Supports task ID linking via `TaskIdLink` component\n   - Optional syntax-highlighted code blocks (configurable via `withCodeBlocks` prop)\n   - Configurable size variants (`sm` or `base`)\n   - Uses `react-markdown` and `remark-gfm` (already installed in the project)\n\n2. **Updated `TaskDetailsDialog`**\n   - Description now renders as markdown in read-only mode\n   - Keeps textarea for editing mode\n\n3. **Refactored `CommentsSection`**\n   - Replaced duplicate markdown rendering logic with `MarkdownContent`\n   - Reduced code duplication by ~50 lines\n\n4. **Added comprehensive tests** (`src/components/ui/MarkdownContent.test.tsx`)\n   - 25 tests covering:\n     - Basic markdown (bold, italic, code, links, lists)\n     - GFM features (strikethrough, task lists, tables)\n     - Task ID linking\n     - Code blocks\n     - Styling and sizing\n     - Edge cases","created_at":"2026-01-20T02:20:32Z"}]}
{"id":"rui-w2g.6","title":"Add click-to-edit description in task dialog","description":"Implement click-to-edit behavior for description field:\n1. Display description as rendered markdown by default\n2. Clicking on description switches to textarea edit mode\n3. Save/Cancel buttons or blur to save changes\n4. Update local state and track changes for save button","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-20T02:51:54.57875+01:00","created_by":"Herb Caudill","updated_at":"2026-01-20T03:24:47.250907+01:00","closed_at":"2026-01-20T03:24:47.250907+01:00","close_reason":"Closed","dependencies":[{"issue_id":"rui-w2g.6","depends_on_id":"rui-w2g","type":"parent-child","created_at":"2026-01-20T02:51:54.579716+01:00","created_by":"Herb Caudill"}],"comments":[{"id":157,"issue_id":"rui-w2g.6","author":"Herb Caudill","text":"Implemented click-to-edit behavior for description field:\n\n- Description displays as rendered markdown by default\n- Clicking on description switches to textarea edit mode\n- Blur saves changes and exits edit mode\n- Escape key reverts changes and exits edit mode\n- Show 'Click to add description...' placeholder when empty\n- Added comprehensive tests for the new behavior\n\nCommit: 71707f1","created_at":"2026-01-20T02:24:42Z"}]}
{"id":"rui-w2g.7","title":"Show child tasks and blockers in task dialog","description":"Display child issues and blocking issues in TaskDetailsDialog:\n1. Fetch child issues using parent filter\n2. Display dependencies/dependents from issue data\n3. Show as clickable list that opens those tasks","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-20T02:52:00.148148+01:00","created_by":"Herb Caudill","updated_at":"2026-01-20T03:28:37.385867+01:00","closed_at":"2026-01-20T03:28:37.385867+01:00","close_reason":"Closed","dependencies":[{"issue_id":"rui-w2g.7","depends_on_id":"rui-w2g","type":"parent-child","created_at":"2026-01-20T02:52:00.149222+01:00","created_by":"Herb Caudill"}],"comments":[{"id":158,"issue_id":"rui-w2g.7","author":"Herb Caudill","text":"Added RelatedTasks component to TaskDetailsDialog with:\n\n- **Children section**: Shows tasks that have this task as their parent (from store)\n- **Blocked by section**: Shows blocking dependencies from the API (parent-child and blocks types)\n- **Blocks section**: Shows tasks that depend on this task (dependents with blocks type)\n\nEach section is collapsible and shows task count. Tasks are displayed with status icon, task ID (without prefix), and title. Clicking a task opens it in the dialog.\n\nNew files:\n- `src/components/tasks/RelatedTasks.tsx` - Main component\n- `src/components/tasks/RelatedTasks.test.tsx` - 15 tests covering all functionality","created_at":"2026-01-20T02:28:33Z"}]}
{"id":"rui-w8p","title":"ThemeDiscovery class - scan VS Code extensions","description":"Server-side class to scan ~/.vscode/extensions for theme extensions and read VS Code settings.json for current theme","status":"open","priority":3,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-19T19:18:56.961806+01:00","created_by":"Herb Caudill","updated_at":"2026-01-19T19:18:56.961806+01:00","dependencies":[{"issue_id":"rui-w8p","depends_on_id":"rui-bnb","type":"parent-child","created_at":"2026-01-19T19:19:36.30764+01:00","created_by":"Herb Caudill"}]}
{"id":"rui-w9f","title":"Add light/dark mode support","description":"Theme behavior:\n- Default to system preference (OS light/dark setting)\n- Allow manual override toggle in UI\n\nColor palette: Match VS Code's dark/light theme colors for consistency.","status":"closed","priority":2,"issue_type":"feature","owner":"herb@devresults.com","created_at":"2026-01-18T20:47:56.409129+01:00","created_by":"Herb Caudill","updated_at":"2026-01-18T22:04:27.279953+01:00","closed_at":"2026-01-18T22:04:27.279953+01:00","close_reason":"Closed","dependencies":[{"issue_id":"rui-w9f","depends_on_id":"rui-4rt","type":"blocks","created_at":"2026-01-18T20:48:24.280478+01:00","created_by":"Herb Caudill"}],"comments":[{"id":25,"issue_id":"rui-w9f","author":"Herb Caudill","text":"## Implementation Complete\n\nAdded light/dark mode support with system preference detection:\n\n### Changes:\n- **Store** (`src/store/index.ts`): Added `Theme` type (`system` | `light` | `dark`) and `setTheme` action\n- **useTheme hook** (`src/hooks/useTheme.ts`): \n  - Defaults to system preference (OS light/dark setting)\n  - Allows manual override toggle\n  - Persists preference to localStorage (`ralph-ui-theme`)\n  - Listens for system preference changes when in 'system' mode\n  - Applies theme by adding/removing `dark` class on document root\n- **Header** (`src/components/layout/Header.tsx`): Added theme toggle button\n  - Cycles: system (Monitor icon) → light (Sun icon) → dark (Moon icon) → system\n- **App** (`src/App.tsx`): Initialize theme on app load\n\n### Tests:\n- Added comprehensive tests for useTheme hook (18 tests)\n- Added theme toggle tests in Header (5 tests)\n- Updated MainLayout and App tests with matchMedia mocks","created_at":"2026-01-18T21:04:23Z"}]}
{"id":"rui-wbc","title":"Get rid of the status bar that's currently above the event log. There's another status bar at the bottom of the screen, which I like. tuck that one into the right-hand panel, still at the bottom but not spanning across to the task panel on the left. and add the task currently being worked on to that status bar.","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-19T20:12:25.573369+01:00","created_by":"Herb Caudill","updated_at":"2026-01-19T21:04:11.57327+01:00","closed_at":"2026-01-19T21:04:11.57327+01:00","close_reason":"Closed","comments":[{"id":85,"issue_id":"rui-wbc","author":"Herb Caudill","text":"## Changes Made\n\n- **Removed redundant TaskStatusBar** - The status bar above the event log has been removed\n- **Relocated bottom StatusBar** - The StatusBar is now inside the main (right) panel instead of spanning the full width of the screen\n- **Added current task to StatusBar** - The CurrentTask component now displays the task ID and title of any in-progress task\n- **Reorganized StatusBar layout** - Moved RepoBranch to the right section alongside token usage and iteration progress\n\n### Files Modified\n- `src/App.tsx` - Removed TaskStatusBar component and its imports\n- `src/components/layout/MainLayout.tsx` - Moved status bar footer inside the main content area\n- `src/components/layout/StatusBar.tsx` - Added CurrentTask component, reorganized layout\n- `src/components/layout/StatusBar.test.tsx` - Added tests for CurrentTask component\n- `src/App.test.tsx` - Updated tests to reflect removal of TaskStatusBar\n- `e2e/app.spec.ts` - Updated e2e test to check for Start button instead of status bar role","created_at":"2026-01-19T20:04:07Z"}]}
{"id":"rui-wqv","title":"Task ID linking with decimal suffixes","description":"Task ID linking doesn't catch IDs with decimal suffixes like rui-4vp.5","status":"closed","priority":2,"issue_type":"bug","owner":"herb@devresults.com","created_at":"2026-01-19T22:28:52.389704+01:00","created_by":"Herb Caudill","updated_at":"2026-01-20T02:11:24.938505+01:00","closed_at":"2026-01-20T02:11:24.938505+01:00","close_reason":"Closed","comments":[{"id":139,"issue_id":"rui-wqv","author":"Herb Caudill","text":"Fixed task ID linking for decimal suffixes:\n\n- Updated regex pattern in `TaskIdLink.tsx` to match IDs like `rui-4vp.5`\n- Pattern now uses `(?:\\.\\d+)?` to optionally match decimal suffix\n- Added 4 new test cases for decimal suffix handling:\n  - Single ID with decimal suffix\n  - Multiple IDs with decimal suffixes\n  - Mix of IDs with/without suffixes\n  - `containsTaskId` utility function support","created_at":"2026-01-20T01:11:20Z"}]}
{"id":"rui-xjf","title":"show the task count in the dropdown as well as the workspace label, but make it the count of open + in progress tasks","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-19T18:33:23.744368+01:00","created_by":"Herb Caudill","updated_at":"2026-01-19T19:00:52.21036+01:00","closed_at":"2026-01-19T19:00:52.21036+01:00","close_reason":"Closed","comments":[{"id":59,"issue_id":"rui-xjf","author":"Herb Caudill","text":"## Changes Made\n\n- Added `activeIssueCount` field to the workspace list API response (`/api/workspaces`)\n- Modified `/api/workspace` and `/api/workspace/switch` endpoints to return active issue count (open + in_progress) instead of total issue count\n- Updated `WorkspaceListEntry` type to include `activeIssueCount` property\n- Added issue count badge display in the workspace dropdown for each workspace\n- Added test to verify active issue count badges render correctly in the dropdown\n\nThe count is fetched by querying for open and in_progress issues separately and summing their lengths. If the count cannot be fetched, it's left undefined and no badge is displayed.","created_at":"2026-01-19T18:00:48Z"}]}
{"id":"rui-xx6","title":"When Ralph adds a comment to a task, it shows up as being from Herb Caudill - should show 'Ralph'","status":"closed","priority":2,"issue_type":"bug","owner":"herb@devresults.com","created_at":"2026-01-19T21:49:58.128262+01:00","created_by":"Herb Caudill","updated_at":"2026-01-19T23:25:37.4704+01:00","closed_at":"2026-01-19T23:25:37.4704+01:00","close_reason":"Closed","comments":[{"id":129,"issue_id":"rui-xx6","author":"Herb Caudill","text":"Fixed by adding author parameter support to BdProxy.addComment() and the /api/tasks/:id/comments endpoint. Now when Ralph adds automated comments (like closing comments with event log links), they correctly show 'Ralph' as the author instead of the git user's name.\n\nChanges made:\n- server/BdProxy.ts: Added optional author parameter to addComment method\n- server/index.ts: Updated comment endpoint to accept and pass author parameter  \n- src/components/tasks/TaskDetailsDialog.tsx: Pass author: 'Ralph' when adding closing comments\n- server/BdProxy.test.ts: Added test for addComment with author parameter","created_at":"2026-01-19T22:25:33Z"}]}
{"id":"rui-z4z","title":"Put the control buttons in the status bar","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-19T18:57:33.685962+01:00","created_by":"Herb Caudill","updated_at":"2026-01-19T20:09:48.12782+01:00","closed_at":"2026-01-19T20:09:48.12782+01:00","close_reason":"Closed","comments":[{"id":71,"issue_id":"rui-z4z","author":"Herb Caudill","text":"Moved ControlBar from Header to StatusBar component. Removed header-specific variant styling from ControlBar. Updated tests accordingly.","created_at":"2026-01-19T19:09:44Z"}]}
{"id":"rui-z6m","title":"persist the text in the task input to local storage as I type, so that it survives a reload","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-19T18:54:24.42167+01:00","created_by":"Herb Caudill","updated_at":"2026-01-19T18:57:51.89293+01:00","closed_at":"2026-01-19T18:57:51.89293+01:00","close_reason":"Closed","comments":[{"id":58,"issue_id":"rui-z6m","author":"Herb Caudill","text":"## Changes Made\n\n- Added localStorage persistence to QuickTaskInput component\n- Input text is saved to localStorage under key `ralph-ui-task-input-draft` as user types\n- On component mount, any existing draft is restored from localStorage\n- Draft is automatically cleared after successful task submission\n- Draft is retained if submission fails (so user doesn't lose work)\n- Added comprehensive tests for all persistence scenarios\n\nThis ensures users don't lose their task drafts if they accidentally refresh the page or close the browser.","created_at":"2026-01-19T17:57:48Z"}]}
{"id":"rui-z8b","title":"Hide collapse/expand UI for epics with no subtasks","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-18T23:36:53.721224+01:00","created_by":"Herb Caudill","updated_at":"2026-01-19T01:51:04.920318+01:00","closed_at":"2026-01-19T01:51:04.920318+01:00","close_reason":"Closed","comments":[{"id":37,"issue_id":"rui-z8b","author":"Herb Caudill","text":"## Changes Made\n\n- Modified `EpicGroupHeader` component in `TaskList.tsx` to conditionally show the collapse/expand UI:\n  - Chevron icon only appears when epic has subtasks (`taskCount \u003e 0`)\n  - Task count badge only appears when epic has subtasks\n  - Header becomes non-interactive when no subtasks (no `button` role, no `tabIndex`, no hover styling)\n  - aria-label simplified to just \"${epicTitle} epic\" when no subtasks\n  \n- Updated epic rendering in `TaskList` to not show the expandable content area for empty epics\n  - Removed the \"No tasks in this epic\" message display\n  \n- Added 6 new tests in `TaskList.test.tsx` covering:\n  - Epic header renders with chevron when has subtasks\n  - Epic header renders without chevron when no subtasks\n  - Task count badge visibility based on subtask presence\n  - Toggle behavior for epics with subtasks\n  - No toggle for epics without subtasks\n  - No \"No tasks in this epic\" message for empty epics\n  \n- Added new Storybook story `EpicsWithNoSubtasks` demonstrating the behavior","created_at":"2026-01-19T00:51:00Z"}]}
{"id":"rui-zeg","title":"Get rid of the \"connected\" indicator in the header since we already have one in the footer","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-19T18:51:42.660772+01:00","created_by":"Herb Caudill","updated_at":"2026-01-19T18:54:03.522459+01:00","closed_at":"2026-01-19T18:54:03.522459+01:00","close_reason":"Closed","comments":[{"id":56,"issue_id":"rui-zeg","author":"Herb Caudill","text":"Removed the `ConnectionIndicator` component from the Header. The status bar already shows Ralph's running status (stopped/starting/running/paused), making the connection indicator in the header redundant.\n\nChanges:\n- Removed `ConnectionIndicator` component from `Header.tsx`\n- Removed `selectConnectionStatus` import (no longer used in Header)\n- Updated JSDoc comment for Header to remove mention of connection status\n- Removed 3 connection status tests from `Header.test.tsx`\n- Updated `Header.stories.tsx` to remove connection status variations and organize stories by workspace/accent color variations","created_at":"2026-01-19T17:54:00Z"}]}
{"id":"rui-zeu","title":"don't show the priority or task number in the sidebar, just the task","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-19T18:25:32.510892+01:00","created_by":"Herb Caudill","updated_at":"2026-01-19T18:40:01.617854+01:00","closed_at":"2026-01-19T18:40:01.617854+01:00","close_reason":"Closed","comments":[{"id":49,"issue_id":"rui-zeu","author":"Herb Caudill","text":"Removed task ID and priority badge from the sidebar task display. The TaskCard component now shows only the status icon and task title in the collapsed view, making the sidebar cleaner and more focused on task content. Updated tests to reflect the new simpler display.","created_at":"2026-01-19T17:39:57Z"}]}
{"id":"rui-zex","title":"get rid of the internal padding in the sidebar","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-19T18:24:28.158134+01:00","created_by":"Herb Caudill","updated_at":"2026-01-19T18:33:58.242394+01:00","closed_at":"2026-01-19T18:33:58.242394+01:00","close_reason":"Closed","comments":[{"id":47,"issue_id":"rui-zex","author":"Herb Caudill","text":"Removed the `p-4` padding class from the sidebar container in `MainLayout.tsx`. The sidebar content (such as TaskSidebar) now controls its own padding.","created_at":"2026-01-19T17:33:54Z"}]}
{"id":"rui-zoa","title":"Update components to use status colors","description":"Replace hardcoded colors in TaskCard, ToolUseCard, StatusBar, AssistantText, WorkspacePicker with status CSS variables","status":"open","priority":3,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-19T19:19:14.90312+01:00","created_by":"Herb Caudill","updated_at":"2026-01-19T19:19:14.90312+01:00","dependencies":[{"issue_id":"rui-zoa","depends_on_id":"rui-bnb","type":"parent-child","created_at":"2026-01-19T19:19:36.318724+01:00","created_by":"Herb Caudill"},{"issue_id":"rui-zoa","depends_on_id":"rui-el8","type":"blocks","created_at":"2026-01-19T19:19:58.217888+01:00","created_by":"Herb Caudill"},{"issue_id":"rui-zoa","depends_on_id":"rui-i3g","type":"blocks","created_at":"2026-01-19T19:19:58.35488+01:00","created_by":"Herb Caudill"}]}
